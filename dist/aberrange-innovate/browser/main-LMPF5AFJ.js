import{A as aC,B as jc,C as vd,D as Wt,E as Kt,a as G,b as De,c as pd,d as Rm,e as N,f as Jb,g as gd,h as Xb,i as eC,j as tC,k as nC,l as Nm,m as rC,n as Vc,o as Pm,p as md,q as iC,r as sC,s as km,t as tt,u as gs,v as lr,w as yd,x as Lc,y as Om,z as oC}from"./chunk-O6QJB5Q7.js";function cC(n,e){return Object.is(n,e)}var Ct=null,_d=!1,wd=1,Ii=Symbol("SIGNAL");function Ae(n){let e=Ct;return Ct=n,e}function uC(){return Ct}var Bc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Lm(n){if(_d)throw new Error("");if(Ct===null)return;Ct.consumerOnSignalRead(n);let e=Ct.nextProducerIndex++;if(bd(Ct),e<Ct.producerNode.length&&Ct.producerNode[e]!==n&&Uc(Ct)){let t=Ct.producerNode[e];Dd(t,Ct.producerIndexOfThis[e])}Ct.producerNode[e]!==n&&(Ct.producerNode[e]=n,Ct.producerIndexOfThis[e]=Uc(Ct)?fC(n,Ct,e):0),Ct.producerLastReadVersion[e]=n.version}function mO(){wd++}function lC(n){if(!(Uc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===wd)){if(!n.producerMustRecompute(n)&&!Um(n)){n.dirty=!1,n.lastCleanEpoch=wd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=wd}}function dC(n){if(n.liveConsumerNode===void 0)return;let e=_d;_d=!0;try{for(let t of n.liveConsumerNode)t.dirty||yO(t)}finally{_d=e}}function hC(){return Ct?.consumerAllowSignalWrites!==!1}function yO(n){n.dirty=!0,dC(n),n.consumerMarkedDirty?.(n)}function Id(n){return n&&(n.nextProducerIndex=0),Ae(n)}function jm(n,e){if(Ae(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Uc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Dd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Um(n){bd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(lC(t),r!==t.version))return!0}return!1}function Bm(n){if(bd(n),Uc(n))for(let e=0;e<n.producerNode.length;e++)Dd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function fC(n,e,t){if(pC(n),n.liveConsumerNode.length===0&&gC(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=fC(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Dd(n,e){if(pC(n),n.liveConsumerNode.length===1&&gC(n))for(let r=0;r<n.producerNode.length;r++)Dd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];bd(i),i.producerIndexOfThis[r]=e}}function Uc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function bd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function pC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function gC(n){return n.producerNode!==void 0}function mC(n){let e=Object.create(vO);e.computation=n;let t=()=>{if(lC(e),Lm(e),e.value===Ed)throw e.error;return e.value};return t[Ii]=e,t}var Fm=Symbol("UNSET"),Vm=Symbol("COMPUTING"),Ed=Symbol("ERRORED"),vO=De(G({},Bc),{value:Fm,dirty:!0,error:null,equal:cC,producerMustRecompute(n){return n.value===Fm||n.value===Vm},producerRecomputeValue(n){if(n.value===Vm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Vm;let t=Id(n),r;try{r=n.computation()}catch(i){r=Ed,n.error=i}finally{jm(n,t)}if(e!==Fm&&e!==Ed&&r!==Ed&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function _O(){throw new Error}var yC=_O;function vC(){yC()}function _C(n){yC=n}var wO=null;function wC(n){let e=Object.create(IC);e.value=n;let t=()=>(Lm(e),e.value);return t[Ii]=e,t}function $m(n,e){hC()||vC(),n.equal(n.value,e)||(n.value=e,EO(n))}function EC(n,e){hC()||vC(),$m(n,e(n.value))}var IC=De(G({},Bc),{equal:cC,value:void 0});function EO(n){n.version++,mO(),dC(n),wO?.()}function ce(n){return typeof n=="function"}function xo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Cd=xo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ms(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var at=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(s){e=s instanceof Cd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{DC(s)}catch(o){e=e??[],o instanceof Cd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Cd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)DC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ms(t,e)}remove(e){let{_finalizers:t}=this;t&&ms(t,e),e instanceof n&&e._removeParent(this)}};at.EMPTY=(()=>{let n=new at;return n.closed=!0,n})();var qm=at.EMPTY;function Td(n){return n instanceof at||n&&"closed"in n&&ce(n.remove)&&ce(n.add)&&ce(n.unsubscribe)}function DC(n){ce(n)?n():n.unsubscribe()}var Wn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ro={setTimeout(n,e,...t){let{delegate:r}=Ro;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ro;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Sd(n){Ro.setTimeout(()=>{let{onUnhandledError:e}=Wn;if(e)e(n);else throw n})}function $c(){}var bC=zm("C",void 0,void 0);function CC(n){return zm("E",void 0,n)}function TC(n){return zm("N",n,void 0)}function zm(n,e,t){return{kind:n,value:e,error:t}}var ys=null;function No(n){if(Wn.useDeprecatedSynchronousErrorHandling){let e=!ys;if(e&&(ys={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ys;if(ys=null,t)throw r}}else n()}function SC(n){Wn.useDeprecatedSynchronousErrorHandling&&ys&&(ys.errorThrown=!0,ys.error=n)}var vs=class extends at{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Td(e)&&e.add(this)):this.destination=bO}static create(e,t,r){return new $r(e,t,r)}next(e){this.isStopped?Gm(TC(e),this):this._next(e)}error(e){this.isStopped?Gm(CC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Gm(bC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},IO=Function.prototype.bind;function Hm(n,e){return IO.call(n,e)}var Wm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ad(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ad(r)}else Ad(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ad(t)}}},$r=class extends vs{constructor(e,t,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Wn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Hm(e.next,s),error:e.error&&Hm(e.error,s),complete:e.complete&&Hm(e.complete,s)}):i=e}this.destination=new Wm(i)}};function Ad(n){Wn.useDeprecatedSynchronousErrorHandling?SC(n):Sd(n)}function DO(n){throw n}function Gm(n,e){let{onStoppedNotification:t}=Wn;t&&Ro.setTimeout(()=>t(n,e))}var bO={closed:!0,next:$c,error:DO,complete:$c};var Po=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qt(n){return n}function Km(...n){return Qm(n)}function Qm(n){return n.length===0?Qt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=TO(t)?t:new $r(t,r,i);return No(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=AC(r),new r((i,s)=>{let o=new $r({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Po](){return this}pipe(...t){return Qm(t)(this)}toPromise(t){return t=AC(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function AC(n){var e;return(e=n??Wn.Promise)!==null&&e!==void 0?e:Promise}function CO(n){return n&&ce(n.next)&&ce(n.error)&&ce(n.complete)}function TO(n){return n&&n instanceof vs||CO(n)&&Td(n)}function Ym(n){return ce(n?.lift)}function ge(n){return e=>{if(Ym(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(n,e,t,r,i){return new Zm(n,e,t,r,i)}var Zm=class extends vs{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ko(){return ge((n,e)=>{let t=null;n._refCount++;let r=me(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Oo=class extends pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ym(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new at;let t=this.getSubject();e.add(this.source.subscribe(me(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=at.EMPTY)}return e}refCount(){return ko()(this)}};var MC=xo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Je=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Md(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new MC}next(t){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?qm:(this.currentObservers=null,s.push(t),new at(()=>{this.currentObservers=null,ms(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new pe;return t.source=this,t}}return n.create=(e,t)=>new Md(e,t),n})(),Md=class extends Je{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:qm}};var Pt=class extends Je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var qc={now(){return(qc.delegate||Date).now()},delegate:void 0};var xd=class extends Je{constructor(e=1/0,t=1/0,r=qc){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Rd=class extends at{constructor(e,t){super()}schedule(e,t=0){return this}};var zc={setInterval(n,e,...t){let{delegate:r}=zc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=zc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Fo=class extends Rd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return zc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&zc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ms(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Vo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Vo.now=qc.now;var Lo=class extends Vo{constructor(e,t=Vo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Hc=new Lo(Fo);var Nd=class extends Fo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Pd=class extends Lo{};var Jm=new Pd(Nd);var Yt=new pe(n=>n.complete());function xC(n){return n&&ce(n.schedule)}function Xm(n){return n[n.length-1]}function kd(n){return ce(Xm(n))?n.pop():void 0}function dr(n){return xC(Xm(n))?n.pop():void 0}function RC(n,e){return typeof Xm(n)=="number"?n.pop():e}var Od=n=>n&&typeof n.length=="number"&&typeof n!="function";function Fd(n){return ce(n?.then)}function Vd(n){return ce(n[Po])}function Ld(n){return Symbol.asyncIterator&&ce(n?.[Symbol.asyncIterator])}function jd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function SO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ud=SO();function Bd(n){return ce(n?.[Ud])}function $d(n){return Xb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield gd(t.read());if(i)return yield gd(void 0);yield yield gd(r)}}finally{t.releaseLock()}})}function qd(n){return ce(n?.getReader)}function Ye(n){if(n instanceof pe)return n;if(n!=null){if(Vd(n))return AO(n);if(Od(n))return MO(n);if(Fd(n))return xO(n);if(Ld(n))return NC(n);if(Bd(n))return RO(n);if(qd(n))return NO(n)}throw jd(n)}function AO(n){return new pe(e=>{let t=n[Po]();if(ce(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MO(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function xO(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Sd)})}function RO(n){return new pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function NC(n){return new pe(e=>{PO(n,e).catch(t=>e.error(t))})}function NO(n){return NC($d(n))}function PO(n,e){var t,r,i,s;return Jb(this,void 0,void 0,function*(){try{for(t=eC(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function cn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function mn(n,e=0){return ge((t,r)=>{t.subscribe(me(r,i=>cn(r,n,()=>r.next(i),e),()=>cn(r,n,()=>r.complete(),e),i=>cn(r,n,()=>r.error(i),e)))})}function Pn(n,e=0){return ge((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function PC(n,e){return Ye(n).pipe(Pn(e),mn(e))}function kC(n,e){return Ye(n).pipe(Pn(e),mn(e))}function OC(n,e){return new pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function FC(n,e){return new pe(t=>{let r;return cn(t,e,()=>{r=n[Ud](),cn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function zd(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{cn(t,e,()=>{let r=n[Symbol.asyncIterator]();cn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function VC(n,e){return zd($d(n),e)}function LC(n,e){if(n!=null){if(Vd(n))return PC(n,e);if(Od(n))return OC(n,e);if(Fd(n))return kC(n,e);if(Ld(n))return zd(n,e);if(Bd(n))return FC(n,e);if(qd(n))return VC(n,e)}throw jd(n)}function Re(n,e){return e?LC(n,e):Ye(n)}function ie(...n){let e=dr(n);return Re(n,e)}function jo(n,e){let t=ce(n)?n:()=>n,r=i=>i.error(t());return new pe(e?i=>e.schedule(r,0,i):r)}function ey(n){return!!n&&(n instanceof pe||ce(n.lift)&&ce(n.subscribe))}var qr=xo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ee(n,e){return ge((t,r)=>{let i=0;t.subscribe(me(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:kO}=Array;function OO(n,e){return kO(e)?n(...e):n(e)}function Hd(n){return ee(e=>OO(n,e))}var{isArray:FO}=Array,{getPrototypeOf:VO,prototype:LO,keys:jO}=Object;function Gd(n){if(n.length===1){let e=n[0];if(FO(e))return{args:e,keys:null};if(UO(e)){let t=jO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function UO(n){return n&&typeof n=="object"&&VO(n)===LO}function Wd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Kd(...n){let e=dr(n),t=kd(n),{args:r,keys:i}=Gd(n);if(r.length===0)return Re([],e);let s=new pe(BO(r,e,i?o=>Wd(i,o):Qt));return t?s.pipe(Hd(t)):s}function BO(n,e,t=Qt){return r=>{jC(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)jC(e,()=>{let l=Re(n[c],e),d=!1;l.subscribe(me(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function jC(n,e,t){n?cn(t,n,e):e()}function UC(n,e,t,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},m=D=>l<r?_(D):c.push(D),_=D=>{s&&e.next(D),l++;let T=!1;Ye(t(D,d++)).subscribe(me(e,O=>{i?.(O),s?m(O):e.next(O)},()=>{T=!0},void 0,()=>{if(T)try{for(l--;c.length&&l<r;){let O=c.shift();o?cn(e,o,()=>_(O)):_(O)}g()}catch(O){e.error(O)}}))};return n.subscribe(me(e,m,()=>{f=!0,g()})),()=>{a?.()}}function Tt(n,e,t=1/0){return ce(e)?Tt((r,i)=>ee((s,o)=>e(r,s,i,o))(Ye(n(r,i))),t):(typeof e=="number"&&(t=e),ge((r,i)=>UC(r,i,n,t)))}function Gc(n=1/0){return Tt(Qt,n)}function BC(){return Gc(1)}function Uo(...n){return BC()(Re(n,dr(n)))}function Qd(n){return new pe(e=>{Ye(n()).subscribe(e)})}function ty(...n){let e=kd(n),{args:t,keys:r}=Gd(n),i=new pe(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;Ye(t[d]).subscribe(me(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?Wd(r,a):a),s.complete())}))}});return e?i.pipe(Hd(e)):i}function ny(...n){let e=dr(n),t=RC(n,1/0),r=n;return r.length?r.length===1?Ye(r[0]):Gc(t)(Re(r,e)):Yt}function kt(n,e){return ge((t,r)=>{let i=0;t.subscribe(me(r,s=>n.call(e,s,i++)&&r.next(s)))})}function un(n){return ge((e,t)=>{let r=null,i=!1,s;r=e.subscribe(me(t,void 0,void 0,o=>{s=Ye(n(o,un(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function $C(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(me(o,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function _s(n,e){return ce(e)?Tt(n,e,1):Tt(n,1)}function Di(n){return ge((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function zr(n){return n<=0?()=>Yt:ge((e,t)=>{let r=0;e.subscribe(me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ry(n){return ee(()=>n)}function iy(n,e=Qt){return n=n??$O,ge((t,r)=>{let i,s=!0;t.subscribe(me(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function $O(n,e){return n===e}function Yd(n=qO){return ge((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function qO(){return new qr}function Bo(n){return ge((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function yn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?kt((i,s)=>n(i,s,r)):Qt,zr(1),t?Di(e):Yd(()=>new qr))}function $o(n){return n<=0?()=>Yt:ge((e,t)=>{let r=[];e.subscribe(me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function sy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?kt((i,s)=>n(i,s,r)):Qt,$o(1),t?Di(e):Yd(()=>new qr))}function Wc(){return ge((n,e)=>{let t,r=!1;n.subscribe(me(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function ws(n,e){return ge($C(n,e,arguments.length>=2,!0))}function qC(n={}){let{connector:e=()=>new Je,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),o=c=void 0,d=f=!1},_=()=>{let D=o;m(),D?.unsubscribe()};return ge((D,T)=>{l++,!f&&!d&&g();let O=c=c??e();T.add(()=>{l--,l===0&&!f&&!d&&(a=oy(_,i))}),O.subscribe(T),!o&&l>0&&(o=new $r({next:U=>O.next(U),error:U=>{f=!0,g(),a=oy(m,t,U),O.error(U)},complete:()=>{d=!0,g(),a=oy(m,r),O.complete()}}),Ye(D).subscribe(o))})(s)}}function oy(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new $r({next:()=>{r.unsubscribe(),n()}});return Ye(e(...t)).subscribe(r)}function Zd(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,qC({connector:()=>new xd(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Es(...n){let e=dr(n);return ge((t,r)=>{(e?Uo(n,t,e):Uo(n,t)).subscribe(r)})}function ct(n,e){return ge((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(me(r,c=>{i?.unsubscribe();let l=0,d=s++;Ye(n(c,d)).subscribe(i=me(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Jd(n,e){return ce(e)?ct(()=>n,e):ct(()=>n)}function ay(n){return ge((e,t)=>{Ye(n).subscribe(me(t,()=>t.complete(),$c)),!t.closed&&e.subscribe(t)})}function dt(n,e,t){let r=ce(n)||e||t?{next:n,error:e,complete:t}:n;return r?ge((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(me(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Qt}var FT="https://g.co/ng/security#xss",j=class extends Error{constructor(e,t){super(jh(e,t)),this.code=e}};function jh(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function su(n){return{toString:n}.toString()}var Xd="__parameters__";function zO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function VT(n,e,t){return su(()=>{let r=zO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(Xd)?c[Xd]:Object.defineProperty(c,Xd,{value:[]})[Xd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var xt=globalThis;function Be(n){for(let e in n)if(n[e]===Be)return e;throw Error("Could not find renamed property on target object.")}function HO(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Jt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Jt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function zC(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var GO=Be({__forward_ref__:Be});function xi(n){return n.__forward_ref__=xi,n.toString=function(){return Jt(this())},n}function Zt(n){return LT(n)?n():n}function LT(n){return typeof n=="function"&&n.hasOwnProperty(GO)&&n.__forward_ref__===xi}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Xt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Uh(n){return HC(n,UT)||HC(n,BT)}function jT(n){return Uh(n)!==null}function HC(n,e){return n.hasOwnProperty(e)?n[e]:null}function WO(n){let e=n&&(n[UT]||n[BT]);return e||null}function GC(n){return n&&(n.hasOwnProperty(WC)||n.hasOwnProperty(KO))?n[WC]:null}var UT=Be({\u0275prov:Be}),WC=Be({\u0275inj:Be}),BT=Be({ngInjectableDef:Be}),KO=Be({ngInjectorDef:Be}),Q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $T(n){return n&&!!n.\u0275providers}var QO=Be({\u0275cmp:Be}),YO=Be({\u0275dir:Be}),ZO=Be({\u0275pipe:Be}),JO=Be({\u0275mod:Be}),fh=Be({\u0275fac:Be}),Kc=Be({__NG_ELEMENT_ID__:Be}),KC=Be({__NG_ENV_ID__:Be});function ou(n){return typeof n=="string"?n:n==null?"":String(n)}function XO(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ou(n)}function eF(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new j(-200,n)}function gv(n,e){throw new j(-201,!1)}var ye=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ye||{}),Cy;function qT(){return Cy}function ln(n){let e=Cy;return Cy=n,e}function zT(n,e,t){let r=Uh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ye.Optional)return null;if(e!==void 0)return e;gv(n,"Injector")}var tF={},Qc=tF,Ty="__NG_DI_FLAG__",ph="ngTempTokenPath",nF="ngTokenPath",rF=/\n/gm,iF="\u0275",QC="__source",Go;function sF(){return Go}function bi(n){let e=Go;return Go=n,e}function oF(n,e=ye.Default){if(Go===void 0)throw new j(-203,!1);return Go===null?zT(n,void 0,e):Go.get(n,e&ye.Optional?null:void 0,e)}function $(n,e=ye.Default){return(qT()||oF)(Zt(n),e)}function q(n,e=ye.Default){return $(n,Bh(e))}function Bh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Sy(n){let e=[];for(let t=0;t<n.length;t++){let r=Zt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=ye.Default;for(let o=0;o<r.length;o++){let a=r[o],c=aF(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push($(i,s))}else e.push($(r))}return e}function HT(n,e){return n[Ty]=e,n.prototype[Ty]=e,n}function aF(n){return n[Ty]}function cF(n,e,t,r){let i=n[ph];throw e[QC]&&i.unshift(e[QC]),n.message=uF(`
`+n.message,i,t,r),n[nF]=i,n[ph]=null,n}function uF(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==iF?n.slice(2):n;let i=Jt(e);if(Array.isArray(e))i=e.map(Jt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Jt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(rF,`
  `)}`}var En=HT(VT("Optional"),8);var GT=HT(VT("SkipSelf"),4);function Cs(n,e){let t=n.hasOwnProperty(fh);return t?n[fh]:null}function mv(n,e){n.forEach(t=>Array.isArray(t)?mv(t,e):e(t))}function WT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function gh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function lF(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function dF(n,e,t){let r=au(n,e);return r>=0?n[r|1]=t:(r=~r,lF(n,r,e,t)),r}function cy(n,e){let t=au(n,e);if(t>=0)return n[t|1]}function au(n,e){return hF(n,e,1)}function hF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Ko={},vn=[],Ts=new Q(""),KT=new Q("",-1),QT=new Q(""),mh=class{get(e,t=Qc){if(t===Qc){let r=new Error(`NullInjectorError: No provider for ${Jt(e)}!`);throw r.name="NullInjectorError",r}return t}},YT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(YT||{}),gr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(gr||{}),Ti=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ti||{});function fF(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Ay(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];pF(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function ZT(n){return n===3||n===4||n===6}function pF(n){return n.charCodeAt(0)===64}function Yc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?YC(n,t,i,null,e[++r]):YC(n,t,i,null,null))}}return n}function YC(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var JT="ng-template";function gF(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&fF(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(yv(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function yv(n){return n.type===4&&n.value!==JT}function mF(n,e,t){let r=n.type===4&&!t?JT:n.value;return e===r}function yF(n,e,t){let r=4,i=n.attrs,s=i!==null?wF(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Kn(r)&&!Kn(c))return!1;if(o&&Kn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!mF(n,c,t)||c===""&&e.length===1){if(Kn(r))return!1;o=!0}}else if(r&8){if(i===null||!gF(n,i,c,t)){if(Kn(r))return!1;o=!0}}else{let l=e[++a],d=vF(c,i,yv(n),t);if(d===-1){if(Kn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Kn(r))return!1;o=!0}}}}return Kn(r)||o}function Kn(n){return(n&1)===0}function vF(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return EF(e,n)}function _F(n,e,t=!1){for(let r=0;r<e.length;r++)if(yF(n,e[r],t))return!0;return!1}function wF(n){for(let e=0;e<n.length;e++){let t=n[e];if(ZT(t))return e}return n.length}function EF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function ZC(n,e){return n?":not("+e.trim()+")":e}function IF(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Kn(o)&&(e+=ZC(s,i),i=""),r=o,s=s||!Kn(r);t++}return i!==""&&(e+=ZC(s,i)),e}function DF(n){return n.map(IF).join(",")}function bF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Kn(i))break;i=s}r++}return{attrs:e,classes:t}}function Oe(n){return su(()=>{let e=iS(n),t=De(G({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===YT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||gr.Emulated,styles:n.styles||vn,_:null,schemas:n.schemas||null,tView:null,id:""});sS(t);let r=n.dependencies;return t.directiveDefs=XC(r,!1),t.pipeDefs=XC(r,!0),t.id=SF(t),t})}function CF(n){return Ss(n)||eS(n)}function TF(n){return n!==null}function en(n){return su(()=>({type:n.type,bootstrap:n.bootstrap||vn,declarations:n.declarations||vn,imports:n.imports||vn,exports:n.exports||vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function JC(n,e){if(n==null)return Ko;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Ti.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Ti.None?[r,a]:r,e[s]=o):t[s]=r}return t}function St(n){return su(()=>{let e=iS(n);return sS(e),e})}function XT(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ss(n){return n[QO]||null}function eS(n){return n[YO]||null}function tS(n){return n[ZO]||null}function nS(n){let e=Ss(n)||eS(n)||tS(n);return e!==null?e.standalone:!1}function rS(n,e){let t=n[JO]||null;if(!t&&e===!0)throw new Error(`Type ${Jt(n)} does not have '\u0275mod' property.`);return t}function iS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ko,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:JC(n.inputs,e),outputs:JC(n.outputs),debugInfo:null}}function sS(n){n.features?.forEach(e=>e(n))}function XC(n,e){if(!n)return null;let t=e?tS:CF;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(TF)}function SF(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Jn(n){return{\u0275providers:n}}function vv(...n){return{\u0275providers:oS(!0,n),\u0275fromNgModule:!0}}function oS(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return mv(e,o=>{let a=o;My(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&aS(i,s),t}function aS(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];_v(i,s=>{e(s,r)})}}function My(n,e,t,r){if(n=Zt(n),!n)return!1;let i=null,s=GC(n),o=!s&&Ss(n);if(!s&&!o){let c=n.ngModule;if(s=GC(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)My(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{mv(s.imports,d=>{My(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&aS(l,e)}if(!a){let l=Cs(i)||(()=>new i);e({provide:i,useFactory:l,deps:vn},i),e({provide:QT,useValue:i,multi:!0},i),e({provide:Ts,useValue:()=>$(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;_v(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function _v(n,e){for(let t of n)$T(t)&&(t=t.\u0275providers),Array.isArray(t)?_v(t,e):e(t)}var AF=Be({provide:String,useValue:Be});function cS(n){return n!==null&&typeof n=="object"&&AF in n}function MF(n){return!!(n&&n.useExisting)}function xF(n){return!!(n&&n.useFactory)}function Qo(n){return typeof n=="function"}function RF(n){return!!n.useClass}var $h=new Q(""),ch={},NF={},uy;function wv(){return uy===void 0&&(uy=new mh),uy}var On=class{},Zc=class extends On{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ry(e,o=>this.processProvider(o)),this.records.set(KT,qo(void 0,this)),i.has("environment")&&this.records.set(On,qo(void 0,this));let s=this.records.get($h);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(QT,vn,ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ae(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ae(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=bi(this),r=ln(void 0),i;try{return e()}finally{bi(t),ln(r)}}get(e,t=Qc,r=ye.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(KC))return e[KC](this);r=Bh(r);let i,s=bi(this),o=ln(void 0);try{if(!(r&ye.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=VF(e)&&Uh(e);l&&this.injectableDefInScope(l)?c=qo(xy(e),ch):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ye.Self?wv():this.parent;return t=r&ye.Optional&&t===Qc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[ph]=a[ph]||[]).unshift(Jt(e)),s)throw a;return cF(a,e,"R3InjectorError",this.source)}else throw a}finally{ln(o),bi(s)}}resolveInjectorInitializers(){let e=Ae(null),t=bi(this),r=ln(void 0),i;try{let s=this.get(Ts,vn,ye.Self);for(let o of s)o()}finally{bi(t),ln(r),Ae(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Jt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){e=Zt(e);let t=Qo(e)?e:Zt(e&&e.provide),r=kF(e);if(!Qo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=qo(void 0,ch,!0),i.factory=()=>Sy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ae(null);try{return t.value===ch&&(t.value=NF,t.value=t.factory()),typeof t.value=="object"&&t.value&&FF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ae(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Zt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function xy(n){let e=Uh(n),t=e!==null?e.factory:Cs(n);if(t!==null)return t;if(n instanceof Q)throw new j(204,!1);if(n instanceof Function)return PF(n);throw new j(204,!1)}function PF(n){if(n.length>0)throw new j(204,!1);let t=WO(n);return t!==null?()=>t.factory(n):()=>new n}function kF(n){if(cS(n))return qo(void 0,n.useValue);{let e=uS(n);return qo(e,ch)}}function uS(n,e,t){let r;if(Qo(n)){let i=Zt(n);return Cs(i)||xy(i)}else if(cS(n))r=()=>Zt(n.useValue);else if(xF(n))r=()=>n.useFactory(...Sy(n.deps||[]));else if(MF(n))r=()=>$(Zt(n.useExisting));else{let i=Zt(n&&(n.useClass||n.provide));if(OF(n))r=()=>new i(...Sy(n.deps));else return Cs(i)||xy(i)}return r}function qo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function OF(n){return!!n.deps}function FF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function VF(n){return typeof n=="function"||typeof n=="object"&&n instanceof Q}function Ry(n,e){for(let t of n)Array.isArray(t)?Ry(t,e):t&&$T(t)?Ry(t.\u0275providers,e):e(t)}function vr(n,e){n instanceof Zc&&n.assertNotDestroyed();let t,r=bi(n),i=ln(void 0);try{return e()}finally{bi(r),ln(i)}}function LF(){return qT()!==void 0||sF()!=null}function jF(n){return typeof n=="function"}var wn=0,ve=1,ue=2,Bt=3,Qn=4,Xn=5,mr=6,yh=7,Yn=8,Yo=9,yr=10,nt=11,Jc=12,eT=13,na=14,Fn=15,Zo=16,zo=17,Jo=18,qh=19,lS=20,Ci=21,ly=22,kn=23,Ot=25,dS=1,Xc=6,Hr=7,vh=8,_h=9,_n=10,wh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(wh||{});function pr(n){return Array.isArray(n)&&typeof n[dS]=="object"}function _r(n){return Array.isArray(n)&&n[dS]===!0}function hS(n){return(n.flags&4)!==0}function cu(n){return n.componentOffset>-1}function Ev(n){return(n.flags&1)===1}function Si(n){return!!n.template}function Eh(n){return(n[ue]&512)!==0}var Ny=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function fS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ri(){return pS}function pS(n){return n.type.prototype.ngOnChanges&&(n.setInput=BF),UF}Ri.ngInherit=!0;function UF(){let n=mS(this),e=n?.current;if(e){let t=n.previous;if(t===Ko)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function BF(n,e,t,r,i){let s=this.declaredInputs[r],o=mS(n)||$F(n,{previous:Ko,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Ny(l&&l.currentValue,t,c===Ko),fS(n,e,i,t)}var gS="__ngSimpleChanges__";function mS(n){return n[gS]||null}function $F(n,e){return n[gS]=e}var tT=null;var hr=function(n,e,t){tT?.(n,e,t)},qF="svg",zF="math";function Zn(n){for(;Array.isArray(n);)n=n[wn];return n}function yS(n,e){return Zn(e[n])}function In(n,e){return Zn(e[n.index])}function vS(n,e){return n.data[e]}function _S(n,e){return n[e]}function Ni(n,e){let t=e[n];return pr(t)?t:t[wn]}function Iv(n){return(n[ue]&128)===128}function HF(n){return _r(n[Bt])}function Ih(n,e){return e==null?null:n[e]}function wS(n){n[zo]=0}function ES(n){n[ue]&1024||(n[ue]|=1024,Iv(n)&&zh(n))}function GF(n,e){for(;n>0;)e=e[na],n--;return e}function eu(n){return!!(n[ue]&9216||n[kn]?.dirty)}function Py(n){n[yr].changeDetectionScheduler?.notify(7),n[ue]&64&&(n[ue]|=1024),eu(n)&&zh(n)}function zh(n){n[yr].changeDetectionScheduler?.notify(0);let e=As(n);for(;e!==null&&!(e[ue]&8192||(e[ue]|=8192,!Iv(e)));)e=As(e)}function IS(n,e){if((n[ue]&256)===256)throw new j(911,!1);n[Ci]===null&&(n[Ci]=[]),n[Ci].push(e)}function WF(n,e){if(n[Ci]===null)return;let t=n[Ci].indexOf(e);t!==-1&&n[Ci].splice(t,1)}function As(n){let e=n[Bt];return _r(e)?e[Bt]:e}var we={lFrame:PS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var DS=!1;function KF(){return we.lFrame.elementDepthCount}function QF(){we.lFrame.elementDepthCount++}function YF(){we.lFrame.elementDepthCount--}function bS(){return we.bindingsEnabled}function uu(){return we.skipHydrationRootTNode!==null}function ZF(n){return we.skipHydrationRootTNode===n}function JF(n){we.skipHydrationRootTNode=n}function XF(){we.skipHydrationRootTNode=null}function je(){return we.lFrame.lView}function Dn(){return we.lFrame.tView}function CS(n){return we.lFrame.contextLView=n,n[Yn]}function TS(n){return we.lFrame.contextLView=null,n}function hn(){let n=SS();for(;n!==null&&n.type===64;)n=n.parent;return n}function SS(){return we.lFrame.currentTNode}function eV(){let n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function lu(n,e){let t=we.lFrame;t.currentTNode=n,t.isParent=e}function AS(){return we.lFrame.isParent}function tV(){we.lFrame.isParent=!1}function nV(){return we.lFrame.contextLView}function MS(){return DS}function nT(n){DS=n}function Dv(){let n=we.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function rV(n){return we.lFrame.bindingIndex=n}function bv(){return we.lFrame.bindingIndex++}function iV(n){let e=we.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function sV(){return we.lFrame.inI18n}function oV(n,e){let t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,ky(e)}function aV(){return we.lFrame.currentDirectiveIndex}function ky(n){we.lFrame.currentDirectiveIndex=n}function cV(n){let e=we.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function xS(n){we.lFrame.currentQueryIndex=n}function uV(n){let e=n[ve];return e.type===2?e.declTNode:e.type===1?n[Xn]:null}function RS(n,e,t){if(t&ye.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ye.Host);)if(i=uV(s),i===null||(s=s[na],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=we.lFrame=NS();return r.currentTNode=e,r.lView=n,!0}function Cv(n){let e=NS(),t=n[ve];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function NS(){let n=we.lFrame,e=n===null?null:n.child;return e===null?PS(n):e}function PS(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function kS(){let n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var OS=kS;function Tv(){let n=kS();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function lV(n){return(we.lFrame.contextLView=GF(n,we.lFrame.contextLView))[Yn]}function ra(){return we.lFrame.selectedIndex}function Ms(n){we.lFrame.selectedIndex=n}function Sv(){let n=we.lFrame;return vS(n.tView,n.selectedIndex)}function FS(){return we.lFrame.currentNamespace}var VS=!0;function Av(){return VS}function Pi(n){VS=n}function dV(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=pS(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Mv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function uh(n,e,t){LS(n,e,3,t)}function lh(n,e,t,r){(n[ue]&3)===t&&LS(n,e,t,r)}function dy(n,e){let t=n[ue];(t&3)===e&&(t&=16383,t+=1,n[ue]=t)}function LS(n,e,t,r){let i=r!==void 0?n[zo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[zo]+=65536),(a<s||s==-1)&&(hV(n,t,e,c),n[zo]=(n[zo]&4294901760)+c+2),c++}function rT(n,e){hr(4,n,e);let t=Ae(null);try{e.call(n)}finally{Ae(t),hr(5,n,e)}}function hV(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ue]>>14<n[zo]>>16&&(n[ue]&3)===e&&(n[ue]+=16384,rT(a,s)):rT(a,s)}var Wo=-1,xs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function fV(n){return n instanceof xs}function pV(n){return(n.flags&8)!==0}function gV(n){return(n.flags&16)!==0}var hy={},Oy=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Bh(r);let i=this.injector.get(e,hy,r);return i!==hy||t===hy?i:this.parentInjector.get(e,t,r)}};function jS(n){return n!==Wo}function Dh(n){return n&32767}function mV(n){return n>>16}function bh(n,e){let t=mV(n),r=e;for(;t>0;)r=r[na],t--;return r}var Fy=!0;function Ch(n){let e=Fy;return Fy=n,e}var yV=256,US=yV-1,BS=5,vV=0,fr={};function _V(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Kc)&&(r=t[Kc]),r==null&&(r=t[Kc]=vV++);let i=r&US,s=1<<i;e.data[n+(i>>BS)]|=s}function Th(n,e){let t=$S(n,e);if(t!==-1)return t;let r=e[ve];r.firstCreatePass&&(n.injectorIndex=e.length,fy(r.data,n),fy(e,null),fy(r.blueprint,null));let i=xv(n,e),s=n.injectorIndex;if(jS(i)){let o=Dh(i),a=bh(i,e),c=a[ve].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function fy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function $S(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function xv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=WS(i),r===null)return Wo;if(t++,i=i[na],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Wo}function Vy(n,e,t){_V(n,e,t)}function wV(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(ZT(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function qS(n,e,t){if(t&ye.Optional||n!==void 0)return n;gv(e,"NodeInjector")}function zS(n,e,t,r){if(t&ye.Optional&&r===void 0&&(r=null),!(t&(ye.Self|ye.Host))){let i=n[Yo],s=ln(void 0);try{return i?i.get(e,r,t&ye.Optional):zT(e,r,t&ye.Optional)}finally{ln(s)}}return qS(r,e,t)}function HS(n,e,t,r=ye.Default,i){if(n!==null){if(e[ue]&2048&&!(r&ye.Self)){let o=CV(n,e,t,r,fr);if(o!==fr)return o}let s=GS(n,e,t,r,fr);if(s!==fr)return s}return zS(e,t,r,i)}function GS(n,e,t,r,i){let s=DV(t);if(typeof s=="function"){if(!RS(e,n,r))return r&ye.Host?qS(i,t,r):zS(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ye.Optional))gv(t);else return o}finally{OS()}}else if(typeof s=="number"){let o=null,a=$S(n,e),c=Wo,l=r&ye.Host?e[Fn][Xn]:null;for((a===-1||r&ye.SkipSelf)&&(c=a===-1?xv(n,e):e[a+8],c===Wo||!sT(r,!1)?a=-1:(o=e[ve],a=Dh(c),e=bh(c,e)));a!==-1;){let d=e[ve];if(iT(s,a,d.data)){let f=EV(a,e,t,o,r,l);if(f!==fr)return f}c=e[a+8],c!==Wo&&sT(r,e[ve].data[a+8]===l)&&iT(s,a,e)?(o=d,a=Dh(c),e=bh(c,e)):a=-1}}return i}function EV(n,e,t,r,i,s){let o=e[ve],a=o.data[n+8],c=r==null?cu(a)&&Fy:r!=o&&(a.type&3)!==0,l=i&ye.Host&&s===a,d=IV(a,o,t,c,l);return d!==null?Xo(e,o,d,a):fr}function IV(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let m=f;m<g;m++){let _=o[m];if(m<c&&t===_||m>=c&&_.type===t)return m}if(i){let m=o[c];if(m&&Si(m)&&m.type===t)return c}return null}function Xo(n,e,t,r){let i=n[t],s=e.data;if(fV(i)){let o=i;o.resolving&&eF(XO(s[t]));let a=Ch(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?ln(o.injectImpl):null,d=RS(n,r,ye.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&dV(t,s[t],e)}finally{l!==null&&ln(l),Ch(a),o.resolving=!1,OS()}}return i}function DV(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Kc)?n[Kc]:void 0;return typeof e=="number"?e>=0?e&US:bV:e}function iT(n,e,t){let r=1<<n;return!!(t[e+(n>>BS)]&r)}function sT(n,e){return!(n&ye.Self)&&!(n&ye.Host&&e)}var bs=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return HS(this._tNode,this._lView,e,Bh(r),t)}};function bV(){return new bs(hn(),je())}function Os(n){return su(()=>{let e=n.prototype.constructor,t=e[fh]||Ly(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[fh]||Ly(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ly(n){return LT(n)?()=>{let e=Ly(Zt(n));return e&&e()}:Cs(n)}function CV(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ue]&2048&&!(o[ue]&512);){let a=GS(s,o,t,r|ye.Self,fr);if(a!==fr)return a;let c=s.parent;if(!c){let l=o[lS];if(l){let d=l.get(t,fr,r);if(d!==fr)return d}c=WS(o),o=o[na]}s=c}return i}function WS(n){let e=n[ve],t=e.type;return t===2?e.declTNode:t===1?n[Xn]:null}function Rv(n){return wV(hn(),n)}function oT(n,e=null,t=null,r){let i=KS(n,e,t,r);return i.resolveInjectorInitializers(),i}function KS(n,e=null,t=null,r,i=new Set){let s=[t||vn,vv(n)];return r=r||(typeof n=="object"?void 0:Jt(n)),new Zc(s,e||wv(),r||null,i)}var Ds=class Ds{static create(e,t){if(Array.isArray(e))return oT({name:""},t,e,"");{let r=e.name??"";return oT({name:r},e.parent,e.providers,r)}}};Ds.THROW_IF_NOT_FOUND=Qc,Ds.NULL=new mh,Ds.\u0275prov=X({token:Ds,providedIn:"any",factory:()=>$(KT)}),Ds.__NG_ELEMENT_ID__=-1;var dn=Ds;var TV=new Q("");TV.__NG_ELEMENT_ID__=n=>{let e=hn();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&ye.Optional)return null;throw new j(204,!1)};var SV="ngOriginalError";function py(n){return n[SV]}var Gr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&py(e);for(;t&&py(t);)t=py(t);return t||null}},QS=new Q("",{providedIn:"root",factory:()=>q(Gr).handleError.bind(void 0)}),YS=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=AV,e.__NG_ENV_ID__=r=>r;let n=e;return n})(),jy=class extends YS{constructor(e){super(),this._lView=e}onDestroy(e){return IS(this._lView,e),()=>WF(this._lView,e)}};function AV(){return new jy(je())}function MV(){return Hh(hn(),je())}function Hh(n,e){return new Qr(In(n,e))}var Qr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=MV;let n=e;return n})();var Fs=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Pt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();var Uy=class extends Je{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,LF()&&(this.destroyRef=q(YS,{optional:!0})??void 0,this.pendingTasks=q(Fs,{optional:!0})??void 0)}emit(e){let t=Ae(null);try{super.next(e)}finally{Ae(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof at&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},yt=Uy;var xV="ngSkipHydration",RV="ngskiphydration";function ZS(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===RV)return!0}return!1}function JS(n){return n.hasAttribute(xV)}function Sh(n){return(n.flags&128)===128}function NV(n){if(Sh(n))return!0;let e=n.parent;for(;e;){if(Sh(n)||ZS(e))return!0;e=e.parent}return!1}var XS=new Map,PV=0;function kV(){return PV++}function OV(n){XS.set(n[qh],n)}function FV(n){XS.delete(n[qh])}var aT="__ngContext__";function Rs(n,e){pr(e)?(n[aT]=e[qh],OV(e)):n[aT]=e}function eA(n){return nA(n[Jc])}function tA(n){return nA(n[Qn])}function nA(n){for(;n!==null&&!_r(n);)n=n[Qn];return n}var By;function rA(n){By=n}function du(){if(By!==void 0)return By;if(typeof document<"u")return document;throw new j(210,!1)}var hu=new Q("",{providedIn:"root",factory:()=>VV}),VV="ng",Nv=new Q(""),Rt=new Q("",{providedIn:"platform",factory:()=>"unknown"});var Pv=new Q(""),kv=new Q("",{providedIn:"root",factory:()=>du().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function LV(){let n=new ia;return q(Rt)==="browser"&&(n.store=jV(du(),q(hu))),n}var ia=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=X({token:e,providedIn:"root",factory:LV});let n=e;return n})();function jV(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var iA="h",sA="b",$y=function(n){return n.FirstChild="f",n.NextSibling="n",n}($y||{}),UV="e",BV="t",Ov="c",oA="x",Ah="r",$V="i",qV="n",aA="d";var zV="__nghData__",cA=zV,gy="ngh",HV="nghm",uA=()=>null;function GV(n,e,t=!1){let r=n.getAttribute(gy);if(r==null)return null;let[i,s]=r.split("|");if(r=t?s:i,!r)return null;let o=s?`|${s}`:"",a=t?i:o,c={};if(r!==""){let d=e.get(ia,null,{optional:!0});d!==null&&(c=d.get(cA,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,Gh(l,0,n.nextSibling)),a?n.setAttribute(gy,a):n.removeAttribute(gy),l}function WV(){uA=GV}function Fv(n,e,t=!1){return uA(n,e,t)}function KV(n){let e=n._lView;return e[ve].type===2?null:(Eh(e)&&(e=e[Ot]),e)}function QV(n){return n.textContent?.replace(/\s/gm,"")}function YV(n){let e=du(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=QV(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function Gh(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function qy(n,e){return n.segmentHeads?.[e]??null}function ZV(n,e){let t=n.data,r=t[UV]?.[e]??null;return r===null&&t[Ov]?.[e]&&(r=Vv(n,e)),r}function lA(n,e){return n.data[Ov]?.[e]??null}function Vv(n,e){let t=lA(n,e)??[],r=0;for(let i of t)r+=i[Ah]*(i[oA]??1);return r}function JV(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[aA];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Wh(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[aA];n.disconnectedNodes=t?new Set(t):null}return!!JV(n)?.has(e)}var eh=new Q(""),dA=!1,hA=new Q("",{providedIn:"root",factory:()=>dA});var th;function XV(){if(th===void 0&&(th=null,xt.trustedTypes))try{th=xt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return th}function Kh(n){return XV()?.createHTML(n)||n}var nh;function fA(){if(nh===void 0&&(nh=null,xt.trustedTypes))try{nh=xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return nh}function cT(n){return fA()?.createHTML(n)||n}function uT(n){return fA()?.createScriptURL(n)||n}var Mh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${FT})`}};function sa(n){return n instanceof Mh?n.changingThisBreaksApplicationSecurity:n}function Qh(n,e){let t=eL(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${FT})`)}return t===e}function eL(n){return n instanceof Mh&&n.getTypeName()||null}function tL(n){let e=new Hy(n);return nL()?new zy(e):e}var zy=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Kh(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}},Hy=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Kh(e),t}};function nL(){try{return!!new window.DOMParser().parseFromString(Kh(""),"text/html")}catch{return!1}}var rL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Lv(n){return n=String(n),n.match(rL)?n:"unsafe:"+n}function Yr(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function fu(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var pA=Yr("area,br,col,hr,img,wbr"),gA=Yr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mA=Yr("rp,rt"),iL=fu(mA,gA),sL=fu(gA,Yr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),oL=fu(mA,Yr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lT=fu(pA,sL,oL,iL),yA=Yr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),aL=Yr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),cL=Yr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),uL=fu(yA,aL,cL),lL=Yr("script,style,template"),Gy=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=fL(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=hL(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=dT(e).toLowerCase();if(!lT.hasOwnProperty(t))return this.sanitizedSomething=!0,!lL.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!uL.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;yA[a]&&(c=Lv(c)),this.buf.push(" ",o,'="',hT(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=dT(e).toLowerCase();lT.hasOwnProperty(t)&&!pA.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(hT(e))}};function dL(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function hL(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw vA(e);return e}function fL(n){let e=n.firstChild;if(e&&dL(n,e))throw vA(e);return e}function dT(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function vA(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var pL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gL=/([^\#-~ |!])/g;function hT(n){return n.replace(/&/g,"&amp;").replace(pL,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(gL,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var rh;function _A(n,e){let t=null;try{rh=rh||tL(n);let r=e?String(e):"";t=rh.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=rh.getInertBodyElement(r)}while(r!==s);let a=new Gy().sanitizeChildren(fT(t)||t);return Kh(a)}finally{if(t){let r=fT(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function fT(n){return"content"in n&&mL(n)?n.content:null}function mL(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var pu=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(pu||{});function wA(n){let e=jv();return e?cT(e.sanitize(pu.HTML,n)||""):Qh(n,"HTML")?cT(sa(n)):_A(du(),ou(n))}function gu(n){let e=jv();return e?e.sanitize(pu.URL,n)||"":Qh(n,"URL")?sa(n):Lv(ou(n))}function yL(n){let e=jv();if(e)return uT(e.sanitize(pu.RESOURCE_URL,n)||"");if(Qh(n,"ResourceURL"))return uT(sa(n));throw new j(904,!1)}function vL(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?yL:gu}function EA(n,e,t){return vL(e,t)(n)}function jv(){let n=je();return n&&n[yr].sanitizer}var _L=/^>|^->|<!--|-->|--!>|<!-$/g,wL=/(<|>)/g,EL="\u200B$1\u200B";function IL(n){return n.replace(_L,e=>e.replace(wL,EL))}function DL(n){return n.ownerDocument.body}function IA(n){return n instanceof Function?n():n}function ih(n){return(n??q(dn)).get(Rt)==="browser"}var Wr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Wr||{}),bL;function Uv(n,e){return bL(n,e)}function Ho(n,e,t,r,i){if(r!=null){let s,o=!1;_r(r)?s=r:pr(r)&&(o=!0,r=r[wn]);let a=Zn(r);n===0&&t!==null?i==null?AA(e,t,a):xh(e,t,a,i||null,!0):n===1&&t!==null?xh(e,t,a,i||null,!0):n===2?Hv(e,a,o):n===3&&e.destroyNode(a),s!=null&&UL(e,n,s,t,i)}}function DA(n,e){return n.createText(e)}function CL(n,e,t){n.setValue(e,t)}function bA(n,e){return n.createComment(IL(e))}function Bv(n,e,t){return n.createElement(e,t)}function TL(n,e){CA(n,e),e[wn]=null,e[Xn]=null}function SL(n,e,t,r,i,s){r[wn]=i,r[Xn]=e,Yh(n,r,t,1,i,s)}function CA(n,e){e[yr].changeDetectionScheduler?.notify(8),Yh(n,e,e[nt],2,null,null)}function AL(n){let e=n[Jc];if(!e)return my(n[ve],n);for(;e;){let t=null;if(pr(e))t=e[Jc];else{let r=e[_n];r&&(t=r)}if(!t){for(;e&&!e[Qn]&&e!==n;)pr(e)&&my(e[ve],e),e=e[Bt];e===null&&(e=n),pr(e)&&my(e[ve],e),t=e&&e[Qn]}e=t}}function ML(n,e,t,r){let i=_n+r,s=t.length;r>0&&(t[i-1][Qn]=e),r<s-_n?(e[Qn]=t[i],WT(t,_n+r,e)):(t.push(e),e[Qn]=null),e[Bt]=t;let o=e[Zo];o!==null&&t!==o&&TA(o,e);let a=e[Jo];a!==null&&a.insertView(n),Py(e),e[ue]|=128}function TA(n,e){let t=n[_h],r=e[Bt];if(pr(r))n[ue]|=wh.HasTransplantedViews;else{let i=r[Bt][Fn];e[Fn]!==i&&(n[ue]|=wh.HasTransplantedViews)}t===null?n[_h]=[e]:t.push(e)}function $v(n,e){let t=n[_h],r=t.indexOf(e);t.splice(r,1)}function Wy(n,e){if(n.length<=_n)return;let t=_n+e,r=n[t];if(r){let i=r[Zo];i!==null&&i!==n&&$v(i,r),e>0&&(n[t-1][Qn]=r[Qn]);let s=gh(n,_n+e);TL(r[ve],r);let o=s[Jo];o!==null&&o.detachView(s[ve]),r[Bt]=null,r[Qn]=null,r[ue]&=-129}return r}function SA(n,e){if(!(e[ue]&256)){let t=e[nt];t.destroyNode&&Yh(n,e,t,3,null,null),AL(e)}}function my(n,e){if(e[ue]&256)return;let t=Ae(null);try{e[ue]&=-129,e[ue]|=256,e[kn]&&Bm(e[kn]),RL(n,e),xL(n,e),e[ve].type===1&&e[nt].destroy();let r=e[Zo];if(r!==null&&_r(e[Bt])){r!==e[Bt]&&$v(r,e);let i=e[Jo];i!==null&&i.detachView(n)}FV(e)}finally{Ae(t)}}function xL(n,e){let t=n.cleanup,r=e[yh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[yh]=null);let i=e[Ci];if(i!==null){e[Ci]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function RL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof xs)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];hr(4,a,c);try{c.call(a)}finally{hr(5,a,c)}}else{hr(4,i,s);try{s.call(i)}finally{hr(5,i,s)}}}}}function NL(n,e,t){return PL(n,e.parent,t)}function PL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[wn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===gr.None||s===gr.Emulated)return null}return In(r,t)}}function xh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function AA(n,e,t){n.appendChild(e,t)}function pT(n,e,t,r,i){r!==null?xh(n,e,t,r,i):AA(n,e,t)}function kL(n,e,t,r){n.removeChild(e,t,r)}function qv(n,e){return n.parentNode(e)}function OL(n,e){return n.nextSibling(e)}function FL(n,e,t){return LL(n,e,t)}function VL(n,e,t){return n.type&40?In(n,t):null}var LL=VL,gT;function zv(n,e,t,r){let i=NL(n,r,e),s=e[nt],o=r.parent||e[Xn],a=FL(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)pT(s,i,t[c],a,!1);else pT(s,i,t,a,!1);gT!==void 0&&gT(s,r,e,t,i)}function dh(n,e){if(e!==null){let t=e.type;if(t&3)return In(e,n);if(t&4)return Ky(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return dh(n,r);{let i=n[e.index];return _r(i)?Ky(-1,i):Zn(i)}}else{if(t&32)return Uv(e,n)()||Zn(n[e.index]);{let r=MA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=As(n[Fn]);return dh(i,r)}else return dh(n,e.next)}}}return null}function MA(n,e){if(e!==null){let r=n[Fn][Xn],i=e.projection;return r.projection[i]}return null}function Ky(n,e){let t=_n+n+1;if(t<e.length){let r=e[t],i=r[ve].firstChild;if(i!==null)return dh(r,i)}return e[Hr]}function Hv(n,e,t){let r=qv(n,e);r&&kL(n,r,e,t)}function xA(n){n.textContent=""}function Gv(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Rs(Zn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Gv(n,e,t.child,r,i,s,!1),Ho(e,n,i,a,s);else if(c&32){let l=Uv(t,r),d;for(;d=l();)Ho(e,n,i,d,s);Ho(e,n,i,a,s)}else c&16?jL(n,e,r,t,i,s):Ho(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Yh(n,e,t,r,i,s){Gv(t,r,n.firstChild,e,i,s,!1)}function jL(n,e,t,r,i,s){let o=t[Fn],c=o[Xn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Ho(e,n,i,d,s)}else{let l=c,d=o[Bt];Sh(r)&&(l.flags|=128),Gv(n,e,l,d,i,s,!0)}}function UL(n,e,t,r,i){let s=t[Hr],o=Zn(t);s!==o&&Ho(e,n,r,s,i);for(let a=_n;a<t.length;a++){let c=t[a];Yh(c[ve],c,n,e,r,s)}}function BL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Wr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Wr.Important),n.setStyle(t,r,i,s))}}function $L(n,e,t){n.setAttribute(e,"style",t)}function RA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function NA(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Ay(n,e,r),i!==null&&RA(n,e,i),s!==null&&$L(n,e,s)}var ki={};function de(n=1){PA(Dn(),je(),ra()+n,!1)}function PA(n,e,t,r){if(!r)if((e[ue]&3)===3){let s=n.preOrderCheckHooks;s!==null&&uh(e,s,t)}else{let s=n.preOrderHooks;s!==null&&lh(e,s,0,t)}Ms(t)}function ae(n,e=ye.Default){let t=je();if(t===null)return $(n,e);let r=hn();return HS(r,t,Zt(n),e)}function kA(n,e,t,r,i,s){let o=Ae(null);try{let a=null;i&Ti.SignalBased&&(a=e[r][Ii]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Ti.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):fS(e,a,r,s)}finally{Ae(o)}}function qL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ms(~i);else{let s=i,o=t[++r],a=t[++r];oV(o,s);let c=e[s];a(2,c)}}}finally{Ms(-1)}}function Zh(n,e,t,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[wn]=i,f[ue]=r|4|128|8|64,(l!==null||n&&n[ue]&2048)&&(f[ue]|=2048),wS(f),f[Bt]=f[na]=n,f[Yn]=t,f[yr]=o||n&&n[yr],f[nt]=a||n&&n[nt],f[Yo]=c||n&&n[Yo]||null,f[Xn]=s,f[qh]=kV(),f[mr]=d,f[lS]=l,f[Fn]=e.type==2?n[Fn]:f,f}function Jh(n,e,t,r,i){let s=n.data[e];if(s===null)s=zL(n,e,t,r,i),sV()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=eV();s.injectorIndex=o===null?-1:o.injectorIndex}return lu(s,!0),s}function zL(n,e,t,r,i){let s=SS(),o=AS(),a=o?s:s&&s.parent,c=n.data[e]=YL(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function OA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function FA(n,e,t,r,i){let s=ra(),o=r&2;try{Ms(-1),o&&e.length>Ot&&PA(n,e,Ot,!1),hr(o?2:0,i),t(r,i)}finally{Ms(s),hr(o?3:1,i)}}function VA(n,e,t){if(hS(e)){let r=Ae(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Ae(r)}}}function LA(n,e,t){bS()&&(n2(n,e,t,In(t,e)),(t.flags&64)===64&&HA(n,e,t))}function jA(n,e,t=In){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function UA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Wv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Wv(n,e,t,r,i,s,o,a,c,l,d){let f=Ot+r,g=f+i,m=HL(f,g),_=typeof l=="function"?l():l;return m[ve]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function HL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ki);return t}function GL(n,e,t,r){let s=r.get(hA,dA)||t===gr.ShadowDom,o=n.selectRootElement(e,s);return WL(o),o}function WL(n){BA(n)}var BA=()=>null;function KL(n){JS(n)?xA(n):YV(n)}function QL(){BA=KL}function YL(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return uu()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function mT(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Ti.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?yT(r,t,l,a,c):yT(r,t,l,a)}return r}function yT(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function ZL(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=t?t.get(f):null,m=g?g.inputs:null,_=g?g.outputs:null;c=mT(0,f.inputs,d,c,m),l=mT(1,f.outputs,d,l,_);let D=c!==null&&o!==null&&!yv(e)?f2(c,d,o):null;a.push(D)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function JL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function $A(n,e,t,r,i,s,o,a){let c=In(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Kv(n,t,d,r,i),cu(e)&&XL(t,e.index)):e.type&3?(r=JL(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function XL(n,e){let t=Ni(e,n);t[ue]&16||(t[ue]|=64)}function qA(n,e,t,r){if(bS()){let i=r===null?null:{"":-1},s=i2(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&zA(n,e,t,o,i,a),i&&s2(t,r,i)}t.mergedAttrs=Yc(t.mergedAttrs,t.attrs)}function zA(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Vy(Th(t,e),n,r[l].type);a2(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=OA(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Yc(t.mergedAttrs,d.hostAttrs),c2(n,t,e,c,d),o2(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}ZL(n,t,s)}function e2(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;t2(o)!=a&&o.push(a),o.push(t,r,s)}}function t2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function n2(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;cu(t)&&u2(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Th(t,e),Rs(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=Xo(e,n,a,t);if(Rs(l,e),o!==null&&h2(e,a-i,l,c,t,o),Si(c)){let d=Ni(t.index,e);d[Yn]=Xo(e,n,a,t)}}}function HA(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=aV();try{Ms(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];ky(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&r2(c,l)}}finally{Ms(-1),ky(o)}}function r2(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function i2(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(_F(e,o.selectors,!1))if(r||(r=[]),Si(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Qy(n,e,c)}else r.unshift(o),Qy(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Qy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function s2(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new j(-301,!1);r.push(e[i],s)}}}function o2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Si(e)&&(t[""]=n)}}function a2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function c2(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Cs(i.type,!0)),o=new xs(s,Si(i),ae);n.blueprint[r]=o,t[r]=o,e2(n,e,r,OA(n,t,i.hostVars,ki),i)}function u2(n,e,t){let r=In(e,n),i=UA(t),s=n[yr].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Xh(n,Zh(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function l2(n,e,t,r,i,s){let o=In(n,e);d2(e[nt],o,s,n.value,t,r,i)}function d2(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?ou(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function h2(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];kA(r,t,c,l,d,f)}}function f2(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function GA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function WA(n,e){let t=n.contentQueries;if(t!==null){let r=Ae(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];xS(s),a.contentQueries(2,e[o],o)}}}finally{Ae(r)}}}function Xh(n,e){return n[Jc]?n[eT][Qn]=e:n[Jc]=e,n[eT]=e,e}function Yy(n,e,t){xS(0);let r=Ae(null);try{e(n,t)}finally{Ae(r)}}function p2(n){return n[yh]??=[]}function g2(n){return n.cleanup??=[]}function KA(n,e){let t=n[Yo],r=t?t.get(Gr,null):null;r&&r.handleError(e)}function Kv(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],d=n.data[o];kA(d,l,r,a,c,i)}}function m2(n,e,t){let r=yS(e,n);CL(n[nt],r,t)}function y2(n,e){let t=Ni(e,n),r=t[ve];v2(r,t);let i=t[wn];i!==null&&t[mr]===null&&(t[mr]=Fv(i,t[Yo])),Qv(r,t,t[Yn])}function v2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Qv(n,e,t){Cv(e);try{let r=n.viewQuery;r!==null&&Yy(1,r,t);let i=n.template;i!==null&&FA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Jo]?.finishViewCreation(n),n.staticContentQueries&&WA(n,e),n.staticViewQueries&&Yy(2,n.viewQuery,t);let s=n.components;s!==null&&_2(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ue]&=-5,Tv()}}function _2(n,e){for(let t=0;t<e.length;t++)y2(n,e[t])}function w2(n,e,t,r){let i=Ae(null);try{let s=e.tView,a=n[ue]&4096?4096:16,c=Zh(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Zo]=l;let d=n[Jo];return d!==null&&(c[Jo]=d.createEmbeddedView(s)),Qv(s,c,t),c}finally{Ae(i)}}function vT(n,e){return!e||e.firstChild===null||Sh(n)}function E2(n,e,t,r=!0){let i=e[ve];if(ML(i,e,n,t),r){let o=Ky(t,n),a=e[nt],c=qv(a,n[Hr]);c!==null&&SL(i,n[Xn],a,e,c,o)}let s=e[mr];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Rh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Zn(s)),_r(s)&&I2(s,r);let o=t.type;if(o&8)Rh(n,e,t.child,r);else if(o&32){let a=Uv(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=MA(e,t);if(Array.isArray(a))r.push(...a);else{let c=As(e[Fn]);Rh(c[ve],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function I2(n,e){for(let t=_n;t<n.length;t++){let r=n[t],i=r[ve].firstChild;i!==null&&Rh(r[ve],r,i,e)}n[Hr]!==n[wn]&&e.push(n[Hr])}var QA=[];function D2(n){return n[kn]??b2(n)}function b2(n){let e=QA.pop()??Object.create(T2);return e.lView=n,e}function C2(n){n.lView[kn]!==n&&(n.lView=null,QA.push(n))}var T2=De(G({},Bc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{zh(n.lView)},consumerOnSignalRead(){this.lView[kn]=this}});function S2(n){let e=n[kn]??Object.create(A2);return e.lView=n,e}var A2=De(G({},Bc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=As(n.lView);for(;e&&!YA(e[ve]);)e=As(e);e&&ES(e)},consumerOnSignalRead(){this.lView[kn]=this}});function YA(n){return n.type!==2}var M2=100;function ZA(n,e=!0,t=0){let r=n[yr],i=r.rendererFactory,s=!1;s||i.begin?.();try{x2(n,t)}catch(o){throw e&&KA(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function x2(n,e){let t=MS();try{nT(!0),Zy(n,e);let r=0;for(;eu(n);){if(r===M2)throw new j(103,!1);r++,Zy(n,1)}}finally{nT(t)}}function R2(n,e,t,r){let i=e[ue];if((i&256)===256)return;let s=!1,o=!1;!s&&e[yr].inlineEffectRunner?.flush(),Cv(e);let a=!0,c=null,l=null;s||(YA(n)?(l=D2(e),c=Id(l)):uC()===null?(a=!1,l=S2(e),c=Id(l)):e[kn]&&(Bm(e[kn]),e[kn]=null));try{wS(e),rV(n.bindingStartIndex),t!==null&&FA(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let m=n.preOrderCheckHooks;m!==null&&uh(e,m,null)}else{let m=n.preOrderHooks;m!==null&&lh(e,m,0,null),dy(e,0)}if(o||N2(e),JA(e,0),n.contentQueries!==null&&WA(n,e),!s)if(d){let m=n.contentCheckHooks;m!==null&&uh(e,m)}else{let m=n.contentHooks;m!==null&&lh(e,m,1),dy(e,1)}qL(n,e);let f=n.components;f!==null&&eM(e,f,0);let g=n.viewQuery;if(g!==null&&Yy(2,g,r),!s)if(d){let m=n.viewCheckHooks;m!==null&&uh(e,m)}else{let m=n.viewHooks;m!==null&&lh(e,m,2),dy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ly]){for(let m of e[ly])m();e[ly]=null}s||(e[ue]&=-73)}catch(d){throw s||zh(e),d}finally{l!==null&&(jm(l,c),a&&C2(l)),Tv()}}function JA(n,e){for(let t=eA(n);t!==null;t=tA(t))for(let r=_n;r<t.length;r++){let i=t[r];XA(i,e)}}function N2(n){for(let e=eA(n);e!==null;e=tA(e)){if(!(e[ue]&wh.HasTransplantedViews))continue;let t=e[_h];for(let r=0;r<t.length;r++){let i=t[r];ES(i)}}}function P2(n,e,t){let r=Ni(e,n);XA(r,t)}function XA(n,e){Iv(n)&&Zy(n,e)}function Zy(n,e){let r=n[ve],i=n[ue],s=n[kn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Um(s)),o||=!1,s&&(s.dirty=!1),n[ue]&=-9217,o)R2(r,n,r.template,n[Yn]);else if(i&8192){JA(n,1);let a=r.components;a!==null&&eM(n,a,1)}}function eM(n,e,t){for(let r=0;r<e.length;r++)P2(n,e[r],t)}function Yv(n,e){let t=MS()?64:1088;for(n[yr].changeDetectionScheduler?.notify(e);n;){n[ue]|=t;let r=As(n);if(Eh(n)&&!r)return n;n=r}return null}var Ns=class{get rootNodes(){let e=this._lView,t=e[ve];return Rh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yn]}set context(e){this._lView[Yn]=e}get destroyed(){return(this._lView[ue]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Bt];if(_r(e)){let t=e[vh],r=t?t.indexOf(this):-1;r>-1&&(Wy(e,r),gh(t,r))}this._attachedToViewContainer=!1}SA(this._lView[ve],this._lView)}onDestroy(e){IS(this._lView,e)}markForCheck(){Yv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ue]&=-129}reattach(){Py(this._lView),this._lView[ue]|=128}detectChanges(){this._lView[ue]|=1024,ZA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Eh(this._lView),t=this._lView[Zo];t!==null&&!e&&$v(t,this._lView),CA(this._lView[ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=Eh(this._lView),r=this._lView[Zo];r!==null&&!t&&TA(r,this._lView),Py(this._lView)}},ef=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=F2;let n=e;return n})(),k2=ef,O2=class extends k2{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=w2(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ns(i)}};function F2(){return V2(hn(),je())}function V2(n,e){return n.type&4?new O2(e,n,Hh(n,e)):null}var L2=new RegExp(`^(\\d+)*(${sA}|${iA})*(.*)`);function j2(n){let e=n.match(L2),[t,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,l,d]of s.matchAll(/(f|n)(\d*)/g)){let f=parseInt(d,10)||1;a.push(l,f)}return[o,...a]}function U2(n){return!n.prev&&n.parent?.type===8}function yy(n){return n.index-Ot}function B2(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function tf(n,e,t,r){let i=yy(r),s=B2(n,i);if(s===void 0){let o=n.data[qV];if(o?.[i])s=q2(o[i],t);else if(e.firstChild===r)s=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(U2(r)){let l=yy(r.parent);s=qy(n,l)}else{let l=In(c,t);if(a)s=l.firstChild;else{let d=yy(c),f=qy(n,d);if(c.type===2&&f){let m=Vv(n,d)+1;s=nf(m,f)}else s=l.nextSibling}}}}return s}function nf(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function $2(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case $y.FirstChild:t=t.firstChild;break;case $y.NextSibling:t=t.nextSibling;break}}return t}function q2(n,e){let[t,...r]=j2(n),i;if(t===iA)i=e[Fn][wn];else if(t===sA)i=DL(e[Fn][wn]);else{let s=Number(t);i=Zn(e[s+Ot])}return $2(i,r)}var z2=!1;function H2(n){z2=n}function G2(n){let e=n[mr];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[nt];for(let s of r.values())W2(i,t,s)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function W2(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Ot);i&&Hv(n,i,!1)}}function tM(n){let e=n[Xc]??[],r=n[Bt][nt];for(let i of e)K2(i,r);n[Xc]=vn}function K2(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Ah];for(;t<i;){let s=r.nextSibling;Hv(e,r,!1),r=s,t++}}}function nM(n){tM(n);for(let e=_n;e<n.length;e++)Nh(n[e])}function Nh(n){G2(n);let e=n[ve];for(let t=Ot;t<e.bindingStartIndex;t++)if(_r(n[t])){let r=n[t];nM(r)}else pr(n[t])&&Nh(n[t])}function Q2(n){let e=n._views;for(let t of e){let r=KV(t);if(r!==null&&r[wn]!==null)if(pr(r))Nh(r);else{let i=r[wn];Nh(i),nM(r)}}}function Y2(n,e){let t=[];for(let r of e)for(let i=0;i<(r[oA]??1);i++){let s={data:r,firstChild:null};r[Ah]>0&&(s.firstChild=n,n=nf(r[Ah],n)),t.push(s)}return[n,t]}var rM=()=>null;function Z2(n,e){let t=n[Xc];return!e||t===null||t.length===0?null:t[0].data[$V]===e?t.shift():(tM(n),null)}function J2(){rM=Z2}function _T(n,e){return rM(n,e)}var tu=class{},Zv=new Q("",{providedIn:"root",factory:()=>!1});var iM=new Q(""),Jy=class{},Ph=class{};function X2(n){let e=Error(`No component factory found for ${Jt(n)}.`);return e[ej]=n,e}var ej="ngComponent";var Xy=class{resolveComponentFactory(e){throw X2(e)}},a_=class a_{};a_.NULL=new Xy;var ea=a_,Ai=class{},Oi=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>tj();let n=e;return n})();function tj(){let n=je(),e=hn(),t=Ni(e.index,n);return(pr(t)?t:n)[nt]}var nj=(()=>{let e=class e{};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>null});let n=e;return n})();var wT=new Set;function Zr(n){wT.has(n)||(wT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function sM(n){let e=!0;return setTimeout(()=>{e&&(e=!1,n())}),typeof xt.requestAnimationFrame=="function"&&xt.requestAnimationFrame(()=>{e&&(e=!1,n())}),()=>{e=!1}}function ET(n){let e=!0;return queueMicrotask(()=>{e&&n()}),()=>{e=!1}}function IT(...n){}var _e=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yt(!1),this.onMicrotaskEmpty=new yt(!1),this.onStable=new yt(!1),this.onError=new yt(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,sj(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,rj,IT,IT);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},rj={};function Jv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ij(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{sM(()=>{n.callbackScheduled=!1,ev(n),n.isCheckStableRunning=!0,Jv(n),n.isCheckStableRunning=!1})}),ev(n))}function sj(n){let e=()=>{ij(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(oj(a))return t.invokeTask(i,s,o,a);try{return DT(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),bT(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return DT(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!aj(a)&&e(),bT(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,ev(n),Jv(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function ev(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function DT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bT(n){n._nesting--,Jv(n)}var tv=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yt,this.onMicrotaskEmpty=new yt,this.onStable=new yt,this.onError=new yt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function oj(n){return oM(n,"__ignore_ng_zone__")}function aj(n){return oM(n,"__scheduler_tick__")}function oM(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var aM=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();function nv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=zC(i,a);else if(s==2){let c=a,l=e[++o];r=zC(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var kh=class extends ea{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ss(e);return new nu(t,this.ngModule)}};function CT(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Ti.None;e?t.push({propName:o,templateName:r,isSignal:(a&Ti.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function cj(n){let e=n.toLowerCase();return e==="svg"?qF:e==="math"?zF:null}var nu=class extends Ph{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=CT(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return CT(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=DF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Ae(null);try{i=i||this.ngModule;let o=i instanceof On?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Oy(e,o):e,c=a.get(Ai,null);if(c===null)throw new j(407,!1);let l=a.get(nj,null),d=a.get(aM,null),f=a.get(tu,null),g={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},m=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",D=r?GL(m,r,this.componentDef.encapsulation,a):Bv(m,_,cj(_)),T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let O=null;D!==null&&(O=Fv(D,a,!0));let U=Wv(0,null,null,1,0,null,null,null,null,null,null),P=Zh(null,U,null,T,null,null,g,m,a,null,O);Cv(P);let z,ne;try{let Z=this.componentDef,I,v=null;Z.findHostDirectiveDefs?(I=[],v=new Map,Z.findHostDirectiveDefs(Z,I,v),I.push(Z)):I=[Z];let w=uj(P,D),b=lj(w,D,Z,I,P,g,m);ne=vS(U,Ot),D&&fj(m,Z,D,r),t!==void 0&&pj(ne,this.ngContentSelectors,t),z=hj(b,Z,I,v,P,[gj]),Qv(U,P,null)}finally{Tv()}return new rv(this.componentType,z,Hh(ne,P),P,ne)}finally{Ae(s)}}},rv=class extends Jy{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ns(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Kv(s[ve],s,i,e,t),this.previousInputValues.set(e,t);let o=Ni(this._tNode.index,s);Yv(o,1)}}get injector(){return new bs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function uj(n,e){let t=n[ve],r=Ot;return n[r]=e,Jh(t,r,2,"#host",null)}function lj(n,e,t,r,i,s,o){let a=i[ve];dj(r,n,e,o);let c=null;e!==null&&(c=Fv(e,i[Yo]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Zh(i,UA(t),null,d,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Qy(a,n,r.length-1),Xh(i,f),i[n.index]=f}function dj(n,e,t,r){for(let i of n)e.mergedAttrs=Yc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(nv(e,e.mergedAttrs,!0),t!==null&&NA(r,t,e))}function hj(n,e,t,r,i,s){let o=hn(),a=i[ve],c=In(o,i);zA(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let f=o.directiveStart+d,g=Xo(i,a,f,o);Rs(g,i)}HA(a,i,o),c&&Rs(c,i);let l=Xo(i,a,o.directiveStart+o.componentOffset,o);if(n[Yn]=i[Yn]=l,s!==null)for(let d of s)d(l,e);return VA(a,o,i),l}function fj(n,e,t,r){if(r)Ay(n,t,["ng-version","18.1.0"]);else{let{attrs:i,classes:s}=bF(e.selectors[0]);i&&Ay(n,t,i),s&&s.length>0&&RA(n,t,s.join(" "))}}function pj(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function gj(){let n=hn();Mv(je()[ve],n)}var oa=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=mj;let n=e;return n})();function mj(){let n=hn();return vj(n,je())}var yj=oa,cM=class extends yj{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Hh(this._hostTNode,this._hostLView)}get injector(){return new bs(this._hostTNode,this._hostLView)}get parentInjector(){let e=xv(this._hostTNode,this._hostLView);if(jS(e)){let t=bh(e,this._hostLView),r=Dh(e),i=t[ve].data[r+8];return new bs(i,t)}else return new bs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=TT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-_n}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=_T(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,vT(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!jF(e),a;if(o)a=t;else{let _=t||{};a=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}let c=o?e:new nu(Ss(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let D=(o?l:this.parentInjector).get(On,null);D&&(s=D)}let d=Ss(c.componentType??{}),f=_T(this._lContainer,d?.id??null),g=f?.firstChild??null,m=c.create(l,i,g,s);return this.insertImpl(m.hostView,a,vT(this._hostTNode,f)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(HF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Bt],l=new cM(c,c[Xn],c[Bt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return E2(o,i,s,r),e.attachToViewContainerRef(),WT(vy(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=TT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Wy(this._lContainer,t);r&&(gh(vy(this._lContainer),t),SA(r[ve],r))}detach(e){let t=this._adjustIndex(e,-1),r=Wy(this._lContainer,t);return r&&gh(vy(this._lContainer),t)!=null?new Ns(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function TT(n){return n[vh]}function vy(n){return n[vh]||(n[vh]=[])}function vj(n,e){let t,r=e[n.index];return _r(r)?t=r:(t=GA(r,e,null,n),e[n.index]=t,Xh(e,t)),uM(t,e,n,r),new cM(t,n,e)}function _j(n,e){let t=n[nt],r=t.createComment(""),i=In(e,n),s=qv(t,i);return xh(t,s,r,OL(t,i),!1),r}var uM=lM,Xv=()=>!1;function wj(n,e,t){return Xv(n,e,t)}function lM(n,e,t,r){if(n[Hr])return;let i;t.type&8?i=Zn(r):i=_j(e,t),n[Hr]=i}function Ej(n,e,t){if(n[Hr]&&n[Xc])return!0;let r=t[mr],i=e.index-Ot;if(!r||NV(e)||Wh(r,i))return!1;let o=qy(r,i),a=r.data[Ov]?.[i],[c,l]=Y2(o,a);return n[Hr]=c,n[Xc]=l,!0}function Ij(n,e,t,r){Xv(n,t,e)||lM(n,e,t,r)}function Dj(){uM=Ij,Xv=Ej}function mu(n,e){Zr("NgSignals");let t=wC(n),r=t[Ii];return e?.equal&&(r.equal=e.equal),t.set=i=>$m(r,i),t.update=i=>EC(r,i),t.asReadonly=bj.bind(t),t}function bj(){let n=this[Ii];if(n.readonlyFn===void 0){let e=()=>this();e[Ii]=n,n.readonlyFn=e}return n.readonlyFn}function Cj(n){return Object.getPrototypeOf(n.prototype).constructor}function wr(n){let e=Cj(n.type),t=!0,r=[n];for(;e;){let i;if(Si(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=sh(n.inputs),o.inputTransforms=sh(n.inputTransforms),o.declaredInputs=sh(n.declaredInputs),o.outputs=sh(n.outputs);let a=i.hostBindings;a&&xj(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Aj(n,c),l&&Mj(n,l),Tj(n,i),HO(n.outputs,i.outputs),Si(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===wr&&(t=!1)}}e=Object.getPrototypeOf(e)}Sj(r)}function Tj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function Sj(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Yc(i.hostAttrs,t=Yc(t,i.hostAttrs))}}function sh(n){return n===Ko?{}:n===vn?[]:n}function Aj(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Mj(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function xj(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function e_(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Mi=class{},ru=class{};var iv=class extends Mi{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kh(this);let i=rS(e);this._bootstrapComponents=IA(i.bootstrap),this._r3Injector=KS(e,t,[{provide:Mi,useValue:this},{provide:ea,useValue:this.componentFactoryResolver},...r],Jt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},sv=class extends ru{constructor(e){super(),this.moduleType=e}create(e){return new iv(this.moduleType,e,[])}};var Oh=class extends Mi{constructor(e){super(),this.componentFactoryResolver=new kh(this),this.instance=null;let t=new Zc([...e.providers,{provide:Mi,useValue:this},{provide:ea,useValue:this.componentFactoryResolver}],e.parent||wv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function t_(n,e,t=null){return new Oh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function dM(n){return Nj(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Rj(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Nj(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function hM(n,e,t){return n[e]=t}function Ps(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Pj(n,e,t,r){let i=Ps(n,e,t);return Ps(n,e+1,r)||i}function yu(n){return(n.flags&32)===32}function kj(n,e,t,r,i,s,o,a,c){let l=e.consts,d=Jh(e,n,4,o||null,a||null);qA(e,t,d,Ih(l,c)),Mv(e,d);let f=d.tView=Wv(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function Oj(n,e,t,r,i,s,o,a,c,l){let d=t+Ot,f=e.firstCreatePass?kj(d,e,n,r,i,s,o,a,c):e.data[d];lu(f,!1);let g=fM(e,n,f,t);Av()&&zv(e,n,g,f),Rs(g,n);let m=GA(g,n,g,f);return n[d]=m,Xh(n,m),wj(m,f,n),Ev(f)&&LA(e,n,f),c!=null&&jA(n,f,l),f}function vt(n,e,t,r,i,s,o,a){let c=je(),l=Dn(),d=Ih(l.consts,s);return Oj(c,l,n,e,t,r,i,d,o,a),vt}var fM=pM;function pM(n,e,t,r){return Pi(!0),e[nt].createComment("")}function Fj(n,e,t,r){let i=e[mr],s=!i||uu()||yu(t)||Wh(i,r);if(Pi(s),s)return pM(n,e,t,r);let o=i.data[BV]?.[r]??null;o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o);let a=tf(i,n,e,t);Gh(i,r,a);let c=Vv(i,r);return nf(c,a)}function Vj(){fM=Fj}function vu(n,e,t,r){let i=je(),s=bv();if(Ps(i,s,e)){let o=Dn(),a=Sv();l2(a,i,n,e,t,r)}return vu}function gM(n,e,t,r){return Ps(n,bv(),t)?e+ou(t)+r:ki}function oh(n,e){return n<<17|e<<2}function ks(n){return n>>17&32767}function Lj(n){return(n&2)==2}function jj(n,e){return n&131071|e<<17}function ov(n){return n|2}function ta(n){return(n&131068)>>2}function _y(n,e){return n&-131069|e<<2}function Uj(n){return(n&1)===1}function av(n){return n|1}function Bj(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ks(o),c=ta(o);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||au(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=ks(n[a+1]);n[r+1]=oh(g,a),g!==0&&(n[g+1]=_y(n[g+1],r)),n[a+1]=jj(n[a+1],r)}else n[r+1]=oh(a,0),a!==0&&(n[a+1]=_y(n[a+1],r)),a=r;else n[r+1]=oh(c,0),a===0?a=r:n[c+1]=_y(n[c+1],r),c=r;l&&(n[r+1]=ov(n[r+1])),ST(n,d,r,!0),ST(n,d,r,!1),$j(e,d,n,r,s),o=oh(a,c),s?e.classBindings=o:e.styleBindings=o}function $j(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&au(s,e)>=0&&(t[r+1]=av(t[r+1]))}function ST(n,e,t,r){let i=n[t+1],s=e===null,o=r?ks(i):ta(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];qj(c,e)&&(a=!0,n[o+1]=r?av(l):ov(l)),o=r?ks(l):ta(l)}a&&(n[t+1]=r?ov(i):av(i))}function qj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?au(n,e)>=0:!1}function Me(n,e,t){let r=je(),i=bv();if(Ps(r,i,e)){let s=Dn(),o=Sv();$A(s,o,r,n,e,r[nt],t,!1)}return Me}function AT(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Kv(n,t,s[o],o,r)}function rf(n,e){return zj(n,e,null,!0),rf}function zj(n,e,t,r){let i=je(),s=Dn(),o=iV(2);if(s.firstUpdatePass&&Gj(s,n,o,r),e!==ki&&Ps(i,o,e)){let a=s.data[ra()];Zj(s,a,i,i[nt],n,i[o+1]=Jj(e,t),r,o)}}function Hj(n,e){return e>=n.expandoStartIndex}function Gj(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[ra()],o=Hj(n,t);Xj(s,r)&&e===null&&!o&&(e=!1),e=Wj(i,s,e,r),Bj(i,s,e,t,o,r)}}function Wj(n,e,t,r){let i=cV(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=wy(null,n,e,t,r),t=iu(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=wy(i,n,e,t,r),s===null){let c=Kj(n,e,r);c!==void 0&&Array.isArray(c)&&(c=wy(null,n,e,c[1],r),c=iu(c,e.attrs,r),Qj(n,e,r,c))}else s=Yj(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function Kj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ta(r)!==0)return n[ks(r)]}function Qj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ks(i)]=r}function Yj(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=iu(r,o,t)}return iu(r,e.attrs,t)}function wy(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=iu(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function iu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),dF(n,o,t?!0:e[++s]))}return n===void 0?null:n}function Zj(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=Uj(l)?MT(c,e,t,i,ta(l),o):void 0;if(!Fh(d)){Fh(s)||Lj(l)&&(s=MT(c,null,t,i,a,o));let f=yS(ra(),t);BL(r,o,f,i,s)}}function MT(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===ki&&(g=f?vn:void 0);let m=f?cy(g,r):d===r?g:void 0;if(l&&!Fh(m)&&(m=cy(c,r)),Fh(m)&&(a=m,o))return a;let _=n[i+1];i=o?ks(_):ta(_)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=cy(c,r))}return a}function Fh(n){return n!==void 0}function Jj(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Jt(sa(n)))),n}function Xj(n,e){return(n.flags&(e?8:16))!==0}function eU(n,e,t,r,i,s){let o=e.consts,a=Ih(o,i),c=Jh(e,n,2,r,a);return qA(e,t,c,Ih(o,s)),c.attrs!==null&&nv(c,c.attrs,!1),c.mergedAttrs!==null&&nv(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function V(n,e,t,r){let i=je(),s=Dn(),o=Ot+n,a=i[nt],c=s.firstCreatePass?eU(o,s,i,e,t,r):s.data[o],l=mM(s,i,c,a,e,n);i[o]=l;let d=Ev(c);return lu(c,!0),NA(a,l,c),!yu(c)&&Av()&&zv(s,i,l,c),KF()===0&&Rs(l,i),QF(),d&&(LA(s,i,c),VA(s,c,i)),r!==null&&jA(i,c),V}function k(){let n=hn();AS()?tV():(n=n.parent,lu(n,!1));let e=n;ZF(e)&&XF(),YF();let t=Dn();return t.firstCreatePass&&(Mv(t,n),hS(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&pV(e)&&AT(t,e,je(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&gV(e)&&AT(t,e,je(),e.stylesWithoutHost,!1),k}function Ne(n,e,t,r){return V(n,e,t,r),k(),Ne}var mM=(n,e,t,r,i,s)=>(Pi(!0),Bv(r,i,FS()));function tU(n,e,t,r,i,s){let o=e[mr],a=!o||uu()||yu(t)||Wh(o,s);if(Pi(a),a)return Bv(r,i,FS());let c=tf(o,n,e,t);return lA(o,s)&&Gh(o,s,c.nextSibling),o&&(ZS(t)||JS(c))&&cu(t)&&(JF(t),xA(c)),c}function nU(){mM=tU}var rU=(n,e,t,r)=>(Pi(!0),bA(e[nt],""));function iU(n,e,t,r){let i,s=e[mr],o=!s||uu()||yu(t);if(Pi(o),o)return bA(e[nt],"");let a=tf(s,n,e,t),c=ZV(s,r);return Gh(s,r,a),i=nf(c,a),i}function sU(){rU=iU}function yM(){return je()}var Is=void 0;function oU(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var aU=["en",[["a","p"],["AM","PM"],Is],[["AM","PM"],Is,Is],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Is,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Is,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Is,"{1} 'at' {0}",Is],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",oU],Ey={};function Vn(n){let e=cU(n),t=xT(e);if(t)return t;let r=e.split("-")[0];if(t=xT(r),t)return t;if(r==="en")return aU;throw new j(701,!1)}function xT(n){return n in Ey||(Ey[n]=xt.ng&&xt.ng.common&&xt.ng.common.locales&&xt.ng.common.locales[n]),Ey[n]}var ht=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(ht||{});function cU(n){return n.toLowerCase().replace(/_/g,"-")}var Vh="en-US";var uU=Vh;function lU(n){typeof n=="string"&&(uU=n.toLowerCase().replace(/_/g,"-"))}var dU=(n,e,t)=>{};function Fi(n,e,t,r){let i=je(),s=Dn(),o=hn();return fU(s,i,i[nt],o,n,e,r),Fi}function hU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[yh],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function fU(n,e,t,r,i,s,o){let a=Ev(r),l=n.firstCreatePass&&g2(n),d=e[Yn],f=p2(e),g=!0;if(r.type&3||o){let D=In(r,e),T=o?o(D):D,O=f.length,U=o?z=>o(Zn(z[r.index])):r.index,P=null;if(!o&&a&&(P=hU(n,e,i,r.index)),P!==null){let z=P.__ngLastListenerFn__||P;z.__ngNextListenerFn__=s,P.__ngLastListenerFn__=s,g=!1}else{s=NT(r,e,d,s),dU(D,i,s);let z=t.listen(T,i,s);f.push(s,z),l&&l.push(i,U,O,O+1)}}else s=NT(r,e,d,s);let m=r.outputs,_;if(g&&m!==null&&(_=m[i])){let D=_.length;if(D)for(let T=0;T<D;T+=2){let O=_[T],U=_[T+1],ne=e[O][U].subscribe(s),Z=f.length;f.push(s,ne),l&&l.push(i,r.index,Z,-(Z+1))}}}function RT(n,e,t,r){let i=Ae(null);try{return hr(6,e,t),t(r)!==!1}catch(s){return KA(n,s),!1}finally{hr(7,e,t),Ae(i)}}function NT(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Ni(n.index,e):e;Yv(o,5);let a=RT(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=RT(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function aa(n=1){return lV(n)}function _u(n,e,t){return vM(n,"",e,"",t),_u}function vM(n,e,t,r,i){let s=je(),o=gM(s,e,t,r);if(o!==ki){let a=Dn(),c=Sv();$A(a,c,s,n,o,s[nt],i,!1)}return vM}function pU(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Vs(n){let e=nV();return _S(e,Ot+n)}function B(n,e=""){let t=je(),r=Dn(),i=n+Ot,s=r.firstCreatePass?Jh(r,i,1,e,null):r.data[i],o=_M(r,t,s,e,n);t[i]=o,Av()&&zv(r,t,o,s),lu(s,!1)}var _M=(n,e,t,r,i)=>(Pi(!0),DA(e[nt],r));function gU(n,e,t,r,i){let s=e[mr],o=!s||uu()||yu(t)||Wh(s,i);return Pi(o),o?DA(e[nt],r):tf(s,n,e,t)}function mU(){_M=gU}function Ln(n){return Vi("",n,""),Ln}function Vi(n,e,t){let r=je(),i=gM(r,n,e,t);return i!==ki&&m2(r,ra(),i),Vi}function yU(n,e,t){let r=Dn();if(r.firstCreatePass){let i=Si(n);cv(t,r.data,r.blueprint,i,!0),cv(e,r.data,r.blueprint,i,!1)}}function cv(n,e,t,r,i){if(n=Zt(n),Array.isArray(n))for(let s=0;s<n.length;s++)cv(n[s],e,t,r,i);else{let s=Dn(),o=je(),a=hn(),c=Qo(n)?n:Zt(n.provide),l=uS(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Qo(n)||!n.multi){let m=new xs(l,i,ae),_=Dy(c,e,i?d:d+g,f);_===-1?(Vy(Th(a,o),s,c),Iy(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[_]=m,o[_]=m)}else{let m=Dy(c,e,d+g,f),_=Dy(c,e,d,d+g),D=m>=0&&t[m],T=_>=0&&t[_];if(i&&!T||!i&&!D){Vy(Th(a,o),s,c);let O=wU(i?_U:vU,t.length,i,r,l);!i&&T&&(t[_].providerFactory=O),Iy(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),o.push(O)}else{let O=wM(t[i?_:m],l,!i&&r);Iy(s,n,m>-1?m:_,O)}!i&&r&&T&&t[_].componentProviders++}}}function Iy(n,e,t,r){let i=Qo(e),s=RF(e);if(i||s){let c=(s?Zt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function wM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Dy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function vU(n,e,t,r){return uv(this.multi,[])}function _U(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Xo(t,t[ve],this.providerFactory.index,r);s=a.slice(0,o),uv(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],uv(i,s);return s}function uv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function wU(n,e,t,r,i){let s=new xs(n,t,ae);return s.multi=[],s.index=e,s.componentProviders=0,wM(s,i,r&&!t),s}function ca(n,e=[]){return t=>{t.providersResolver=(r,i)=>yU(r,i?i(n):n,e)}}var EU=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=oS(!1,r.type),s=i.length>0?t_([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=X({token:e,providedIn:"environment",factory:()=>new e($(On))});let n=e;return n})();function Fe(n){Zr("NgStandalone"),n.getStandaloneInjector=e=>e.get(EU).getOrCreateStandaloneInjector(n)}function wu(n,e,t,r){return DM(je(),Dv(),n,e,t,r)}function EM(n,e,t,r,i){return IU(je(),Dv(),n,e,t,r,i)}function IM(n,e){let t=n[e];return t===ki?void 0:t}function DM(n,e,t,r,i,s){let o=e+t;return Ps(n,o,i)?hM(n,o+1,s?r.call(s,i):r(i)):IM(n,o+1)}function IU(n,e,t,r,i,s,o){let a=e+t;return Pj(n,a,i,s)?hM(n,a+2,o?r.call(o,i,s):r(i,s)):IM(n,a+2)}function sf(n,e){let t=Dn(),r,i=n+Ot;t.firstCreatePass?(r=DU(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Cs(r.type,!0)),o,a=ln(ae);try{let c=Ch(!1),l=s();return Ch(c),pU(t,je(),i,l),l}finally{ln(a)}}function DU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function of(n,e,t){let r=n+Ot,i=je(),s=_S(i,r);return bU(i,r)?DM(i,Dv(),e,s.transform,t,s):s.transform(t)}function bU(n,e){return n[ve].data[e].pure}var Kr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},af=new Kr("18.1.0");var cf=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var n_=new Q(""),Eu=new Q(""),uf=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,r_||(CU(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)($(_e),$(lf),$(Eu))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),lf=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return r_?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function CU(n){r_=n}var r_;function Ls(n){return!!n&&typeof n.then=="function"}function bM(n){return!!n&&typeof n.subscribe=="function"}var CM=new Q(""),TM=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=q(CM,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ls(o))r.push(o);else if(bM(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ua=new Q("");function TU(){_C(()=>{throw new j(600,!1)})}function SU(n){return n.isBoundToModule}var AU=10;function MU(n,e,t){try{let r=t();return Ls(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Er=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=q(QS),this.afterRenderEffectManager=q(aM),this.zonelessEnabled=q(Zv),this.externalTestViews=new Set,this.beforeRender=new Je,this.afterTick=new Je,this.componentTypes=[],this.components=[],this.isStable=q(Fs).hasPendingTasks.pipe(ee(r=>!r)),this._injector=q(On)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Ph;if(!this._injector.get(TM).done){let m=!s&&nS(r),_=!1;throw new j(405,_)}let a;s?a=r:a=this._injector.get(ea).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=SU(a)?void 0:this._injector.get(Mi),l=i||a.selector,d=a.create(dn.NULL,[],l,c),f=d.location.nativeElement,g=d.injector.get(n_,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),by(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new j(101,!1);let i=Ae(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,Ae(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Ai,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<AU;){let a=s===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:l}of this._views)xU(c,l,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>eu(c))&&(o.execute(),!this.allViews.some(({_lView:c})=>eu(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;by(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ua,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>by(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new j(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function by(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var ah;function df(n){ah??=new WeakMap;let e=ah.get(n);if(e)return e;let t=n.isStable.pipe(yn(r=>r)).toPromise().then(()=>{});return ah.set(n,t),n.onDestroy(()=>ah?.delete(n)),t}function xU(n,e,t,r){if(!t&&!eu(n))return;ZA(n,e,t&&!r?0:1)}var lv=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},i_=(()=>{let e=class e{compileModuleSync(r){return new sv(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=rS(r),o=IA(s.declarations).reduce((a,c)=>{let l=Ss(c);return l&&a.push(new nu(l)),a},[]);return new lv(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var RU=(()=>{let e=class e{constructor(){this.zone=q(_e),this.changeDetectionScheduler=q(tu),this.applicationRef=q(Er)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),NU=new Q("",{factory:()=>!1});function SM({ngZoneFactory:n,ignoreChangesOutsideZone:e}){return n??=()=>new _e(MM()),[{provide:_e,useFactory:n},{provide:Ts,multi:!0,useFactory:()=>{let t=q(RU,{optional:!0});return()=>t.initialize()}},{provide:Ts,multi:!0,useFactory:()=>{let t=q(kU);return()=>{t.initialize()}}},{provide:QS,useFactory:PU},e===!0?{provide:iM,useValue:!0}:[]]}function PU(){let n=q(_e),e=q(Gr);return t=>n.runOutsideAngular(()=>e.handleError(t))}function AM(n){let e=n?.ignoreChangesOutsideZone,t=SM({ngZoneFactory:()=>{let r=MM(n);return r.shouldCoalesceEventChangeDetection&&Zr("NgZone_CoalesceEvent"),new _e(r)},ignoreChangesOutsideZone:e});return Jn([{provide:NU,useValue:!0},{provide:Zv,useValue:!1},t])}function MM(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var kU=(()=>{let e=class e{constructor(){this.subscription=new at,this.initialized=!1,this.zone=q(_e),this.pendingTasks=q(Fs)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var OU=(()=>{let e=class e{constructor(){this.appRef=q(Er),this.taskService=q(Fs),this.ngZone=q(_e),this.zonelessEnabled=q(Zv),this.disableScheduling=q(iM,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new at,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof tv||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?ET:sM;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&_e.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ET(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function FU(){return typeof $localize<"u"&&$localize.locale||Vh}var hf=new Q("",{providedIn:"root",factory:()=>q(hf,ye.Optional|ye.SkipSelf)||FU()});var xM=new Q("");var hh=null;function VU(n=[],e){return dn.create({name:e,providers:[{provide:$h,useValue:"platform"},{provide:xM,useValue:new Set([()=>hh=null])},...n]})}function LU(n=[]){if(hh)return hh;let e=VU(n);return hh=e,TU(),jU(e),e}function jU(n){n.get(Nv,null)?.forEach(t=>t())}function s_(){return!1}var js=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=UU;let n=e;return n})();function UU(n){return BU(hn(),je(),(n&16)===16)}function BU(n,e,t){if(cu(n)&&!t){let r=Ni(n.index,e);return new Ns(r,r)}else if(n.type&175){let r=e[Fn];return new Ns(r,e)}return null}var dv=class{constructor(){}supports(e){return dM(e)}create(e){return new hv(e)}},$U=(n,e)=>e,hv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||$U}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<PT(r,i,s)?t:r,a=PT(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let m=g<s.length?s[g]:s[g]=0,_=m+g;d<=_&&_<l&&(s[g]=m+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!dM(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,Rj(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new fv(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Lh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Lh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},fv=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},pv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Lh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new pv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function PT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function kT(){return new o_([new dv])}var o_=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||kT()),deps:[[e,new GT,new En]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new j(901,!1)}};e.\u0275prov=X({token:e,providedIn:"root",factory:kT});let n=e;return n})();var RM=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)($(Er))},e.\u0275mod=en({type:e}),e.\u0275inj=Xt({});let n=e;return n})();function NM(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=LU(r),s=[SM({}),{provide:tu,useExisting:OU},...t||[]],a=new Oh({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(_e);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(Gr,null),d;c.runOutsideAngular(()=>{d=c.onError.subscribe({next:m=>{l.handleError(m)}})});let f=()=>a.destroy(),g=i.get(xM);return g.add(f),a.onDestroy(()=>{d.unsubscribe(),g.delete(f)}),MU(l,c,()=>{let m=a.get(TM);return m.runInitializers(),m.donePromise.then(()=>{let _=a.get(hf,Vh);lU(_||Vh);let D=a.get(Er);return e!==void 0&&D.bootstrap(e),D})})})}catch(e){return Promise.reject(e)}}var PM=new Q("");var OT=!1;function qU(){OT||(OT=!0,WV(),nU(),mU(),sU(),Vj(),Dj(),J2(),QL())}function zU(n,e){return df(n)}function kM(){return Jn([{provide:eh,useFactory:()=>{let n=!0;return ih()&&(n=!!q(ia,{optional:!0})?.get(cA,null)),n&&Zr("NgHydration"),n}},{provide:Ts,useValue:()=>{H2(!1),ih()&&q(eh)&&(HU(),qU())},multi:!0},{provide:hA,useFactory:()=>ih()&&q(eh)},{provide:ua,useFactory:()=>{if(ih()&&q(eh)){let n=q(Er),e=q(dn);return()=>{zU(n,e).then(()=>{Q2(n)})}}return()=>{}},multi:!0}])}function HU(){let n=du(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===HV){e=t;break}if(!e)throw new j(-507,!1)}function Jr(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Iu(n,e){Zr("NgSignals");let t=mC(n);return e?.equal&&(t[Ii].equal=e.equal),t}function Xr(n){let e=Ae(null);try{return n()}finally{Ae(e)}}var BM=null;function Ir(){return BM}function $M(n){BM??=n}var Ef=class{};var $t=new Q(""),qM=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>q(GU),providedIn:"platform"});let n=e;return n})();var GU=(()=>{let e=class e extends qM{constructor(){super(),this._doc=q($t),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ir().getBaseHref(this._doc)}onPopState(r){let i=Ir().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ir().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function zM(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function OM(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Us(n){return n&&n[0]!=="?"?"?"+n:n}var la=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>q(HM),providedIn:"root"});let n=e;return n})(),WU=new Q(""),HM=(()=>{let e=class e extends la{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??q($t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return zM(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Us(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Us(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Us(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)($(qM),$(WU,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Du=(()=>{let e=class e{constructor(r){this._subject=new yt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=YU(OM(FM(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Us(i))}normalize(r){return e.stripTrailingSlash(QU(this._basePath,FM(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Us(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Us(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Us,e.joinWithSlash=zM,e.stripTrailingSlash=OM,e.\u0275fac=function(i){return new(i||e)($(la))},e.\u0275prov=X({token:e,factory:()=>KU(),providedIn:"root"});let n=e;return n})();function KU(){return new Du($(la))}function QU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function FM(n){return n.replace(/\/index.html$/,"")}function YU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var tn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(tn||{}),qe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(qe||{}),bn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(bn||{}),Li={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function ZU(n){return Vn(n)[ht.LocaleId]}function JU(n,e,t){let r=Vn(n),i=[r[ht.DayPeriodsFormat],r[ht.DayPeriodsStandalone]],s=jn(i,e);return jn(s,t)}function XU(n,e,t){let r=Vn(n),i=[r[ht.DaysFormat],r[ht.DaysStandalone]],s=jn(i,e);return jn(s,t)}function eB(n,e,t){let r=Vn(n),i=[r[ht.MonthsFormat],r[ht.MonthsStandalone]],s=jn(i,e);return jn(s,t)}function tB(n,e){let r=Vn(n)[ht.Eras];return jn(r,e)}function ff(n,e){let t=Vn(n);return jn(t[ht.DateFormat],e)}function pf(n,e){let t=Vn(n);return jn(t[ht.TimeFormat],e)}function gf(n,e){let r=Vn(n)[ht.DateTimeFormat];return jn(r,e)}function bf(n,e){let t=Vn(n),r=t[ht.NumberSymbols][e];if(typeof r>"u"){if(e===Li.CurrencyDecimal)return t[ht.NumberSymbols][Li.Decimal];if(e===Li.CurrencyGroup)return t[ht.NumberSymbols][Li.Group]}return r}function GM(n){if(!n[ht.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ht.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function nB(n){let e=Vn(n);return GM(e),(e[ht.ExtraData][2]||[]).map(r=>typeof r=="string"?c_(r):[c_(r[0]),c_(r[1])])}function rB(n,e,t){let r=Vn(n);GM(r);let i=[r[ht.ExtraData][0],r[ht.ExtraData][1]],s=jn(i,e)||[];return jn(s,t)||[]}function jn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function c_(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var iB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,mf={},sB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ti=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(ti||{}),ke=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(ke||{}),Pe=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Pe||{});function oB(n,e,t,r){let i=gB(n);e=ei(t,e)||e;let o=[],a;for(;e;)if(a=sB.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=KM(r,c),i=pB(i,r,!0));let l="";return o.forEach(d=>{let f=hB(d);l+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function If(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ei(n,e){let t=ZU(n);if(mf[t]??={},mf[t][e])return mf[t][e];let r="";switch(e){case"shortDate":r=ff(n,bn.Short);break;case"mediumDate":r=ff(n,bn.Medium);break;case"longDate":r=ff(n,bn.Long);break;case"fullDate":r=ff(n,bn.Full);break;case"shortTime":r=pf(n,bn.Short);break;case"mediumTime":r=pf(n,bn.Medium);break;case"longTime":r=pf(n,bn.Long);break;case"fullTime":r=pf(n,bn.Full);break;case"short":let i=ei(n,"shortTime"),s=ei(n,"shortDate");r=yf(gf(n,bn.Short),[i,s]);break;case"medium":let o=ei(n,"mediumTime"),a=ei(n,"mediumDate");r=yf(gf(n,bn.Medium),[o,a]);break;case"long":let c=ei(n,"longTime"),l=ei(n,"longDate");r=yf(gf(n,bn.Long),[c,l]);break;case"full":let d=ei(n,"fullTime"),f=ei(n,"fullDate");r=yf(gf(n,bn.Full),[d,f]);break}return r&&(mf[t][e]=r),r}function yf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function er(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function aB(n,e){return er(n,3).substring(0,e)}function _t(n,e,t=0,r=!1,i=!1){return function(s,o){let a=cB(n,s);if((t>0||a>-t)&&(a+=t),n===ke.Hours)a===0&&t===-12&&(a=12);else if(n===ke.FractionalSeconds)return aB(a,e);let c=bf(o,Li.MinusSign);return er(a,e,c,r,i)}}function cB(n,e){switch(n){case ke.FullYear:return e.getFullYear();case ke.Month:return e.getMonth();case ke.Date:return e.getDate();case ke.Hours:return e.getHours();case ke.Minutes:return e.getMinutes();case ke.Seconds:return e.getSeconds();case ke.FractionalSeconds:return e.getMilliseconds();case ke.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function He(n,e,t=tn.Format,r=!1){return function(i,s){return uB(i,s,n,e,t,r)}}function uB(n,e,t,r,i,s){switch(t){case Pe.Months:return eB(e,i,r)[n.getMonth()];case Pe.Days:return XU(e,i,r)[n.getDay()];case Pe.DayPeriods:let o=n.getHours(),a=n.getMinutes();if(s){let l=nB(e),d=rB(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[m,_]=g,D=o>=m.hours&&a>=m.minutes,T=o<_.hours||o===_.hours&&a<_.minutes;if(m.hours<_.hours){if(D&&T)return!0}else if(D||T)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return JU(e,i,r)[o<12?0:1];case Pe.Eras:return tB(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function vf(n){return function(e,t,r){let i=-1*r,s=bf(t,Li.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case ti.Short:return(i>=0?"+":"")+er(o,2,s)+er(Math.abs(i%60),2,s);case ti.ShortGMT:return"GMT"+(i>=0?"+":"")+er(o,1,s);case ti.Long:return"GMT"+(i>=0?"+":"")+er(o,2,s)+":"+er(Math.abs(i%60),2,s);case ti.Extended:return r===0?"Z":(i>=0?"+":"")+er(o,2,s)+":"+er(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var lB=0,wf=4;function dB(n){let e=If(n,lB,1).getDay();return If(n,0,1+(e<=wf?wf:wf+7)-e)}function WM(n){let e=n.getDay(),t=e===0?-3:wf-e;return If(n.getFullYear(),n.getMonth(),n.getDate()+t)}function u_(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=WM(t),o=dB(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return er(i,n,bf(r,Li.MinusSign))}}function _f(n,e=!1){return function(t,r){let s=WM(t).getFullYear();return er(s,n,bf(r,Li.MinusSign),e)}}var l_={};function hB(n){if(l_[n])return l_[n];let e;switch(n){case"G":case"GG":case"GGG":e=He(Pe.Eras,qe.Abbreviated);break;case"GGGG":e=He(Pe.Eras,qe.Wide);break;case"GGGGG":e=He(Pe.Eras,qe.Narrow);break;case"y":e=_t(ke.FullYear,1,0,!1,!0);break;case"yy":e=_t(ke.FullYear,2,0,!0,!0);break;case"yyy":e=_t(ke.FullYear,3,0,!1,!0);break;case"yyyy":e=_t(ke.FullYear,4,0,!1,!0);break;case"Y":e=_f(1);break;case"YY":e=_f(2,!0);break;case"YYY":e=_f(3);break;case"YYYY":e=_f(4);break;case"M":case"L":e=_t(ke.Month,1,1);break;case"MM":case"LL":e=_t(ke.Month,2,1);break;case"MMM":e=He(Pe.Months,qe.Abbreviated);break;case"MMMM":e=He(Pe.Months,qe.Wide);break;case"MMMMM":e=He(Pe.Months,qe.Narrow);break;case"LLL":e=He(Pe.Months,qe.Abbreviated,tn.Standalone);break;case"LLLL":e=He(Pe.Months,qe.Wide,tn.Standalone);break;case"LLLLL":e=He(Pe.Months,qe.Narrow,tn.Standalone);break;case"w":e=u_(1);break;case"ww":e=u_(2);break;case"W":e=u_(1,!0);break;case"d":e=_t(ke.Date,1);break;case"dd":e=_t(ke.Date,2);break;case"c":case"cc":e=_t(ke.Day,1);break;case"ccc":e=He(Pe.Days,qe.Abbreviated,tn.Standalone);break;case"cccc":e=He(Pe.Days,qe.Wide,tn.Standalone);break;case"ccccc":e=He(Pe.Days,qe.Narrow,tn.Standalone);break;case"cccccc":e=He(Pe.Days,qe.Short,tn.Standalone);break;case"E":case"EE":case"EEE":e=He(Pe.Days,qe.Abbreviated);break;case"EEEE":e=He(Pe.Days,qe.Wide);break;case"EEEEE":e=He(Pe.Days,qe.Narrow);break;case"EEEEEE":e=He(Pe.Days,qe.Short);break;case"a":case"aa":case"aaa":e=He(Pe.DayPeriods,qe.Abbreviated);break;case"aaaa":e=He(Pe.DayPeriods,qe.Wide);break;case"aaaaa":e=He(Pe.DayPeriods,qe.Narrow);break;case"b":case"bb":case"bbb":e=He(Pe.DayPeriods,qe.Abbreviated,tn.Standalone,!0);break;case"bbbb":e=He(Pe.DayPeriods,qe.Wide,tn.Standalone,!0);break;case"bbbbb":e=He(Pe.DayPeriods,qe.Narrow,tn.Standalone,!0);break;case"B":case"BB":case"BBB":e=He(Pe.DayPeriods,qe.Abbreviated,tn.Format,!0);break;case"BBBB":e=He(Pe.DayPeriods,qe.Wide,tn.Format,!0);break;case"BBBBB":e=He(Pe.DayPeriods,qe.Narrow,tn.Format,!0);break;case"h":e=_t(ke.Hours,1,-12);break;case"hh":e=_t(ke.Hours,2,-12);break;case"H":e=_t(ke.Hours,1);break;case"HH":e=_t(ke.Hours,2);break;case"m":e=_t(ke.Minutes,1);break;case"mm":e=_t(ke.Minutes,2);break;case"s":e=_t(ke.Seconds,1);break;case"ss":e=_t(ke.Seconds,2);break;case"S":e=_t(ke.FractionalSeconds,1);break;case"SS":e=_t(ke.FractionalSeconds,2);break;case"SSS":e=_t(ke.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=vf(ti.Short);break;case"ZZZZZ":e=vf(ti.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=vf(ti.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=vf(ti.Long);break;default:return null}return l_[n]=e,e}function KM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function fB(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function pB(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),s=KM(e,i);return fB(n,r*(s-i))}function gB(n){if(VM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return If(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(iB))return mB(r)}let e=new Date(n);if(!VM(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function mB(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function VM(n){return n instanceof Date&&!isNaN(n.valueOf())}function p_(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var d_=/\s+/,LM=[],QM=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=LM,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(d_):LM}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(d_):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(d_).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(ae(Qr),ae(Oi))},e.\u0275dir=St({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var h_=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ji=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new h_(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),jM(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);jM(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ae(oa),ae(ef),ae(o_))},e.\u0275dir=St({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function jM(n,e){n.context.$implicit=e.item}var da=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new f_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){UM("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){UM("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ae(oa),ae(ef))},e.\u0275dir=St({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),f_=class{constructor(){this.$implicit=null,this.ngIf=null}};function UM(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Jt(e)}'.`)}function yB(n,e){return new j(2100,!1)}var vB="mediumDate",_B=new Q(""),wB=new Q(""),Cf=(()=>{let e=class e{constructor(r,i,s){this.locale=r,this.defaultTimezone=i,this.defaultOptions=s}transform(r,i,s,o){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??vB,c=s??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return oB(r,a,o||this.locale,c)}catch(a){throw yB(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)(ae(hf,16),ae(_B,24),ae(wB,24))},e.\u0275pipe=XT({name:"date",type:e,pure:!0,standalone:!0});let n=e;return n})();var fn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=en({type:e}),e.\u0275inj=Xt({});let n=e;return n})(),YM="browser",EB="server";function ni(n){return n===EB}var Df=class{};var Sf=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var ix=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ix||{}),g_=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Sf,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Af=class n extends g_{constructor(e={}){super(e),this.type=ix.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var IB=new Q("");var DB=new Q(""),ZM="b",JM="h",XM="s",ex="st",tx="u",nx="rt",Tf=new Q(""),bB=["GET","HEAD"];function CB(n,e){let m=q(Tf),{isCacheActive:t}=m,r=pd(m,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!bB.includes(s)||!r.includeRequestsWithAuthHeaders&&TB(n)||r.filter?.(n)===!1)return e(n);let o=q(ia),a=q(DB,{optional:!0}),c=ni(q(Rt));if(a&&!c)throw new j(2803,!1);let l=c&&a?xB(n.url,a):n.url,d=AB(n,l),f=o.get(d,null),g=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(g=i.includeHeaders),f){let{[ZM]:_,[nx]:D,[JM]:T,[XM]:O,[ex]:U,[tx]:P}=f,z=_;switch(D){case"arraybuffer":z=new TextEncoder().encode(_).buffer;break;case"blob":z=new Blob([_]);break}let ne=new Sf(T);return ie(new Af({body:z,headers:ne,status:O,statusText:U,url:P}))}return e(n).pipe(dt(_=>{_ instanceof Af&&c&&o.set(d,{[ZM]:_.body,[JM]:SB(_.headers,g),[XM]:_.status,[ex]:_.statusText,[tx]:l,[nx]:n.responseType})}))}function TB(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function SB(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function rx(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function AB(n,e){let{params:t,method:r,responseType:i}=n,s=rx(t),o=n.serializeBody();o instanceof URLSearchParams?o=rx(o):typeof o!="string"&&(o="");let a=[r,i,e,o,s].join("|"),c=MB(a);return c}function MB(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function sx(n){return[{provide:Tf,useFactory:()=>(Zr("NgHttpTransferCache"),G({isCacheActive:!0},n))},{provide:IB,useValue:CB,multi:!0,deps:[ia,Tf]},{provide:ua,multi:!0,useFactory:()=>{let e=q(Er),t=q(Tf);return()=>{df(e).then(()=>{t.isCacheActive=!1})}}}]}function xB(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var v_=class extends Ef{constructor(){super(...arguments),this.supportsDOMEvents=!0}},__=class n extends v_{static makeCurrent(){$M(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=RB();return t==null?null:NB(t)}resetBaseElement(){bu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return p_(document.cookie,e)}},bu=null;function RB(){return bu=bu||document.querySelector("base"),bu?bu.getAttribute("href"):null}function NB(n){return new URL(n,document.baseURI).pathname}var w_=class{addToWindow(e){xt.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new j(5103,!1);return s},xt.getAllAngularTestabilities=()=>e.getAllTestabilities(),xt.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=xt.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};xt.frameworkStabilizers||(xt.frameworkStabilizers=[]),xt.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Ir().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},PB=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),Mf=new Q(""),cx=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new j(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)($(Mf),$(_e))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),Cu=class{constructor(e){this._doc=e}},m_="ng-app-id",ux=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ni(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${m_}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(m_),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(m_,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)($($t),$(hu),$(kv,8),$(Rt))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),y_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},D_=/%COMP%/g,lx="%COMP%",kB=`_nghost-${lx}`,OB=`_ngcontent-${lx}`,FB=!0,VB=new Q("",{providedIn:"root",factory:()=>FB});function LB(n){return OB.replace(D_,n)}function jB(n){return kB.replace(D_,n)}function dx(n,e){return e.map(t=>t.replace(D_,n))}var xf=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=ni(c),this.defaultRenderer=new Tu(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===gr.ShadowDom&&(i=De(G({},i),{encapsulation:gr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Rf?s.applyToHost(r):s instanceof Su&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case gr.Emulated:o=new Rf(l,d,i,this.appId,f,a,c,g);break;case gr.ShadowDom:return new E_(l,d,r,i,a,c,this.nonce,g);default:o=new Su(l,d,i,f,a,c,g);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)($(cx),$(ux),$(hu),$(VB),$($t),$(Rt),$(_e),$(kv))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),Tu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(y_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ox(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ox(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=y_[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=y_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Wr.DashCase|Wr.Important)?e.style.setProperty(t,r,i&Wr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Wr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ir().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function ox(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var E_=class extends Tu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=dx(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Su=class extends Tu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?dx(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Rf=class extends Su{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=LB(l),this.hostAttr=jB(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},UB=(()=>{let e=class e extends Cu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)($($t))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),BB=(()=>{let e=class e extends Cu{constructor(r){super(r),this.delegate=q(PM,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)($($t))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),ax=["alt","control","meta","shift"],$B={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},zB=(()=>{let e=class e extends Cu{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ir().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),ax.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=$B[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),ax.forEach(a=>{if(a!==s){let c=qB[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)($($t))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})();function hx(n,e){return NM(G({rootComponent:n},HB(e)))}function HB(n){return{appProviders:[...fx,...n?.providers??[]],platformProviders:QB}}function GB(){__.makeCurrent()}function WB(){return new Gr}function KB(){return rA(document),document}var QB=[{provide:Rt,useValue:YM},{provide:Nv,useValue:GB,multi:!0},{provide:$t,useFactory:KB,deps:[]}];var YB=new Q(""),ZB=[{provide:Eu,useClass:w_,deps:[]},{provide:n_,useClass:uf,deps:[_e,lf,Eu]},{provide:uf,useClass:uf,deps:[_e,lf,Eu]}],fx=[{provide:$h,useValue:"root"},{provide:Gr,useFactory:WB,deps:[]},{provide:Mf,useClass:UB,multi:!0,deps:[$t,_e,Rt]},{provide:Mf,useClass:zB,multi:!0,deps:[$t]},{provide:Mf,useClass:BB,multi:!0},xf,ux,cx,{provide:Ai,useExisting:xf},{provide:Df,useClass:PB,deps:[]},[]],px=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:hu,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)($(YB,12))},e.\u0275mod=en({type:e}),e.\u0275inj=Xt({providers:[...fx,...ZB],imports:[fn,RM]});let n=e;return n})();var gx=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)($($t))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var I_=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(I_||{});function mx(...n){let e=[],t=new Set,r=t.has(I_.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);return Jn([[],kM(),t.has(I_.NoHttpTransferCache)||r?[]:sx({}),e])}var fe="primary",qu=Symbol("RouteTitle"),A_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ya(n){return new A_(n)}function XB(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function e$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Dr(n[t],e[t]))return!1;return!0}function Dr(n,e){let t=n?M_(n):void 0,r=e?M_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!bx(n[i],e[i]))return!1;return!0}function M_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function bx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function Cx(n){return n.length>0?n[n.length-1]:null}function Bi(n){return ey(n)?n:Ls(n)?Re(Promise.resolve(n)):ie(n)}var t$={exact:Sx,subset:Ax},Tx={exact:n$,subset:r$,ignored:()=>!0};function yx(n,e,t){return t$[t.paths](n.root,e.root,t.matrixParams)&&Tx[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function n$(n,e){return Dr(n,e)}function Sx(n,e,t){if(!qs(n.segments,e.segments)||!kf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Sx(n.children[r],e.children[r],t))return!1;return!0}function r$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>bx(n[t],e[t]))}function Ax(n,e,t){return Mx(n,e,e.segments,t)}function Mx(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!qs(i,t)||e.hasChildren()||!kf(i,t,r))}else if(n.segments.length===t.length){if(!qs(n.segments,t)||!kf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Ax(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!qs(n.segments,i)||!kf(n.segments,i,r)||!n.children[fe]?!1:Mx(n.children[fe],e,s,r)}}function kf(n,e,t){return e.every((r,i)=>Tx[t](n[i].parameters,r.parameters))}var ii=class{constructor(e=new Ve([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ya(this.queryParams),this._queryParamMap}toString(){return o$.serialize(this)}},Ve=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Of(this)}},$s=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ya(this.parameters),this._parameterMap}toString(){return Rx(this)}};function i$(n,e){return qs(n,e)&&n.every((t,r)=>Dr(t.parameters,e[r].parameters))}function qs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function s$(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var tw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>new ku,providedIn:"root"});let n=e;return n})(),ku=class{parse(e){let t=new R_(e);return new ii(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Au(e.root,!0)}`,r=u$(e.queryParams),i=typeof e.fragment=="string"?`#${a$(e.fragment)}`:"";return`${t}${r}${i}`}},o$=new ku;function Of(n){return n.segments.map(e=>Rx(e)).join("/")}function Au(n,e){if(!n.hasChildren())return Of(n);if(e){let t=n.children[fe]?Au(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==fe&&r.push(`${i}:${Au(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=s$(n,(r,i)=>i===fe?[Au(n.children[fe],!1)]:[`${i}:${Au(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${Of(n)}/${t[0]}`:`${Of(n)}/(${t.join("//")})`}}function xx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nf(n){return xx(n).replace(/%3B/gi,";")}function a$(n){return encodeURI(n)}function x_(n){return xx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ff(n){return decodeURIComponent(n)}function vx(n){return Ff(n.replace(/\+/g,"%20"))}function Rx(n){return`${x_(n.path)}${c$(n.parameters)}`}function c$(n){return Object.entries(n).map(([e,t])=>`;${x_(e)}=${x_(t)}`).join("")}function u$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Nf(t)}=${Nf(i)}`).join("&"):`${Nf(t)}=${Nf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var l$=/^[^\/()?;#]+/;function b_(n){let e=n.match(l$);return e?e[0]:""}var d$=/^[^\/()?;=#]+/;function h$(n){let e=n.match(d$);return e?e[0]:""}var f$=/^[^=?&#]+/;function p$(n){let e=n.match(f$);return e?e[0]:""}var g$=/^[^&#]+/;function m$(n){let e=n.match(g$);return e?e[0]:""}var R_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ve([],{}):new Ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new Ve(e,t)),r}parseSegment(){let e=b_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new $s(Ff(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=h$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=b_(this.remaining);i&&(r=i,this.capture(r))}e[Ff(t)]=Ff(r)}parseQueryParam(e){let t=p$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=m$(this.remaining);o&&(r=o,this.capture(r))}let i=vx(t),s=vx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=b_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=fe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[fe]:new Ve([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function Nx(n){return n.segments.length>0?new Ve([],{[fe]:n}):n}function Px(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Px(i);if(r===fe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ve(n.segments,e);return y$(t)}function y$(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new Ve(n.segments.concat(e.segments),e.children)}return n}function zs(n){return n instanceof ii}function v$(n,e,t=null,r=null){let i=kx(n);return Ox(i,e,t,r)}function kx(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new Ve(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=Nx(r);return e??i}function Ox(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return C_(i,i,i,t,r);let s=_$(e);if(s.toRoot())return C_(i,i,new Ve([],{}),t,r);let o=w$(s,i,n),a=o.processChildren?Ru(o.segmentGroup,o.index,s.commands):Vx(o.segmentGroup,o.index,s.commands);return C_(i,o.segmentGroup,a,t,r)}function Vf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ou(n){return typeof n=="object"&&n!=null&&n.outlets}function C_(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=Fx(n,e,t);let a=Nx(Px(o));return new ii(a,s,i)}function Fx(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=Fx(s,e,t)}),new Ve(n.segments,r)}var Lf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vf(r[0]))throw new j(4003,!1);let i=r.find(Ou);if(i&&i!==Cx(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Lf(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Lf(t,e,r)}var pa=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function w$(n,e,t){if(n.isAbsolute)return new pa(e,!0,0);if(!t)return new pa(e,!1,NaN);if(t.parent===null)return new pa(t,!0,0);let r=Vf(n.commands[0])?0:1,i=t.segments.length-1+r;return E$(t,i,n.numberOfDoubleDots)}function E$(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new pa(r,!1,i-s)}function I$(n){return Ou(n[0])?n[0].outlets:{[fe]:n}}function Vx(n,e,t){if(n??=new Ve([],{}),n.segments.length===0&&n.hasChildren())return Ru(n,e,t);let r=D$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ve(n.segments.slice(0,r.pathIndex),{});return s.children[fe]=new Ve(n.segments.slice(r.pathIndex),n.children),Ru(s,0,i)}else return r.match&&i.length===0?new Ve(n.segments,{}):r.match&&!n.hasChildren()?N_(n,e,t):r.match?Ru(n,0,i):N_(n,e,t)}function Ru(n,e,t){if(t.length===0)return new Ve(n.segments,{});{let r=I$(t),i={};if(Object.keys(r).some(s=>s!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let s=Ru(n.children[fe],e,t);return new Ve(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Vx(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ve(n.segments,i)}}function D$(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Ou(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!wx(c,l,o))return s;r+=2}else{if(!wx(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function N_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Ou(s)){let c=b$(s.outlets);return new Ve(r,c)}if(i===0&&Vf(t[0])){let c=n.segments[e];r.push(new $s(c.path,_x(t[0]))),i++;continue}let o=Ou(s)?s.outlets[fe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Vf(a)?(r.push(new $s(o,_x(a))),i+=2):(r.push(new $s(o,{})),i++)}return new Ve(r,{})}function b$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=N_(new Ve([],{}),0,r))}),e}function _x(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function wx(n,e,t){return n==t.path&&Dr(e,t.parameters)}var Nu="imperative",Ft=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ft||{}),Un=class{constructor(e,t){this.id=e,this.url=t}},Fu=class extends Un{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ft.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ui=class extends Un{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Tn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Tn||{}),P_=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(P_||{}),ri=class extends Un{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Hs=class extends Un{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ft.NavigationSkipped}},Vu=class extends Un{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},jf=class extends Un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},k_=class extends Un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},O_=class extends Un{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},F_=class extends Un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},V_=class extends Un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},L_=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},j_=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},U_=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},B_=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$_=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},q_=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Lu=class{},va=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function C$(n,e){return n.providers&&!n._injector&&(n._injector=t_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function tr(n){return n.outlet||fe}function T$(n,e){let t=n.filter(r=>tr(r)===e);return t.push(...n.filter(r=>tr(r)!==e)),t}function zu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var z_=class{get injector(){return zu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Gf(this.rootInjector),this.attachRef=null}},Gf=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new z_(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)($(On))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Uf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=H_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=H_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=G_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return G_(e,this._root).map(t=>t.value)}};function H_(n,e){if(n===e.value)return e;for(let t of e.children){let r=H_(n,t);if(r)return r}return null}function G_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=G_(n,t);if(r.length)return r.unshift(e),r}return[]}var Cn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function fa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Bf=class extends Uf{constructor(e,t){super(e),this.snapshot=t,nw(this,e)}toString(){return this.snapshot.toString()}};function Lx(n){let e=S$(n),t=new Pt([new $s("",{})]),r=new Pt({}),i=new Pt({}),s=new Pt({}),o=new Pt(""),a=new nr(t,r,s,o,i,fe,n,e.root);return a.snapshot=e.root,new Bf(new Cn(a,[]),e)}function S$(n){let e={},t={},r={},i="",s=new ga([],e,r,i,t,fe,n,null,{});return new qf("",new Cn(s,[]))}var nr=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ee(l=>l[qu]))??ie(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>ya(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>ya(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function $f(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:G(G({},e.params),n.params),data:G(G({},e.data),n.data),resolve:G(G(G(G({},n.data),e.data),i?.data),n._resolvedData)}:r={params:G({},n.params),data:G({},n.data),resolve:G(G({},n.data),n._resolvedData??{})},i&&Ux(i)&&(r.resolve[qu]=i.title),r}var ga=class{get title(){return this.data?.[qu]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ya(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ya(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},qf=class extends Uf{constructor(e,t){super(t),this.url=e,nw(this,t)}toString(){return jx(this._root)}};function nw(n,e){e.value._routerState=n,e.children.forEach(t=>nw(n,t))}function jx(n){let e=n.children.length>0?` { ${n.children.map(jx).join(", ")} } `:"";return`${n.value}${e}`}function T_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Dr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Dr(e.params,t.params)||n.paramsSubject.next(t.params),e$(e.url,t.url)||n.urlSubject.next(t.url),Dr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function W_(n,e){let t=Dr(n.params,e.params)&&i$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||W_(n.parent,e.parent))}function Ux(n){return typeof n.title=="string"||n.title===null}var rw=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new yt,this.deactivateEvents=new yt,this.attachEvents=new yt,this.detachEvents=new yt,this.parentContexts=q(Gf),this.location=q(oa),this.changeDetector=q(js),this.inputBinder=q(iw,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new K_(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=St({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ri]});let n=e;return n})(),K_=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===nr?this.route:e===Gf?this.childContexts:this.parent.get(e,t)}},iw=new Q("");function A$(n,e,t){let r=ju(n,e._root,t?t._root:void 0);return new Bf(r,e)}function ju(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=M$(n,e,t);return new Cn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ju(n,a)),o}}let r=x$(e.value),i=e.children.map(s=>ju(n,s));return new Cn(r,i)}}function M$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ju(n,r,i);return ju(n,r)})}function x$(n){return new nr(new Pt(n.url),new Pt(n.params),new Pt(n.queryParams),new Pt(n.fragment),new Pt(n.data),n.outlet,n.component,n)}var Uu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Bx="ngNavigationCancelingError";function zf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=zs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$x(!1,Tn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function $x(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Bx]=!0,t.cancellationCode=e,t}function R$(n){return qx(n)&&zs(n.url)}function qx(n){return!!n&&n[Bx]}var N$=(n,e,t,r)=>ee(i=>(new Q_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Q_=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),T_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=fa(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=fa(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new q_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new B_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(T_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),T_(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Hf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ma=class{constructor(e,t){this.component=e,this.route=t}};function P$(n,e,t){let r=n._root,i=e?e._root:null;return Mu(r,i,t,[r.value])}function k$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function wa(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!jT(n)?n:e.get(n):r}function Mu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=fa(e);return n.children.forEach(o=>{O$(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Pu(a,t.getContext(o),i)),i}function O$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=F$(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Hf(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Mu(n,e,a?a.children:null,r,i):Mu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ma(a.outlet.component,o))}else o&&Pu(e,a,i),i.canActivateChecks.push(new Hf(r)),s.component?Mu(n,null,a?a.children:null,r,i):Mu(n,null,t,r,i);return i}function F$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!qs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qs(n.url,e.url)||!Dr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!W_(n,e)||!Dr(n.queryParams,e.queryParams);case"paramsChange":default:return!W_(n,e)}}function Pu(n,e,t){let r=fa(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Pu(o,e.children.getContext(s),t):Pu(o,null,t):Pu(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ma(e.outlet.component,i)):t.canDeactivateChecks.push(new ma(null,i)):t.canDeactivateChecks.push(new ma(null,i))}function Hu(n){return typeof n=="function"}function V$(n){return typeof n=="boolean"}function L$(n){return n&&Hu(n.canLoad)}function j$(n){return n&&Hu(n.canActivate)}function U$(n){return n&&Hu(n.canActivateChild)}function B$(n){return n&&Hu(n.canDeactivate)}function $$(n){return n&&Hu(n.canMatch)}function zx(n){return n instanceof qr||n?.name==="EmptyError"}var Pf=Symbol("INITIAL_VALUE");function _a(){return ct(n=>Kd(n.map(e=>e.pipe(zr(1),Es(Pf)))).pipe(ee(e=>{for(let t of e)if(t!==!0){if(t===Pf)return Pf;if(t===!1||q$(t))return t}return!0}),kt(e=>e!==Pf),zr(1)))}function q$(n){return zs(n)||n instanceof Uu}function z$(n,e){return Tt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ie(De(G({},t),{guardsResult:!0})):H$(o,r,i,n).pipe(Tt(a=>a&&V$(a)?G$(r,s,n,e):ie(a)),ee(a=>De(G({},t),{guardsResult:a})))})}function H$(n,e,t,r){return Re(n).pipe(Tt(i=>Z$(i.component,i.route,t,e,r)),yn(i=>i!==!0,!0))}function G$(n,e,t,r){return Re(e).pipe(_s(i=>Uo(K$(i.route.parent,r),W$(i.route,r),Y$(n,i.path,t),Q$(n,i.route,t))),yn(i=>i!==!0,!0))}function W$(n,e){return n!==null&&e&&e(new $_(n)),ie(!0)}function K$(n,e){return n!==null&&e&&e(new U_(n)),ie(!0)}function Q$(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ie(!0);let i=r.map(s=>Qd(()=>{let o=zu(e)??t,a=wa(s,o),c=j$(a)?a.canActivate(e,n):vr(o,()=>a(e,n));return Bi(c).pipe(yn())}));return ie(i).pipe(_a())}function Y$(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>k$(o)).filter(o=>o!==null).map(o=>Qd(()=>{let a=o.guards.map(c=>{let l=zu(o.node)??t,d=wa(c,l),f=U$(d)?d.canActivateChild(r,n):vr(l,()=>d(r,n));return Bi(f).pipe(yn())});return ie(a).pipe(_a())}));return ie(s).pipe(_a())}function Z$(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ie(!0);let o=s.map(a=>{let c=zu(e)??i,l=wa(a,c),d=B$(l)?l.canDeactivate(n,e,t,r):vr(c,()=>l(n,e,t,r));return Bi(d).pipe(yn())});return ie(o).pipe(_a())}function J$(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ie(!0);let s=i.map(o=>{let a=wa(o,n),c=L$(a)?a.canLoad(e,t):vr(n,()=>a(e,t));return Bi(c)});return ie(s).pipe(_a(),Hx(r))}function Hx(n){return Km(dt(e=>{if(typeof e!="boolean")throw zf(n,e)}),ee(e=>e===!0))}function X$(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ie(!0);let s=i.map(o=>{let a=wa(o,n),c=$$(a)?a.canMatch(e,t):vr(n,()=>a(e,t));return Bi(c)});return ie(s).pipe(_a(),Hx(r))}var Bu=class{constructor(e){this.segmentGroup=e||null}},$u=class extends Error{constructor(e){super(),this.urlTree=e}};function ha(n){return jo(new Bu(n))}function eq(n){return jo(new j(4e3,!1))}function tq(n){return jo($x(!1,Tn.GuardRejected))}var Y_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ie(r);if(i.numberOfChildren>1||!i.children[fe])return eq(`${e.redirectTo}`);i=i.children[fe]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:m,data:_,title:D}=i,T=vr(s,()=>a({params:m,data:_,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:D}));if(T instanceof ii)throw new $u(T);t=T}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new $u(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new ii(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ve(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Z_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nq(n,e,t,r,i){let s=sw(n,e,t);return s.matched?(r=C$(e,r),X$(r,e,t,i).pipe(ee(o=>o===!0?s:G({},Z_)))):ie(s)}function sw(n,e,t){if(e.path==="**")return rq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?G({},Z_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||XB)(t,n,e);if(!i)return G({},Z_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?G(G({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function rq(n){return{matched:!0,parameters:n.length>0?Cx(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Ex(n,e,t,r){return t.length>0&&oq(n,t,r)?{segmentGroup:new Ve(e,sq(r,new Ve(t,n.children))),slicedSegments:[]}:t.length===0&&aq(n,t,r)?{segmentGroup:new Ve(n.segments,iq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ve(n.segments,n.children),slicedSegments:t}}function iq(n,e,t,r){let i={};for(let s of t)if(Wf(n,e,s)&&!r[tr(s)]){let o=new Ve([],{});i[tr(s)]=o}return G(G({},r),i)}function sq(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&tr(r)!==fe){let i=new Ve([],{});t[tr(r)]=i}return t}function oq(n,e,t){return t.some(r=>Wf(n,e,r)&&tr(r)!==fe)}function aq(n,e,t){return t.some(r=>Wf(n,e,r))}function Wf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function cq(n,e,t,r){return tr(n)!==r&&(r===fe||!Wf(e,t,n))?!1:sw(e,n,t).matched}function uq(n,e,t){return e.length===0&&!n.children[t]}var J_=class{};function lq(n,e,t,r,i,s,o="emptyOnly"){return new X_(n,e,t,r,i,o,s).recognize()}var dq=31,X_=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Y_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=Ex(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:t,rootSnapshot:r})=>{let i=new Cn(r,t),s=new qf("",i),o=v$(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new ga([],Object.freeze({}),Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe(ee(r=>({children:r,rootSnapshot:t})),un(r=>{if(r instanceof $u)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Bu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ee(o=>o instanceof Cn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Re(s).pipe(_s(o=>{let a=r.children[o],c=T$(t,o);return this.processSegmentGroup(e,c,a,o,i)}),ws((o,a)=>(o.push(...a),o)),Di(null),sy(),Tt(o=>{if(o===null)return ha(r);let a=Gx(o);return hq(a),ie(a)}))}processSegment(e,t,r,i,s,o,a){return Re(t).pipe(_s(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(un(l=>{if(l instanceof Bu)return ie(null);throw l}))),yn(c=>!!c),un(c=>{if(zx(c))return uq(r,i,s)?ie(new J_):ha(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return cq(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):ha(i):ha(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=sw(t,i,s);if(!c)return ha(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>dq&&(this.allowRedirects=!1));let m=new ga(s,l,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,Ix(i),tr(i),i.component??i._loadedComponent??null,i,Dx(i)),_=$f(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(_.params),m.data=Object.freeze(_.data);let D=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,m,e);return this.applyRedirects.lineralizeSegments(i,D).pipe(Tt(T=>this.processSegment(e,r,t,T.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=nq(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(ct(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ct(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:m}=c,_=new ga(g,f,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,Ix(r),tr(r),r.component??r._loadedComponent??null,r,Dx(r)),D=$f(_,o,this.paramsInheritanceStrategy);_.params=Object.freeze(D.params),_.data=Object.freeze(D.data);let{segmentGroup:T,slicedSegments:O}=Ex(t,g,m,l);if(O.length===0&&T.hasChildren())return this.processChildren(d,l,T,_).pipe(ee(P=>new Cn(_,P)));if(l.length===0&&O.length===0)return ie(new Cn(_,[]));let U=tr(r)===s;return this.processSegment(d,l,T,O,U?fe:s,!0,_).pipe(ee(P=>new Cn(_,P instanceof Cn?[P]:[])))}))):ha(t)))}getChildConfig(e,t,r){return t.children?ie({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ie({routes:t._loadedRoutes,injector:t._loadedInjector}):J$(e,t,r,this.urlSerializer).pipe(Tt(i=>i?this.configLoader.loadChildren(e,t).pipe(dt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):tq(t))):ie({routes:[],injector:e})}};function hq(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function fq(n){let e=n.value.routeConfig;return e&&e.path===""}function Gx(n){let e=[],t=new Set;for(let r of n){if(!fq(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Gx(r.children);e.push(new Cn(r.value,i))}return e.filter(r=>!t.has(r))}function Ix(n){return n.data||{}}function Dx(n){return n.resolve||{}}function pq(n,e,t,r,i,s){return Tt(o=>lq(n,e,t,r,o.extractedUrl,i,s).pipe(ee(({state:a,tree:c})=>De(G({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function gq(n,e){return Tt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ie(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of Wx(c))o.add(l);let a=0;return Re(o).pipe(_s(c=>s.has(c)?mq(c,r,n,e):(c.data=$f(c,c.parent,n).resolve,ie(void 0))),dt(()=>a++),$o(1),Tt(c=>a===o.size?ie(t):Yt))})}function Wx(n){let e=n.children.map(t=>Wx(t)).flat();return[n,...e]}function mq(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!Ux(i)&&(s[qu]=i.title),yq(s,n,e,r).pipe(ee(o=>(n._resolvedData=o,n.data=$f(n,n.parent,t).resolve,null)))}function yq(n,e,t,r){let i=M_(n);if(i.length===0)return ie({});let s={};return Re(i).pipe(Tt(o=>vq(n[o],e,t,r).pipe(yn(),dt(a=>{if(a instanceof Uu)throw zf(new ku,a);s[o]=a}))),$o(1),ry(s),un(o=>zx(o)?Yt:jo(o)))}function vq(n,e,t,r){let i=zu(e)??r,s=wa(n,i),o=s.resolve?s.resolve(e,t):vr(i,()=>s(e,t));return Bi(o)}function S_(n){return ct(e=>{let t=n(e);return t?Re(t).pipe(ee(()=>e)):ie(e)})}var Kx=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===fe);return i}getResolvedTitleForRoute(r){return r.data[qu]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>q(_q),providedIn:"root"});let n=e;return n})(),_q=(()=>{let e=class e extends Kx{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)($(gx))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ow=new Q("",{providedIn:"root",factory:()=>({})}),wq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Oe({type:e,selectors:[["ng-component"]],standalone:!0,features:[Fe],decls:1,vars:0,template:function(i,s){i&1&&Ne(0,"router-outlet")},dependencies:[rw],encapsulation:2});let n=e;return n})();function aw(n){let e=n.children&&n.children.map(aw),t=e?De(G({},n),{children:e}):G({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=wq),t}var cw=new Q(""),Eq=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=q(i_)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ie(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Bi(r.loadComponent()).pipe(ee(Qx),dt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Bo(()=>{this.componentLoaders.delete(r)})),s=new Oo(i,()=>new Je).pipe(ko());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ie({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Iq(i,this.compiler,r,this.onLoadEndListener).pipe(Bo(()=>{this.childrenLoaders.delete(i)})),a=new Oo(o,()=>new Je).pipe(ko());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Iq(n,e,t,r){return Bi(n.loadChildren()).pipe(ee(Qx),Tt(i=>i instanceof ru||Array.isArray(i)?ie(i):Re(e.compileModuleAsync(i))),ee(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(cw,[],{optional:!0,self:!0}).flat()),{routes:o.map(aw),injector:s}}))}function Dq(n){return n&&typeof n=="object"&&"default"in n}function Qx(n){return Dq(n)?n.default:n}var uw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>q(bq),providedIn:"root"});let n=e;return n})(),bq=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Cq=new Q("");var Tq=new Q(""),Sq=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Je,this.transitionAbortSubject=new Je,this.configLoader=q(Eq),this.environmentInjector=q(On),this.urlSerializer=q(tw),this.rootContexts=q(Gf),this.location=q(Du),this.inputBindingEnabled=q(iw,{optional:!0})!==null,this.titleStrategy=q(Kx),this.options=q(ow,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=q(uw),this.createViewTransition=q(Cq,{optional:!0}),this.navigationErrorHandler=q(Tq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ie(void 0),this.rootComponentType=null;let r=s=>this.events.next(new L_(s)),i=s=>this.events.next(new j_(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(De(G(G({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Pt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Nu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(kt(o=>o.id!==0),ee(o=>De(G({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ct(o=>{let a=!1,c=!1;return ie(o).pipe(ct(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Tn.SupersededByNewNavigation),Yt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?De(G({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new Hs(l.id,this.urlSerializer.serialize(l.rawUrl),g,P_.IgnoredSameUrlNavigation)),l.resolve(!1),Yt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ie(l).pipe(ct(g=>{let m=this.transitions?.getValue();return this.events.next(new Fu(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),m!==this.transitions?.getValue()?Yt:Promise.resolve(g)}),pq(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),dt(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=De(G({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let m=new jf(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:m,source:_,restoredState:D,extras:T}=l,O=new Fu(g,this.urlSerializer.serialize(m),_,D);this.events.next(O);let U=Lx(this.rootComponentType).snapshot;return this.currentTransition=o=De(G({},l),{targetSnapshot:U,urlAfterRedirects:m,extras:De(G({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ie(o)}else{let g="";return this.events.next(new Hs(l.id,this.urlSerializer.serialize(l.extractedUrl),g,P_.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Yt}}),dt(l=>{let d=new k_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ee(l=>(this.currentTransition=o=De(G({},l),{guards:P$(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),z$(this.environmentInjector,l=>this.events.next(l)),dt(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw zf(this.urlSerializer,l.guardsResult);let d=new O_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),kt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Tn.GuardRejected),!1)),S_(l=>{if(l.guards.canActivateChecks.length)return ie(l).pipe(dt(d=>{let f=new F_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),ct(d=>{let f=!1;return ie(d).pipe(gq(this.paramsInheritanceStrategy,this.environmentInjector),dt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",Tn.NoDataFromResolver)}}))}),dt(d=>{let f=new V_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),S_(l=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(dt(m=>{f.component=m}),ee(()=>{})));for(let m of f.children)g.push(...d(m));return g};return Kd(d(l.targetSnapshot.root)).pipe(Di(null),zr(1))}),S_(()=>this.afterPreactivation()),ct(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?Re(f).pipe(ee(()=>o)):ie(o)}),ee(l=>{let d=A$(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=De(G({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),dt(()=>{this.events.next(new Lu)}),N$(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),zr(1),dt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ui(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),ay(this.transitionAbortSubject.pipe(dt(l=>{throw l}))),Bo(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Tn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),un(l=>{if(c=!0,qx(l))this.events.next(new ri(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),R$(l)?this.events.next(new va(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Vu(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let f=vr(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof Uu){let{message:g,cancellationCode:m}=zf(this.urlSerializer,f);this.events.next(new ri(o.id,this.urlSerializer.serialize(o.extractedUrl),g,m)),this.events.next(new va(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=r.errorHandler(l);o.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return Yt}))}))}cancelNavigationTransition(r,i,s){let o=new ri(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Aq(n){return n!==Nu}var Mq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>q(xq),providedIn:"root"});let n=e;return n})(),ew=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},xq=(()=>{let e=class e extends ew{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Os(e)))(s||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Yx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>q(Rq),providedIn:"root"});let n=e;return n})(),Rq=(()=>{let e=class e extends Yx{constructor(){super(...arguments),this.location=q(Du),this.urlSerializer=q(tw),this.options=q(ow,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=q(uw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ii,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Lx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Fu)this.stateMemento=this.createStateMemento();else if(r instanceof Hs)this.rawUrlTree=i.initialUrl;else if(r instanceof jf){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof Lu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof ri&&(r.code===Tn.GuardRejected||r.code===Tn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Vu?this.restoreHistory(i,!0):r instanceof Ui&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof ii?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=G(G({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=G(G({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Os(e)))(s||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),xu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(xu||{});function Nq(n,e){n.events.pipe(kt(t=>t instanceof Ui||t instanceof ri||t instanceof Vu||t instanceof Hs),ee(t=>t instanceof Ui||t instanceof Hs?xu.COMPLETE:(t instanceof ri?t.code===Tn.Redirect||t.code===Tn.SupersededByNewNavigation:!1)?xu.REDIRECTING:xu.FAILED),kt(t=>t!==xu.REDIRECTING),zr(1)).subscribe(()=>{e()})}function Pq(n){throw n}var kq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Oq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},lw=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=q(cf),this.stateManager=q(Yx),this.options=q(ow,{optional:!0})||{},this.pendingTasks=q(Fs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=q(Sq),this.urlSerializer=q(tw),this.location=q(Du),this.urlHandlingStrategy=q(uw),this._events=new Je,this.errorHandler=this.options.errorHandler||Pq,this.navigated=!1,this.routeReuseStrategy=q(Mq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=q(cw,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!q(iw,{optional:!0}),this.eventsSubscription=new at,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ri&&i.code!==Tn.Redirect&&i.code!==Tn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ui)this.navigated=!0;else if(i instanceof va){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=G({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Aq(s.source)},a);this.scheduleNavigation(c,Nu,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}Vq(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Nu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=G({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(aw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=G(G({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let m=s?s.snapshot:this.routerState.snapshot.root;g=kx(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return Ox(g,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=zs(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Nu,null,i)}navigate(r,i={skipLocationChange:!1}){return Fq(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=G({},kq):i===!1?s=G({},Oq):s=i,zs(r))return yx(this.currentUrlTree,r,s);let o=this.parseUrl(r);return yx(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((g,m)=>{c=g,l=m});let f=this.pendingTasks.add();return Nq(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Fq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}function Vq(n){return!(n instanceof Lu)&&!(n instanceof va)}var Ea=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.onChanges=new Je,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(d=>{d instanceof Ui&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(zs(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:EA(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.routerLinkInput===null?null:zs(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(ae(lw),ae(nr),Rv("tabindex"),ae(Oi),ae(Qr),ae(la))},e.\u0275dir=St({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Fi("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&vu("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Jr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Jr],replaceUrl:[2,"replaceUrl","replaceUrl",Jr],routerLink:"routerLink"},standalone:!0,features:[e_,Ri]});let n=e;return n})();var Lq=new Q("");function Zx(n,...e){return Jn([{provide:cw,multi:!0,useValue:n},[],{provide:nr,useFactory:jq,deps:[lw]},{provide:ua,multi:!0,useFactory:Uq},e.map(t=>t.\u0275providers)])}function jq(n){return n.routerState.root}function Uq(){let n=q(dn);return e=>{let t=n.get(Er);if(e!==t.components[0])return;let r=n.get(lw),i=n.get(Bq);n.get($q)===1&&r.initialNavigation(),n.get(qq,null,ye.Optional)?.setUpPreloading(),n.get(Lq,null,ye.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Bq=new Q("",{factory:()=>new Je}),$q=new Q("",{providedIn:"root",factory:()=>1});var qq=new Q("");var aR=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ae(Oi),ae(Qr))},e.\u0275dir=St({type:e});let n=e;return n})(),zq=(()=>{let e=class e extends aR{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Os(e)))(s||e)}})(),e.\u0275dir=St({type:e,features:[wr]});let n=e;return n})(),cR=new Q("");var Hq={provide:cR,useExisting:xi(()=>tp),multi:!0};function Gq(){let n=Ir()?Ir().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Wq=new Q(""),tp=(()=>{let e=class e extends aR{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Gq())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ae(Oi),ae(Qr),ae(Wq,8))},e.\u0275dir=St({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Fi("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[ca([Hq]),wr]});let n=e;return n})();function uR(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var np=new Q(""),lR=new Q(""),Kq=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function Qq(n){return uR(n.value)?{required:!0}:null}function Yq(n){return uR(n.value)||Kq.test(n.value)?null:{email:!0}}function Xx(n){return null}function dR(n){return n!=null}function hR(n){return Ls(n)?Re(n):n}function fR(n){let e={};return n.forEach(t=>{e=t!=null?G(G({},e),t):e}),Object.keys(e).length===0?null:e}function pR(n,e){return e.map(t=>t(n))}function Zq(n){return!n.validate}function gR(n){return n.map(e=>Zq(e)?e:t=>e.validate(t))}function Jq(n){if(!n)return null;let e=n.filter(dR);return e.length==0?null:function(t){return fR(pR(t,e))}}function hw(n){return n!=null?Jq(gR(n)):null}function Xq(n){if(!n)return null;let e=n.filter(dR);return e.length==0?null:function(t){let r=pR(t,e).map(hR);return ty(r).pipe(ee(fR))}}function fw(n){return n!=null?Xq(gR(n)):null}function eR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function e4(n){return n._rawValidators}function t4(n){return n._rawAsyncValidators}function dw(n){return n?Array.isArray(n)?n:[n]:[]}function Qf(n,e){return Array.isArray(n)?n.includes(e):n===e}function tR(n,e){let t=dw(e);return dw(n).forEach(i=>{Qf(t,i)||t.push(i)}),t}function nR(n,e){return dw(e).filter(t=>!Qf(n,t))}var Yf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ba=class extends Yf{get formDirective(){return null}get path(){return null}},Zu=class extends Yf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Zf=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},n4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},cJ=De(G({},n4),{"[class.ng-submitted]":"isSubmitted"}),mR=(()=>{let e=class e extends Zf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ae(Zu,2))},e.\u0275dir=St({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&rf("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[wr]});let n=e;return n})(),yR=(()=>{let e=class e extends Zf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ae(ba,10))},e.\u0275dir=St({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&rf("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[wr]});let n=e;return n})();var Gu="VALID",Kf="INVALID",Ia="PENDING",Wu="DISABLED",Ca=class{},Jf=class extends Ca{constructor(e,t){super(),this.value=e,this.source=t}},Qu=class extends Ca{constructor(e,t){super(),this.pristine=e,this.source=t}},Yu=class extends Ca{constructor(e,t){super(),this.touched=e,this.source=t}},Da=class extends Ca{constructor(e,t){super(),this.status=e,this.source=t}};function vR(n){return(rp(n)?n.validators:n)||null}function r4(n){return Array.isArray(n)?hw(n):n||null}function _R(n,e){return(rp(e)?e.asyncValidators:n)||null}function i4(n){return Array.isArray(n)?fw(n):n||null}function rp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function s4(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[t])throw new j(1001,"")}function o4(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new j(1002,"")})}var Xf=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Iu(()=>this.statusReactive()),this.statusReactive=mu(void 0),this._pristine=Iu(()=>this.pristineReactive()),this.pristineReactive=mu(!0),this._touched=Iu(()=>this.touchedReactive()),this.touchedReactive=mu(!1),this._events=new Je,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Xr(this.statusReactive)}set status(e){Xr(()=>this.statusReactive.set(e))}get valid(){return this.status===Gu}get invalid(){return this.status===Kf}get pending(){return this.status==Ia}get disabled(){return this.status===Wu}get enabled(){return this.status!==Wu}get pristine(){return Xr(this.pristineReactive)}set pristine(e){Xr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Xr(this.touchedReactive)}set touched(e){Xr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nR(e,this._rawAsyncValidators))}hasValidator(e){return Qf(this._rawValidators,e)}hasAsyncValidator(e){return Qf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(De(G({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Yu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Yu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(De(G({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Qu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Qu(!0,r))}markAsPending(e={}){this.status=Ia;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Da(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(De(G({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Wu,this.errors=null,this._forEachChild(i=>{i.disable(De(G({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Jf(this.value,r)),this._events.next(new Da(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(De(G({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Gu,this._forEachChild(r=>{r.enable(De(G({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(De(G({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gu||this.status===Ia)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Jf(this.value,t)),this._events.next(new Da(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(De(G({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wu:Gu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ia,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=hR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Da(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new yt,this.statusChanges=new yt}_calculateStatus(){return this._allControlsDisabled()?Wu:this.errors?Kf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ia)?Ia:this._anyControlsHaveStatus(Kf)?Kf:Gu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Qu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Yu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=r4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=i4(this._rawAsyncValidators)}},ep=class extends Xf{constructor(e,t,r){super(vR(t),_R(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){o4(this,!0,e),Object.keys(e).forEach(r=>{s4(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var pw=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>gw}),gw="always";function a4(n,e){return[...e.path,n]}function wR(n,e,t=gw){ER(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),u4(n,e),d4(n,e),l4(n,e),c4(n,e)}function rR(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function c4(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function ER(n,e){let t=e4(n);e.validator!==null?n.setValidators(eR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=t4(n);e.asyncValidator!==null?n.setAsyncValidators(eR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();rR(e._rawValidators,i),rR(e._rawAsyncValidators,i)}function u4(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&IR(n,e)})}function l4(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&IR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function IR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function d4(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function h4(n,e){n==null,ER(n,e)}function f4(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function p4(n){return Object.getPrototypeOf(n.constructor)===zq}function g4(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function m4(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===tp?t=s:p4(s)?r=s:i=s}),i||r||t||null}var y4={provide:ba,useExisting:xi(()=>mw)},Ku=Promise.resolve(),mw=(()=>{let e=class e extends ba{get submitted(){return Xr(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Iu(()=>this.submittedReactive()),this.submittedReactive=mu(!1),this._directives=new Set,this.ngSubmit=new yt,this.form=new ep({},hw(r),fw(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Ku.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),wR(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Ku.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Ku.then(()=>{let i=this._findContainer(r.path),s=new ep({});h4(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Ku.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Ku.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),g4(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(ae(np,10),ae(lR,10),ae(pw,8))},e.\u0275dir=St({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Fi("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ca([y4]),wr]});let n=e;return n})();function iR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function sR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var v4=class extends Xf{constructor(e=null,t,r){super(vR(t),_R(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(sR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _4={provide:Zu,useExisting:xi(()=>yw)},oR=Promise.resolve(),yw=(()=>{let e=class e extends Zu{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new v4,this._registered=!1,this.name="",this.update=new yt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=m4(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),f4(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){wR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){oR.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Jr(i);oR.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?a4(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(ae(ba,9),ae(np,10),ae(lR,10),ae(cR,10),ae(js,8),ae(pw,8))},e.\u0275dir=St({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ca([_4]),wr,Ri]});let n=e;return n})(),DR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=St({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var bR=(()=>{let e=class e{constructor(){this._validator=Xx}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Xx,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=St({type:e,features:[Ri]});let n=e;return n})();var w4={provide:np,useExisting:xi(()=>vw),multi:!0};var vw=(()=>{let e=class e extends bR{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Jr,this.createValidator=r=>Qq}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Os(e)))(s||e)}})(),e.\u0275dir=St({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&vu("required",s._enabled?"":null)},inputs:{required:"required"},features:[ca([w4]),wr]});let n=e;return n})();var E4={provide:np,useExisting:xi(()=>_w),multi:!0},_w=(()=>{let e=class e extends bR{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=Jr,this.createValidator=r=>Yq}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Os(e)))(s||e)}})(),e.\u0275dir=St({type:e,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[ca([E4]),wr]});let n=e;return n})();var I4=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=en({type:e}),e.\u0275inj=Xt({});let n=e;return n})();var ip=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:pw,useValue:r.callSetDisabledState??gw}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=en({type:e}),e.\u0275inj=Xt({imports:[I4]});let n=e;return n})();var b4="firebase",C4="10.13.1";Wt(b4,C4,"app");var rr=new Kr("ANGULARFIRE2_VERSION");function Ew(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ju=(n,e)=>{let t=e?[e]:vd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},br=class{constructor(){return Ju(T4)}},T4="app-check";function Ta(){}var sp=class{zone;delegate;constructor(e,t=Jm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},ww=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ta,{},Ta,Ta)),t.pipe(dt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},si=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new sp(Zone.current)),this.insideAngular=t.run(()=>new sp(Zone.current,Hc)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)($(_e))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function op(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function S4(n){return op().ngZone.runOutsideAngular(()=>n())}function Gs(n){return op().ngZone.run(()=>n())}function nn(n){return A4(op())(n)}function A4(n){return function(t){return t=t.lift(new ww(n.ngZone)),t.pipe(Pn(n.outsideAngular),mn(n.insideAngular))}}var M4=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Gs(()=>n.apply(void 0,r))},Xu=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Gs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ta,{},Ta,Ta))),r[s]=M4(r[s],t));let i=S4(()=>n.apply(this,r));if(!e)if(i instanceof pe){let s=op();return i.pipe(Pn(s.outsideAngular),mn(s.insideAngular))}else return Gs(()=>i);return i instanceof pe?i.pipe(nn):i instanceof Promise?Gs(()=>new Promise((s,o)=>i.then(a=>Gs(()=>s(a)),a=>Gs(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Gs(()=>i)};var x4="firebase",R4="10.13.1";Kt.registerVersion(x4,R4,"app-compat");var P4=["ngOnDestroy"],SR=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(P4.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,f),f})})})});var ap=class{constructor(e){return e}},Sa=new Q("angularfire2.app.options"),Aa=new Q("angularfire2.app.name");function el(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let o=Kt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Kt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;k4("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ap(o)}var k4=(n,...e)=>{s_()&&typeof console<"u"&&console[n](...e)},O4={provide:ap,useFactory:el,deps:[Sa,_e,[new En,Aa]]},Iw=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Sa,useValue:t},{provide:Aa,useValue:r}]}}constructor(t){Kt.registerVersion("angularfire",rr.full,"core"),Kt.registerVersion("angularfire",rr.full,"app-compat"),Kt.registerVersion("angular",af.full,t.toString())}static \u0275fac=function(r){return new(r||n)($(Rt))};static \u0275mod=en({type:n});static \u0275inj=Xt({providers:[O4]})}return n})();function cp(n,e,t,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return F4(i,o)||(TR("error",`${e} was already initialized on the ${t} Firebase App with different settings.${V4?" You may need to reload as Firebase is not HMR aware.":""}`),TR("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function F4(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var V4=typeof module<"u"&&!!module.hot,TR=(n,...e)=>{s_()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var L4=n=>["/post",n];function j4(n,e){n&1&&(V(0,"small",9),B(1,"Featured"),k())}function U4(n,e){if(n&1&&(V(0,"div",1),Ne(1,"img",2),V(2,"div",3)(3,"small",4),B(4),k(),vt(5,j4,2,0,"small",5),V(6,"small",6),B(7),k(),V(8,"h3",7),B(9),k(),V(10,"p"),B(11),k(),V(12,"small",8),B(13),sf(14,"date"),k()()()),n&2){let t=aa();Me("routerLink",wu(10,L4,t.postData.id)),de(),_u("src",t.postData.data.postImgPath,gu),de(3),Ln(t.postData.data.category.category),de(),Me("ngIf",t.postData.data.isFeatured),de(2),Vi("Views - ",t.postData.data.views,""),de(2),Ln(t.postData.data.title),de(2),Ln(t.postData.data.excerpt),de(2),Vi("Last Updated - ",of(14,8,t.postData.data.createdAt.toMillis()),"")}}var Ma=(()=>{let e=class e{constructor(){}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Oe({type:e,selectors:[["app-post-card"]],inputs:{postData:"postData"},standalone:!0,features:[Fe],decls:1,vars:1,consts:[["class","card shadow-effect",3,"routerLink",4,"ngIf"],[1,"card","shadow-effect",3,"routerLink"],["alt","post-image",1,"card-img-top",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success text-center ml-3",4,"ngIf"],[1,"bg-light","text-info","text-center","ml-3"],[1,"mt-1"],[1,"bg-light","text-warning","text-center","ml-3"],[1,"bg-light","text-success","text-center","ml-3"]],template:function(i,s){i&1&&vt(0,U4,15,12,"div",0),i&2&&Me("ngIf",s.postData)},dependencies:[fn,da,Cf,Ea],styles:[".card[_ngcontent-%COMP%]{max-width:400px;min-height:550px}"]});let n=e;return n})();var Ws=class{constructor(e){return e}},tl=class{constructor(){return vd()}};function B4(n){return n&&n.length===1?n[0]:new Ws(jc())}var Dw=new Q("angularfire2._apps"),$4={provide:Ws,useFactory:B4,deps:[[new En,Dw]]},q4={provide:tl,deps:[[new En,Dw]]};function z4(n){return(e,t)=>{let r=t.get(Rt);Wt("angularfire",rr.full,"core"),Wt("angularfire",rr.full,"app"),Wt("angular",af.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Ws(i)}}function AR(n,...e){return Jn([$4,q4,{provide:Dw,useFactory:z4(n),multi:!0,deps:[_e,dn,si,...e]}])}var MR=Xu(aC,!0);var H4=new Map,G4={activated:!1,tokenObservers:[]},W4={initialized:!1,enabled:!1};function ir(n){return H4.get(n)||Object.assign({},G4)}function kR(){return W4}var K4="https://content-firebaseappcheck.googleapis.com/v1";var Q4="exchangeDebugToken",xR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},QJ=24*60*60*1e3;var Cw=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Nm,this.pending.promise.catch(t=>{}),yield Y4(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Nm,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Y4(n){return new Promise(e=>{setTimeout(e,n)})}var Z4={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},$i=new sC("appCheck","AppCheck",Z4);function OR(n){if(!ir(n).activated)throw $i.create("use-before-activation",{appName:n.name})}function FR(r,i){return N(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(m){throw $i.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw $i.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw $i.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw $i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function VR(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${K4}/projects/${t}/apps/${r}:${Q4}?key=${i}`,body:{debug_token:e}}}var J4="firebase-app-check-database",X4=1,Tw="firebase-app-check-store";var up=null;function ez(){return up||(up=new Promise((n,e)=>{try{let t=indexedDB.open(J4,X4);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e($i.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Tw,{keyPath:"compositeKey"})}}}catch(t){e($i.create("storage-open",{originalErrorMessage:t?.message}))}}),up)}function tz(n,e){return nz(rz(n),e)}function nz(n,e){return N(this,null,function*(){let r=(yield ez()).transaction(Tw,"readwrite"),s=r.objectStore(Tw).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a($i.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function rz(n){return`${n.options.appId}-${n.name}`}var Sw=new yd("@firebase/app-check");function bw(n,e){return md()?tz(n,e).catch(t=>{Sw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function LR(){return kR().enabled}function jR(){return N(this,null,function*(){let n=kR();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var iz={error:"UNKNOWN_ERROR"};function sz(n){return tC.encodeString(JSON.stringify(n),!1)}function Aw(n,e=!1){return N(this,null,function*(){let t=n.app;OR(t);let r=ir(t),i=r.token,s;if(i&&!nl(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(nl(c)?i=c:yield bw(t,void 0))}if(!e&&i&&nl(i))return{token:i.token};let o=!1;if(LR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=FR(VR(t,yield jR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield bw(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield ir(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Sw.warn(c.message):Sw.error(c),s=c}let a;return i?s?nl(i)?a={token:i.token,internalError:s}:a=NR(s):(a={token:i.token},r.token=i,yield bw(t,i)):a=NR(s),o&&uz(t,a),a})}function oz(n){return N(this,null,function*(){let e=n.app;OR(e);let{provider:t}=ir(e);if(LR()){let r=yield jR(),{token:i}=yield FR(VR(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function az(n,e,t,r){let{app:i}=n,s=ir(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&nl(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),RR(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>RR(n))}function UR(n,e){let t=ir(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function RR(n){let{app:e}=n,t=ir(e),r=t.tokenRefresher;r||(r=cz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function cz(n){let{app:e}=n;return new Cw(()=>N(this,null,function*(){let t=ir(e),r;if(t.token?r=yield Aw(n,!0):r=yield Aw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ir(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},xR.RETRIAL_MIN_WAIT,xR.RETRIAL_MAX_WAIT)}function uz(n,e){let t=ir(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function nl(n){return n.expireTimeMillis-Date.now()>0}function NR(n){return{token:sz(iz),error:n}}var Mw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ir(this.app);for(let t of e)UR(this.app,t.next);return Promise.resolve()}};function lz(n,e){return new Mw(n,e)}function dz(n){return{getToken:e=>Aw(n,e),getLimitedUseToken:()=>oz(n),addTokenListener:e=>az(n,"INTERNAL",e),removeTokenListener:e=>UR(n.app,e)}}var hz="@firebase/app-check",fz="0.8.7";var pz="app-check",PR="app-check-internal";function gz(){Lc(new gs(pz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return lz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(PR).initialize()})),Lc(new gs(PR,n=>{let e=n.getProvider("app-check").getImmediate();return dz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Wt(hz,fz)}gz();var mz=["localhost","0.0.0.0","127.0.0.1"],aX=typeof window<"u"&&mz.includes(window.location.hostname);var xw=new Q("angularfire2.auth.use-emulator"),Rw=new Q("angularfire2.auth.settings"),Nw=new Q("angularfire2.auth.tenant-id"),Pw=new Q("angularfire2.auth.langugage-code"),kw=new Q("angularfire2.auth.use-device-language"),Ow=new Q("angularfire.auth.persistence"),Fw=(n,e,t,r,i,s,o,a)=>cp(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[l,d]of Object.entries(o))c.settings[l]=d;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]),$R=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,l,d,f,g,m){let _=new Je,D=ie(void 0).pipe(mn(o.outsideAngular),ct(()=>s.runOutsideAngular(()=>import("./chunk-7YJ2LAOO.js"))),ee(()=>el(t,s,r)),ee(T=>Fw(T,s,a,l,d,f,c,g)),Zd({bufferSize:1,refCount:!1}));if(ni(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ie(null);else{D.pipe(yn()).subscribe();let T=D.pipe(ct(P=>P.getRedirectResult().then(z=>z,()=>null)),nn,Zd({bufferSize:1,refCount:!1})),O=D.pipe(ct(P=>new pe(z=>({unsubscribe:s.runOutsideAngular(()=>P.onAuthStateChanged(ne=>z.next(ne),ne=>z.error(ne),()=>z.complete()))})))),U=D.pipe(ct(P=>new pe(z=>({unsubscribe:s.runOutsideAngular(()=>P.onIdTokenChanged(ne=>z.next(ne),ne=>z.error(ne),()=>z.complete()))}))));this.authState=T.pipe(Jd(O),Pn(o.outsideAngular),mn(o.insideAngular)),this.user=T.pipe(Jd(U),Pn(o.outsideAngular),mn(o.insideAngular)),this.idToken=this.user.pipe(ct(P=>P?Re(P.getIdToken()):ie(null))),this.idTokenResult=this.user.pipe(ct(P=>P?Re(P.getIdTokenResult()):ie(null))),this.credential=ny(T,_,this.authState.pipe(kt(P=>!P))).pipe(ee(P=>P?.user?P:null),Pn(o.outsideAngular),mn(o.insideAngular))}return SR(this,D,s,{spy:{apply:(T,O,U)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&U.then(P=>_.next(P))}}})}static \u0275fac=function(r){return new(r||n)($(Sa),$(Aa,8),$(Rt),$(_e),$(si),$(xw,8),$(Rw,8),$(Nw,8),$(Pw,8),$(kw,8),$(Ow,8),$(br,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var qR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zR={};var qi,Vw;(function(){var n;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(b,C,A){for(var E=Array(arguments.length-2),Rn=2;Rn<arguments.length;Rn++)E[Rn-2]=arguments[Rn];return v.prototype[C].apply(b,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var b=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)b[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)b[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],C=I.g[2];var A=I.g[3],E=v+(A^w&(C^A))+b[0]+3614090360&4294967295;v=w+(E<<7&4294967295|E>>>25),E=A+(C^v&(w^C))+b[1]+3905402710&4294967295,A=v+(E<<12&4294967295|E>>>20),E=C+(w^A&(v^w))+b[2]+606105819&4294967295,C=A+(E<<17&4294967295|E>>>15),E=w+(v^C&(A^v))+b[3]+3250441966&4294967295,w=C+(E<<22&4294967295|E>>>10),E=v+(A^w&(C^A))+b[4]+4118548399&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(C^v&(w^C))+b[5]+1200080426&4294967295,A=v+(E<<12&4294967295|E>>>20),E=C+(w^A&(v^w))+b[6]+2821735955&4294967295,C=A+(E<<17&4294967295|E>>>15),E=w+(v^C&(A^v))+b[7]+4249261313&4294967295,w=C+(E<<22&4294967295|E>>>10),E=v+(A^w&(C^A))+b[8]+1770035416&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(C^v&(w^C))+b[9]+2336552879&4294967295,A=v+(E<<12&4294967295|E>>>20),E=C+(w^A&(v^w))+b[10]+4294925233&4294967295,C=A+(E<<17&4294967295|E>>>15),E=w+(v^C&(A^v))+b[11]+2304563134&4294967295,w=C+(E<<22&4294967295|E>>>10),E=v+(A^w&(C^A))+b[12]+1804603682&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(C^v&(w^C))+b[13]+4254626195&4294967295,A=v+(E<<12&4294967295|E>>>20),E=C+(w^A&(v^w))+b[14]+2792965006&4294967295,C=A+(E<<17&4294967295|E>>>15),E=w+(v^C&(A^v))+b[15]+1236535329&4294967295,w=C+(E<<22&4294967295|E>>>10),E=v+(C^A&(w^C))+b[1]+4129170786&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^C&(v^w))+b[6]+3225465664&4294967295,A=v+(E<<9&4294967295|E>>>23),E=C+(v^w&(A^v))+b[11]+643717713&4294967295,C=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(C^A))+b[0]+3921069994&4294967295,w=C+(E<<20&4294967295|E>>>12),E=v+(C^A&(w^C))+b[5]+3593408605&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^C&(v^w))+b[10]+38016083&4294967295,A=v+(E<<9&4294967295|E>>>23),E=C+(v^w&(A^v))+b[15]+3634488961&4294967295,C=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(C^A))+b[4]+3889429448&4294967295,w=C+(E<<20&4294967295|E>>>12),E=v+(C^A&(w^C))+b[9]+568446438&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^C&(v^w))+b[14]+3275163606&4294967295,A=v+(E<<9&4294967295|E>>>23),E=C+(v^w&(A^v))+b[3]+4107603335&4294967295,C=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(C^A))+b[8]+1163531501&4294967295,w=C+(E<<20&4294967295|E>>>12),E=v+(C^A&(w^C))+b[13]+2850285829&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^C&(v^w))+b[2]+4243563512&4294967295,A=v+(E<<9&4294967295|E>>>23),E=C+(v^w&(A^v))+b[7]+1735328473&4294967295,C=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(C^A))+b[12]+2368359562&4294967295,w=C+(E<<20&4294967295|E>>>12),E=v+(w^C^A)+b[5]+4294588738&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^C)+b[8]+2272392833&4294967295,A=v+(E<<11&4294967295|E>>>21),E=C+(A^v^w)+b[11]+1839030562&4294967295,C=A+(E<<16&4294967295|E>>>16),E=w+(C^A^v)+b[14]+4259657740&4294967295,w=C+(E<<23&4294967295|E>>>9),E=v+(w^C^A)+b[1]+2763975236&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^C)+b[4]+1272893353&4294967295,A=v+(E<<11&4294967295|E>>>21),E=C+(A^v^w)+b[7]+4139469664&4294967295,C=A+(E<<16&4294967295|E>>>16),E=w+(C^A^v)+b[10]+3200236656&4294967295,w=C+(E<<23&4294967295|E>>>9),E=v+(w^C^A)+b[13]+681279174&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^C)+b[0]+3936430074&4294967295,A=v+(E<<11&4294967295|E>>>21),E=C+(A^v^w)+b[3]+3572445317&4294967295,C=A+(E<<16&4294967295|E>>>16),E=w+(C^A^v)+b[6]+76029189&4294967295,w=C+(E<<23&4294967295|E>>>9),E=v+(w^C^A)+b[9]+3654602809&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^C)+b[12]+3873151461&4294967295,A=v+(E<<11&4294967295|E>>>21),E=C+(A^v^w)+b[15]+530742520&4294967295,C=A+(E<<16&4294967295|E>>>16),E=w+(C^A^v)+b[2]+3299628645&4294967295,w=C+(E<<23&4294967295|E>>>9),E=v+(C^(w|~A))+b[0]+4096336452&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~C))+b[7]+1126891415&4294967295,A=v+(E<<10&4294967295|E>>>22),E=C+(v^(A|~w))+b[14]+2878612391&4294967295,C=A+(E<<15&4294967295|E>>>17),E=w+(A^(C|~v))+b[5]+4237533241&4294967295,w=C+(E<<21&4294967295|E>>>11),E=v+(C^(w|~A))+b[12]+1700485571&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~C))+b[3]+2399980690&4294967295,A=v+(E<<10&4294967295|E>>>22),E=C+(v^(A|~w))+b[10]+4293915773&4294967295,C=A+(E<<15&4294967295|E>>>17),E=w+(A^(C|~v))+b[1]+2240044497&4294967295,w=C+(E<<21&4294967295|E>>>11),E=v+(C^(w|~A))+b[8]+1873313359&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~C))+b[15]+4264355552&4294967295,A=v+(E<<10&4294967295|E>>>22),E=C+(v^(A|~w))+b[6]+2734768916&4294967295,C=A+(E<<15&4294967295|E>>>17),E=w+(A^(C|~v))+b[13]+1309151649&4294967295,w=C+(E<<21&4294967295|E>>>11),E=v+(C^(w|~A))+b[4]+4149444226&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~C))+b[11]+3174756917&4294967295,A=v+(E<<10&4294967295|E>>>22),E=C+(v^(A|~w))+b[2]+718787259&4294967295,C=A+(E<<15&4294967295|E>>>17),E=w+(A^(C|~v))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(C+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,b=this.B,C=this.h,A=0;A<v;){if(C==0)for(;A<=w;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<v;)if(b[C++]=I.charCodeAt(A++),C==this.blockSize){i(this,b),C=0;break}}else for(;A<v;)if(b[C++]=I[A++],C==this.blockSize){i(this,b),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var b=0;32>b;b+=8)I[w++]=this.g[v]>>>b&255;return I};function s(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function o(I,v){this.h=v;for(var w=[],b=!0,C=I.length-1;0<=C;C--){var A=I[C]|0;b&&A==v||(w[C]=A,b=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return T(l(-I));for(var v=[],w=1,b=0;I>=w;b++)v[b]=I/w|0,w*=4294967296;return new o(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return T(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),b=f,C=0;C<I.length;C+=8){var A=Math.min(8,I.length-C),E=parseInt(I.substring(C,C+A),v);8>A?(A=l(Math.pow(v,A)),b=b.j(A).add(l(E))):(b=b.j(w),b=b.add(l(E)))}return b}var f=c(0),g=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(D(this))return-T(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var b=this.i(w);I+=(0<=b?b:4294967296+b)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(D(this))return"-"+T(this).toString(I);for(var v=l(Math.pow(I,6)),w=this,b="";;){var C=z(w,v).g;w=O(w,C.j(v));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=C,_(w))return A+b;for(;6>A.length;)A="0"+A;b=A+b}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function D(I){return I.h==-1}n.l=function(I){return I=O(this,I),D(I)?-1:_(I)?0:1};function T(I){for(var v=I.g.length,w=[],b=0;b<v;b++)w[b]=~I.g[b];return new o(w,~I.h).add(g)}n.abs=function(){return D(this)?T(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],b=0,C=0;C<=v;C++){var A=b+(this.i(C)&65535)+(I.i(C)&65535),E=(A>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);b=E>>>16,A&=65535,E&=65535,w[C]=E<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function O(I,v){return I.add(T(v))}n.j=function(I){if(_(this)||_(I))return f;if(D(this))return D(I)?T(this).j(T(I)):T(T(this).j(I));if(D(I))return T(this.j(T(I)));if(0>this.l(m)&&0>I.l(m))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],b=0;b<2*v;b++)w[b]=0;for(b=0;b<this.g.length;b++)for(var C=0;C<I.g.length;C++){var A=this.i(b)>>>16,E=this.i(b)&65535,Rn=I.i(C)>>>16,mi=I.i(C)&65535;w[2*b+2*C]+=E*mi,U(w,2*b+2*C),w[2*b+2*C+1]+=A*mi,U(w,2*b+2*C+1),w[2*b+2*C+1]+=E*Rn,U(w,2*b+2*C+1),w[2*b+2*C+2]+=A*Rn,U(w,2*b+2*C+2)}for(b=0;b<v;b++)w[b]=w[2*b+1]<<16|w[2*b];for(b=v;b<2*v;b++)w[b]=0;return new o(w,0)};function U(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function P(I,v){this.g=I,this.h=v}function z(I,v){if(_(v))throw Error("division by zero");if(_(I))return new P(f,f);if(D(I))return v=z(T(I),v),new P(T(v.g),T(v.h));if(D(v))return v=z(I,T(v)),new P(T(v.g),v.h);if(30<I.g.length){if(D(I)||D(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,b=v;0>=b.l(I);)w=ne(w),b=ne(b);var C=Z(w,1),A=Z(b,1);for(b=Z(b,2),w=Z(w,2);!_(b);){var E=A.add(b);0>=E.l(I)&&(C=C.add(w),A=E),b=Z(b,1),w=Z(w,1)}return v=O(I,C.j(v)),new P(C,v)}for(C=f;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),b=Math.ceil(Math.log(w)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),A=l(w),E=A.j(v);D(E)||0<E.l(I);)w-=b,A=l(w),E=A.j(v);_(A)&&(A=g),C=C.add(A),I=O(I,E)}return new P(C,I)}n.A=function(I){return z(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],b=0;b<v;b++)w[b]=this.i(b)&I.i(b);return new o(w,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],b=0;b<v;b++)w[b]=this.i(b)|I.i(b);return new o(w,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],b=0;b<v;b++)w[b]=this.i(b)^I.i(b);return new o(w,this.h^I.h)};function ne(I){for(var v=I.g.length+1,w=[],b=0;b<v;b++)w[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(w,I.h)}function Z(I,v){var w=v>>5;v%=32;for(var b=I.g.length-w,C=[],A=0;A<b;A++)C[A]=0<v?I.i(A+w)>>>v|I.i(A+w+1)<<32-v:I.i(A+w);return new o(C,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Vw=zR.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,qi=zR.Integer=o}).apply(typeof qR<"u"?qR:typeof self<"u"?self:typeof window<"u"?window:{});var lp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oi={};var Lw,jw,xa,Uw,rl,dp,Bw,$w,qw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof lp=="object"&&lp];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var y=0;y<u.length-1;y++){var S=u[y];if(!(S in p))break e;p=p[S]}u=u[u.length-1],y=p[u],h=h(y),h!=y&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,y=!1,S={next:function(){if(!y&&p<u.length){var R=p++;return{value:h(R,u[R]),done:!1}}return y=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,y),u.apply(h,S)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function _(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(y,S,R){for(var H=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)H[Ue-2]=arguments[Ue];return h.prototype[S].apply(y,H)}}function D(u){let h=u.length;if(0<h){let p=Array(h);for(let y=0;y<h;y++)p[y]=u[y];return p}return[]}function T(u,h){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(c(y)){let S=u.length||0,R=y.length||0;u.length=S+R;for(let H=0;H<R;H++)u[S+H]=y[H]}else u.push(y)}}class O{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function U(u){return/^[\s\xa0]*$/.test(u)}function P(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function z(u){return z[" "](u),u}z[" "]=function(){};var ne=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function Z(u,h,p){for(let y in u)h.call(p,u[y],y,u)}function I(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,h){let p,y;for(let S=1;S<arguments.length;S++){y=arguments[S];for(p in y)u[p]=y[p];for(let R=0;R<w.length;R++)p=w[R],Object.prototype.hasOwnProperty.call(y,p)&&(u[p]=y[p])}}function C(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=Ie;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Rn{constructor(){this.h=this.g=null}add(h,p){let y=mi.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var mi=new O(()=>new J,u=>u.reset());class J{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let re,oe=!1,Ie=new Rn,lt=()=>{let u=a.Promise.resolve(void 0);re=()=>{u.then(Nn)}};var Nn=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){A(p)}var h=mi;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}oe=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function We(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var Ke=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function yi(u,h){if(We.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(ne){e:{try{z(h.nodeName);var S=!0;break e}catch{}S=!1}S||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:om[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&yi.aa.h.call(this)}}_(yi,We);var om={2:"touch",3:"pen",4:"mouse"};yi.prototype.h=function(){yi.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),Lr=0;function an(u,h,p,y,S){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=S,this.key=++Lr,this.da=this.fa=!1}function jr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function vi(u){this.src=u,this.g={},this.h=0}vi.prototype.add=function(u,h,p,y,S){var R=u.toString();u=this.g[R],u||(u=this.g[R]=[],this.h++);var H=cm(u,h,y,S);return-1<H?(h=u[H],p||(h.fa=!1)):(h=new an(h,this.src,R,!!y,S),h.fa=p,u.push(h)),h};function am(u,h){var p=h.type;if(p in u.g){var y=u.g[p],S=Array.prototype.indexOf.call(y,h,void 0),R;(R=0<=S)&&Array.prototype.splice.call(y,S,1),R&&(jr(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function cm(u,h,p,y){for(var S=0;S<u.length;++S){var R=u[S];if(!R.da&&R.listener==h&&R.capture==!!p&&R.ha==y)return S}return-1}var um="closure_lm_"+(1e6*Math.random()|0),lm={};function J0(u,h,p,y,S){if(y&&y.once)return eb(u,h,p,y,S);if(Array.isArray(h)){for(var R=0;R<h.length;R++)J0(u,h[R],p,y,S);return null}return p=pm(p),u&&u[st]?u.K(h,p,l(y)?!!y.capture:!!y,S):X0(u,h,p,!1,y,S)}function X0(u,h,p,y,S,R){if(!h)throw Error("Invalid event type");var H=l(S)?!!S.capture:!!S,Ue=hm(u);if(Ue||(u[um]=Ue=new vi(u)),p=Ue.add(h,p,y,H,R),p.proxy)return p;if(y=$k(),p.proxy=y,y.src=u,y.listener=p,u.addEventListener)Ke||(S=H),S===void 0&&(S=!1),u.addEventListener(h.toString(),y,S);else if(u.attachEvent)u.attachEvent(nb(h.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function $k(){function u(p){return h.call(u.src,u.listener,p)}let h=qk;return u}function eb(u,h,p,y,S){if(Array.isArray(h)){for(var R=0;R<h.length;R++)eb(u,h[R],p,y,S);return null}return p=pm(p),u&&u[st]?u.L(h,p,l(y)?!!y.capture:!!y,S):X0(u,h,p,!0,y,S)}function tb(u,h,p,y,S){if(Array.isArray(h))for(var R=0;R<h.length;R++)tb(u,h[R],p,y,S);else y=l(y)?!!y.capture:!!y,p=pm(p),u&&u[st]?(u=u.i,h=String(h).toString(),h in u.g&&(R=u.g[h],p=cm(R,p,y,S),-1<p&&(jr(R[p]),Array.prototype.splice.call(R,p,1),R.length==0&&(delete u.g[h],u.h--)))):u&&(u=hm(u))&&(h=u.g[h.toString()],u=-1,h&&(u=cm(h,p,y,S)),(p=-1<u?h[u]:null)&&dm(p))}function dm(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[st])am(h.i,u);else{var p=u.type,y=u.proxy;h.removeEventListener?h.removeEventListener(p,y,u.capture):h.detachEvent?h.detachEvent(nb(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=hm(h))?(am(p,u),p.h==0&&(p.src=null,h[um]=null)):jr(u)}}}function nb(u){return u in lm?lm[u]:lm[u]="on"+u}function qk(u,h){if(u.da)u=!0;else{h=new yi(h,this);var p=u.listener,y=u.ha||u.src;u.fa&&dm(u),u=p.call(y,h)}return u}function hm(u){return u=u[um],u instanceof vi?u:null}var fm="__closure_events_fn_"+(1e9*Math.random()>>>0);function pm(u){return typeof u=="function"?u:(u[fm]||(u[fm]=function(h){return u.handleEvent(h)}),u[fm])}function Lt(){it.call(this),this.i=new vi(this),this.M=this,this.F=null}_(Lt,it),Lt.prototype[st]=!0,Lt.prototype.removeEventListener=function(u,h,p,y){tb(this,u,h,p,y)};function Ht(u,h){var p,y=u.F;if(y)for(p=[];y;y=y.F)p.push(y);if(u=u.M,y=h.type||h,typeof h=="string")h=new We(h,u);else if(h instanceof We)h.target=h.target||u;else{var S=h;h=new We(y,u),b(h,S)}if(S=!0,p)for(var R=p.length-1;0<=R;R--){var H=h.g=p[R];S=Xl(H,y,!0,h)&&S}if(H=h.g=u,S=Xl(H,y,!0,h)&&S,S=Xl(H,y,!1,h)&&S,p)for(R=0;R<p.length;R++)H=h.g=p[R],S=Xl(H,y,!1,h)&&S}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],y=0;y<p.length;y++)jr(p[y]);delete u.g[h],u.h--}}this.F=null},Lt.prototype.K=function(u,h,p,y){return this.i.add(String(u),h,!1,p,y)},Lt.prototype.L=function(u,h,p,y){return this.i.add(String(u),h,!0,p,y)};function Xl(u,h,p,y){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var S=!0,R=0;R<h.length;++R){var H=h[R];if(H&&!H.da&&H.capture==p){var Ue=H.listener,Nt=H.ha||H.src;H.fa&&am(u.i,H),S=Ue.call(Nt,y)!==!1&&S}}return S&&!y.defaultPrevented}function rb(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function ib(u){u.g=rb(()=>{u.g=null,u.i&&(u.i=!1,ib(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class zk extends it{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ib(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dc(u){it.call(this),this.h=u,this.g={}}_(Dc,it);var sb=[];function ob(u){Z(u.g,function(h,p){this.g.hasOwnProperty(p)&&dm(h)},u),u.g={}}Dc.prototype.N=function(){Dc.aa.N.call(this),ob(this)},Dc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gm=a.JSON.stringify,Hk=a.JSON.parse,Gk=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function mm(){}mm.prototype.h=null;function ab(u){return u.h||(u.h=u.i())}function cb(){}var bc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ym(){We.call(this,"d")}_(ym,We);function vm(){We.call(this,"c")}_(vm,We);var ds={},ub=null;function ed(){return ub=ub||new Lt}ds.La="serverreachability";function lb(u){We.call(this,ds.La,u)}_(lb,We);function Cc(u){let h=ed();Ht(h,new lb(h))}ds.STAT_EVENT="statevent";function db(u,h){We.call(this,ds.STAT_EVENT,u),this.stat=h}_(db,We);function Gt(u){let h=ed();Ht(h,new db(h,u))}ds.Ma="timingevent";function hb(u,h){We.call(this,ds.Ma,u),this.size=h}_(hb,We);function Tc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Sc(){this.g=!0}Sc.prototype.xa=function(){this.g=!1};function Wk(u,h,p,y,S,R){u.info(function(){if(u.g)if(R)for(var H="",Ue=R.split("&"),Nt=0;Nt<Ue.length;Nt++){var xe=Ue[Nt].split("=");if(1<xe.length){var jt=xe[0];xe=xe[1];var Ut=jt.split("_");H=2<=Ut.length&&Ut[1]=="type"?H+(jt+"="+xe+"&"):H+(jt+"=redacted&")}}else H=null;else H=R;return"XMLHTTP REQ ("+y+") [attempt "+S+"]: "+h+`
`+p+`
`+H})}function Kk(u,h,p,y,S,R,H){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+S+"]: "+h+`
`+p+`
`+R+" "+H})}function To(u,h,p,y){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+Yk(u,p)+(y?" "+y:"")})}function Qk(u,h){u.info(function(){return"TIMEOUT: "+h})}Sc.prototype.info=function(){};function Yk(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var y=p[u];if(!(2>y.length)){var S=y[1];if(Array.isArray(S)&&!(1>S.length)){var R=S[0];if(R!="noop"&&R!="stop"&&R!="close")for(var H=1;H<S.length;H++)S[H]=""}}}}return gm(p)}catch{return h}}var td={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_m;function nd(){}_(nd,mm),nd.prototype.g=function(){return new XMLHttpRequest},nd.prototype.i=function(){return{}},_m=new nd;function _i(u,h,p,y){this.j=u,this.i=h,this.l=p,this.R=y||1,this.U=new Dc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pb}function pb(){this.i=null,this.g="",this.h=!1}var gb={},wm={};function Em(u,h,p){u.L=1,u.v=od(Ur(h)),u.m=p,u.P=!0,mb(u,null)}function mb(u,h){u.F=Date.now(),rd(u),u.A=Ur(u.v);var p=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),xb(p.i,"t",y),u.C=0,p=u.j.J,u.h=new pb,u.g=Kb(u.j,p?h:null,!u.m),0<u.O&&(u.M=new zk(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,y=u.ca;var S="readystatechange";Array.isArray(S)||(S&&(sb[0]=S.toString()),S=sb);for(var R=0;R<S.length;R++){var H=J0(p,S[R],y||h.handleEvent,!1,h.h||h);if(!H)break;h.g[H.key]=H}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Cc(),Wk(u.i,u.u,u.A,u.l,u.R,u.m)}_i.prototype.ca=function(u){u=u.target;let h=this.M;h&&Br(u)==3?h.j():this.Y(u)},_i.prototype.Y=function(u){try{if(u==this.g)e:{let Ut=Br(this.g);var h=this.g.Ba();let Mo=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||Vb(this.g)))){this.J||Ut!=4||h==7||(h==8||0>=Mo?Cc(3):Cc(2)),Im(this);var p=this.g.Z();this.X=p;t:if(yb(this)){var y=Vb(this.g);u="";var S=y.length,R=Br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hs(this),Ac(this);var H="";break t}this.h.i=new a.TextDecoder}for(h=0;h<S;h++)this.h.h=!0,u+=this.h.i.decode(y[h],{stream:!(R&&h==S-1)});y.length=0,this.h.g+=u,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=p==200,Kk(this.i,this.u,this.A,this.l,this.R,Ut,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Nt=this.g;if((Ue=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Ue)){var xe=Ue;break t}}xe=null}if(p=xe)To(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dm(this,p);else{this.o=!1,this.s=3,Gt(12),hs(this),Ac(this);break e}}if(this.P){p=!0;let Gn;for(;!this.J&&this.C<H.length;)if(Gn=Zk(this,H),Gn==wm){Ut==4&&(this.s=4,Gt(14),p=!1),To(this.i,this.l,null,"[Incomplete Response]");break}else if(Gn==gb){this.s=4,Gt(15),To(this.i,this.l,H,"[Invalid Chunk]"),p=!1;break}else To(this.i,this.l,Gn,null),Dm(this,Gn);if(yb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||H.length!=0||this.h.h||(this.s=1,Gt(16),p=!1),this.o=this.o&&p,!p)To(this.i,this.l,H,"[Invalid Chunked Response]"),hs(this),Ac(this);else if(0<H.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Mm(jt),jt.M=!0,Gt(11))}}else To(this.i,this.l,H,null),Dm(this,H);Ut==4&&hs(this),this.o&&!this.J&&(Ut==4?zb(this.j,this):(this.o=!1,rd(this)))}else pO(this.g),p==400&&0<H.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),hs(this),Ac(this)}}}catch{}finally{}};function yb(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Zk(u,h){var p=u.C,y=h.indexOf(`
`,p);return y==-1?wm:(p=Number(h.substring(p,y)),isNaN(p)?gb:(y+=1,y+p>h.length?wm:(h=h.slice(y,y+p),u.C=y+p,h)))}_i.prototype.cancel=function(){this.J=!0,hs(this)};function rd(u){u.S=Date.now()+u.I,vb(u,u.I)}function vb(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Tc(g(u.ba,u),h)}function Im(u){u.B&&(a.clearTimeout(u.B),u.B=null)}_i.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Qk(this.i,this.A),this.L!=2&&(Cc(),Gt(17)),hs(this),this.s=2,Ac(this)):vb(this,this.S-u)};function Ac(u){u.j.G==0||u.J||zb(u.j,u)}function hs(u){Im(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,ob(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Dm(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||bm(p.h,u))){if(!u.K&&bm(p.h,u)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var S=y;if(S[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)dd(p),ud(p);else break e;Am(p),Gt(18)}}else p.za=S[1],0<p.za-p.T&&37500>S[2]&&p.F&&p.v==0&&!p.C&&(p.C=Tc(g(p.Za,p),6e3));if(1>=Eb(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ps(p,11)}else if((u.K||p.g==u)&&dd(p),!U(h))for(S=p.Da.g.parse(h),h=0;h<S.length;h++){let xe=S[h];if(p.T=xe[0],xe=xe[1],p.G==2)if(xe[0]=="c"){p.K=xe[1],p.ia=xe[2];let jt=xe[3];jt!=null&&(p.la=jt,p.j.info("VER="+p.la));let Ut=xe[4];Ut!=null&&(p.Aa=Ut,p.j.info("SVER="+p.Aa));let Mo=xe[5];Mo!=null&&typeof Mo=="number"&&0<Mo&&(y=1.5*Mo,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let Gn=u.g;if(Gn){let fd=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fd){var R=y.h;R.g||fd.indexOf("spdy")==-1&&fd.indexOf("quic")==-1&&fd.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Cm(R,R.h),R.h=null))}if(y.D){let xm=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;xm&&(y.ya=xm,Qe(y.I,y.D,xm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var H=u;if(y.qa=Wb(y,y.J?y.ia:null,y.W),H.K){Ib(y.h,H);var Ue=H,Nt=y.L;Nt&&(Ue.I=Nt),Ue.B&&(Im(Ue),rd(Ue)),y.g=H}else $b(y);0<p.i.length&&ld(p)}else xe[0]!="stop"&&xe[0]!="close"||ps(p,7);else p.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?ps(p,7):Sm(p):xe[0]!="noop"&&p.l&&p.l.ta(xe),p.v=0)}}Cc(4)}catch{}}var Jk=class{constructor(u,h){this.g=u,this.map=h}};function _b(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wb(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Eb(u){return u.h?1:u.g?u.g.size:0}function bm(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Cm(u,h){u.g?u.g.add(h):u.h=h}function Ib(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}_b.prototype.cancel=function(){if(this.i=Db(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Db(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return D(u.i)}function Xk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,y=0;y<p;y++)h.push(u[y]);return h}h=[],p=0;for(y in u)h[p++]=u[y];return h}function eO(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let y in u)h[p++]=y;return h}}}function bb(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=eO(u),y=Xk(u),S=y.length,R=0;R<S;R++)h.call(void 0,y[R],p&&p[R],u)}var Cb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tO(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var y=u[p].indexOf("="),S=null;if(0<=y){var R=u[p].substring(0,y);S=u[p].substring(y+1)}else R=u[p];h(R,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function fs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fs){this.h=u.h,id(this,u.j),this.o=u.o,this.g=u.g,sd(this,u.s),this.l=u.l;var h=u.i,p=new Rc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Tb(this,p),this.m=u.m}else u&&(h=String(u).match(Cb))?(this.h=!1,id(this,h[1]||"",!0),this.o=Mc(h[2]||""),this.g=Mc(h[3]||"",!0),sd(this,h[4]),this.l=Mc(h[5]||"",!0),Tb(this,h[6]||"",!0),this.m=Mc(h[7]||"")):(this.h=!1,this.i=new Rc(null,this.h))}fs.prototype.toString=function(){var u=[],h=this.j;h&&u.push(xc(h,Sb,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(xc(h,Sb,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(xc(p,p.charAt(0)=="/"?iO:rO,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",xc(p,oO)),u.join("")};function Ur(u){return new fs(u)}function id(u,h,p){u.j=p?Mc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function sd(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function Tb(u,h,p){h instanceof Rc?(u.i=h,aO(u.i,u.h)):(p||(h=xc(h,sO)),u.i=new Rc(h,u.h))}function Qe(u,h,p){u.i.set(h,p)}function od(u){return Qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Mc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function xc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,nO),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Sb=/[#\/\?@]/g,rO=/[#\?:]/g,iO=/[#\?]/g,sO=/[#\?@]/g,oO=/#/g;function Rc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function wi(u){u.g||(u.g=new Map,u.h=0,u.i&&tO(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Rc.prototype,n.add=function(u,h){wi(this),this.i=null,u=So(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function Ab(u,h){wi(u),h=So(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function Mb(u,h){return wi(u),h=So(u,h),u.g.has(h)}n.forEach=function(u,h){wi(this),this.g.forEach(function(p,y){p.forEach(function(S){u.call(h,S,y,this)},this)},this)},n.na=function(){wi(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){let S=u[y];for(let R=0;R<S.length;R++)p.push(h[y])}return p},n.V=function(u){wi(this);let h=[];if(typeof u=="string")Mb(this,u)&&(h=h.concat(this.g.get(So(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return wi(this),this.i=null,u=So(this,u),Mb(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function xb(u,h,p){Ab(u,h),0<p.length&&(u.i=null,u.g.set(So(u,h),D(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];let R=encodeURIComponent(String(y)),H=this.V(y);for(y=0;y<H.length;y++){var S=R;H[y]!==""&&(S+="="+encodeURIComponent(String(H[y]))),u.push(S)}}return this.i=u.join("&")};function So(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function aO(u,h){h&&!u.j&&(wi(u),u.i=null,u.g.forEach(function(p,y){var S=y.toLowerCase();y!=S&&(Ab(this,y),xb(this,S,p))},u)),u.j=h}function cO(u,h){let p=new Sc;if(a.Image){let y=new Image;y.onload=m(Ei,p,"TestLoadImage: loaded",!0,h,y),y.onerror=m(Ei,p,"TestLoadImage: error",!1,h,y),y.onabort=m(Ei,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=m(Ei,p,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else h(!1)}function uO(u,h){let p=new Sc,y=new AbortController,S=setTimeout(()=>{y.abort(),Ei(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:y.signal}).then(R=>{clearTimeout(S),R.ok?Ei(p,"TestPingServer: ok",!0,h):Ei(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(S),Ei(p,"TestPingServer: error",!1,h)})}function Ei(u,h,p,y,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),y(p)}catch{}}function lO(){this.g=new Gk}function dO(u,h,p){let y=p||"";try{bb(u,function(S,R){let H=S;l(S)&&(H=gm(S)),h.push(y+R+"="+encodeURIComponent(H))})}catch(S){throw h.push(y+"type="+encodeURIComponent("_badmap")),S}}function Nc(u){this.l=u.Ub||null,this.j=u.eb||!1}_(Nc,mm),Nc.prototype.g=function(){return new ad(this.l,this.j)},Nc.prototype.i=function(u){return function(){return u}}({});function ad(u,h){Lt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(ad,Lt),n=ad.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,kc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pc(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,kc(this)),this.g&&(this.readyState=3,kc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rb(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rb(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Pc(this):kc(this),this.readyState==3&&Rb(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Pc(this))},n.Qa=function(u){this.g&&(this.response=u,Pc(this))},n.ga=function(){this.g&&Pc(this)};function Pc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,kc(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function kc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ad.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Nb(u){let h="";return Z(u,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function Tm(u,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=Nb(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Qe(u,h,p))}function ot(u){Lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(ot,Lt);var hO=/^https?$/i,fO=["POST","PUT"];n=ot.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_m.g(),this.v=this.o?ab(this.o):ab(_m),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(R){Pb(this,R);return}if(u=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var S in y)p.set(S,y[S]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let R of y.keys())p.set(R,y.get(R));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(R=>R.toLowerCase()=="content-type"),S=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fO,h,void 0))||y||S||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,H]of p)this.g.setRequestHeader(R,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fb(this),this.u=!0,this.g.send(u),this.u=!1}catch(R){Pb(this,R)}};function Pb(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,kb(u),cd(u)}function kb(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),cd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cd(this,!0)),ot.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ob(this):this.bb())},n.bb=function(){Ob(this)};function Ob(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Br(u)!=4||u.Z()!=2)){if(u.u&&Br(u)==4)rb(u.Ea,0,u);else if(Ht(u,"readystatechange"),Br(u)==4){u.h=!1;try{let H=u.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=H===0){var S=String(u.D).match(Cb)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),y=!hO.test(S?S.toLowerCase():"")}p=y}if(p)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var R=2<Br(u)?u.g.statusText:""}catch{R=""}u.l=R+" ["+u.Z()+"]",kb(u)}}finally{cd(u)}}}}function cd(u,h){if(u.g){Fb(u);let p=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Ht(u,"ready");try{p.onreadystatechange=y}catch{}}}function Fb(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Br(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Br(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),Hk(h)}};function Vb(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pO(u){let h={};u=(u.g&&2<=Br(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(U(u[y]))continue;var p=C(u[y]);let S=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let R=h[S]||[];h[S]=R,R.push(p)}I(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function Lb(u){this.Aa=0,this.i=[],this.j=new Sc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oc("baseRetryDelayMs",5e3,u),this.cb=Oc("retryDelaySeedMs",1e4,u),this.Wa=Oc("forwardChannelMaxRetries",2,u),this.wa=Oc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new _b(u&&u.concurrentRequestLimit),this.Da=new lO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Lb.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,y){Gt(0),this.W=u,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=Wb(this,null,this.W),ld(this)};function Sm(u){if(jb(u),u.G==3){var h=u.U++,p=Ur(u.I);if(Qe(p,"SID",u.K),Qe(p,"RID",h),Qe(p,"TYPE","terminate"),Fc(u,p),h=new _i(u,u.j,h),h.L=2,h.v=od(Ur(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=Kb(h.j,null),h.g.ea(h.v)),h.F=Date.now(),rd(h)}Gb(u)}function ud(u){u.g&&(Mm(u),u.g.cancel(),u.g=null)}function jb(u){ud(u),u.u&&(a.clearTimeout(u.u),u.u=null),dd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ld(u){if(!wb(u.h)&&!u.s){u.s=!0;var h=u.Ga;re||lt(),oe||(re(),oe=!0),Ie.add(h,u),u.B=0}}function gO(u,h){return Eb(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Tc(g(u.Ga,u,h),Hb(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let S=new _i(this,this.j,u),R=this.o;if(this.S&&(R?(R=v(R),b(R,this.S)):R=this.S),this.m!==null||this.O||(S.H=R,R=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Bb(this,S,h),p=Ur(this.I),Qe(p,"RID",u),Qe(p,"CVER",22),this.D&&Qe(p,"X-HTTP-Session-Id",this.D),Fc(this,p),R&&(this.O?h="headers="+encodeURIComponent(String(Nb(R)))+"&"+h:this.m&&Tm(p,this.m,R)),Cm(this.h,S),this.Ua&&Qe(p,"TYPE","init"),this.P?(Qe(p,"$req",h),Qe(p,"SID","null"),S.T=!0,Em(S,p,null)):Em(S,p,h),this.G=2}}else this.G==3&&(u?Ub(this,u):this.i.length==0||wb(this.h)||Ub(this))};function Ub(u,h){var p;h?p=h.l:p=u.U++;let y=Ur(u.I);Qe(y,"SID",u.K),Qe(y,"RID",p),Qe(y,"AID",u.T),Fc(u,y),u.m&&u.o&&Tm(y,u.m,u.o),p=new _i(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=Bb(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Cm(u.h,p),Em(p,y,h)}function Fc(u,h){u.H&&Z(u.H,function(p,y){Qe(h,y,p)}),u.l&&bb({},function(p,y){Qe(h,y,p)})}function Bb(u,h,p){p=Math.min(u.i.length,p);var y=u.l?g(u.l.Na,u.l,u):null;e:{var S=u.i;let R=-1;for(;;){let H=["count="+p];R==-1?0<p?(R=S[0].g,H.push("ofs="+R)):R=0:H.push("ofs="+R);let Ue=!0;for(let Nt=0;Nt<p;Nt++){let xe=S[Nt].g,jt=S[Nt].map;if(xe-=R,0>xe)R=Math.max(0,S[Nt].g-100),Ue=!1;else try{dO(jt,H,"req"+xe+"_")}catch{y&&y(jt)}}if(Ue){y=H.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,y}function $b(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;re||lt(),oe||(re(),oe=!0),Ie.add(h,u),u.v=0}}function Am(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Tc(g(u.Fa,u),Hb(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,qb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Tc(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),ud(this),qb(this))};function Mm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function qb(u){u.g=new _i(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Ur(u.qa);Qe(h,"RID","rpc"),Qe(h,"SID",u.K),Qe(h,"AID",u.T),Qe(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qe(h,"TO",u.ja),Qe(h,"TYPE","xmlhttp"),Fc(u,h),u.m&&u.o&&Tm(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=od(Ur(h)),p.m=null,p.P=!0,mb(p,u)}n.Za=function(){this.C!=null&&(this.C=null,ud(this),Am(this),Gt(19))};function dd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function zb(u,h){var p=null;if(u.g==h){dd(u),Mm(u),u.g=null;var y=2}else if(bm(u.h,h))p=h.D,Ib(u.h,h),y=1;else return;if(u.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var S=u.B;y=ed(),Ht(y,new hb(y,p)),ld(u)}else $b(u);else if(S=h.s,S==3||S==0&&0<h.X||!(y==1&&gO(u,h)||y==2&&Am(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),S){case 1:ps(u,5);break;case 4:ps(u,10);break;case 3:ps(u,6);break;default:ps(u,2)}}}function Hb(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function ps(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),y=u.Xa;let S=!y;y=new fs(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||id(y,"https"),od(y),S?cO(y.toString(),p):uO(y.toString(),p)}else Gt(2);u.G=0,u.l&&u.l.sa(h),Gb(u),jb(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function Gb(u){if(u.G=0,u.ka=[],u.l){let h=Db(u.h);(h.length!=0||u.i.length!=0)&&(T(u.ka,h),T(u.ka,u.i),u.h.i.length=0,D(u.i),u.i.length=0),u.l.ra()}}function Wb(u,h,p){var y=p instanceof fs?Ur(p):new fs(p);if(y.g!="")h&&(y.g=h+"."+y.g),sd(y,y.s);else{var S=a.location;y=S.protocol,h=h?h+"."+S.hostname:S.hostname,S=+S.port;var R=new fs(null);y&&id(R,y),h&&(R.g=h),S&&sd(R,S),p&&(R.l=p),y=R}return p=u.D,h=u.ya,p&&h&&Qe(y,p,h),Qe(y,"VER",u.la),Fc(u,y),y}function Kb(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new ot(new Nc({eb:p})):new ot(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qb(){}n=Qb.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function hd(){}hd.prototype.g=function(u,h){return new gn(u,h)};function gn(u,h){Lt.call(this),this.g=new Lb(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!U(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!U(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new Ao(this)}_(gn,Lt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Sm(this.g)},gn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=gm(u),u=p);h.i.push(new Jk(h.Ya++,u)),h.G==3&&ld(h)},gn.prototype.N=function(){this.g.l=null,delete this.j,Sm(this.g),delete this.g,gn.aa.N.call(this)};function Yb(u){ym.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}_(Yb,ym);function Zb(){vm.call(this),this.status=1}_(Zb,vm);function Ao(u){this.g=u}_(Ao,Qb),Ao.prototype.ua=function(){Ht(this.g,"a")},Ao.prototype.ta=function(u){Ht(this.g,new Yb(u))},Ao.prototype.sa=function(u){Ht(this.g,new Zb)},Ao.prototype.ra=function(){Ht(this.g,"b")},hd.prototype.createWebChannel=hd.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,qw=oi.createWebChannelTransport=function(){return new hd},$w=oi.getStatEventTarget=function(){return ed()},Bw=oi.Event=ds,dp=oi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},td.NO_ERROR=0,td.TIMEOUT=8,td.HTTP_ERROR=6,rl=oi.ErrorCode=td,fb.COMPLETE="complete",Uw=oi.EventType=fb,cb.EventType=bc,bc.OPEN="a",bc.CLOSE="b",bc.ERROR="c",bc.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,xa=oi.WebChannel=cb,jw=oi.FetchXmlHttpFactory=Nc,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,Lw=oi.XhrIo=ot}).apply(typeof lp<"u"?lp:typeof self<"u"?self:typeof window<"u"?window:{});var HR="@firebase/firestore";var It=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");var ac="10.13.1";var Yi=new yd("@firebase/firestore");function Oa(){return Yi.logLevel}function KI(n){Yi.setLogLevel(n)}function L(n,...e){if(Yi.logLevel<=lr.DEBUG){let t=e.map(QI);Yi.debug(`Firestore (${ac}): ${n}`,...t)}}function ft(n,...e){if(Yi.logLevel<=lr.ERROR){let t=e.map(QI);Yi.error(`Firestore (${ac}): ${n}`,...t)}}function $n(n,...e){if(Yi.logLevel<=lr.WARN){let t=e.map(QI);Yi.warn(`Firestore (${ac}): ${n}`,...t)}}function QI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Y(n="Unexpected state"){let e=`FIRESTORE (${ac}) INTERNAL ASSERTION FAILED: `+n;throw ft(e),new Error(e)}function te(n,e){n||Y()}function WN(n,e){n||Y()}function W(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends iC{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Dt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ip=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Kw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(It.UNAUTHENTICATED))}shutdown(){}},Qw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Yw=class{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Dt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Dt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>N(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Dt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string"),new Ip(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string"),new It(e)}},Zw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Jw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Zw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Xw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},eE=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=s=>{s.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(te(typeof t.token=="string"),this.R=t.token,new Xw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function vz(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Dp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=vz(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function le(n,e){return n<e?-1:n>e?1:0}function za(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function KN(n){return n+"\0"}var rt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new F(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new F(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new F(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new rt(0,0))}static max(){return new n(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var bp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Y(),r===void 0?r=e.length-t:r>e.length-t&&Y(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Te=class n extends bp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},_z=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pt=class n extends bp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return _z.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new F(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new F(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new F(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var K=class n{constructor(e){this.path=e}static fromPath(e){return new n(Te.fromString(e))}static fromName(e){return new n(Te.fromString(e).popFirst(5))}static empty(){return new n(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Te.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Te(e.slice()))}};var Ha=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function tE(n){return n.fields.find(e=>e.kind===2)}function Qs(n){return n.fields.filter(e=>e.kind!==2)}Ha.UNKNOWN_ID=-1;var Ba=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var gl=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,qn.min())}};function QN(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new rt(t+1,0):new rt(t,r));return new qn(i,K.empty(),e)}function YN(n){return new qn(n.readTime,n.key,-1)}var qn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(se.min(),K.empty(),-1)}static max(){return new n(se.max(),K.empty(),-1)}};function YI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=K.comparator(n.documentKey,e.documentKey),t!==0?t:le(n.largestBatchId,e.largestBatchId))}var ZN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function os(n){return N(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==ZN)throw n;L("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var Tp=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Dt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new to(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=ZI(r.target.error);this.V.reject(new to(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new to(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(L("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new rE(t)}},Zi=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Vc())===12.2&&ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return L("SimpleDb","Removing database:",e),Ys(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!md())return!1;if(n.v())return!0;let e=Vc(),t=n.S(e),r=0<t&&t<10,i=JN(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(L("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new to(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new F(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new F(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new to(e,o))},i.onupgradeneeded=s=>{L("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{L("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=Tp.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),M.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(L("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function JN(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var nE=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ys(this.B.delete())}},to=class extends F{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function as(n){return n.name==="IndexedDbTransactionError"}var rE=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(L("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(L("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ys(r)}add(e){return L("SimpleDb","ADD",this.store.name,e,e),Ys(this.store.add(e))}get(e){return Ys(this.store.get(e)).next(t=>(t===void 0&&(t=null),L("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return L("SimpleDb","DELETE",this.store.name,e),Ys(this.store.delete(e))}count(){return L("SimpleDb","COUNT",this.store.name),Ys(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new M((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){L("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=s=>{let o=ZI(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new nE(a),l=t(a.primaryKey,a.value,c);if(l instanceof M){let d=l.catch(f=>(c.done(),M.reject(f)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ys(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=ZI(r.target.error);t(i)}})}var GR=!1;function ZI(n){let e=Zi.S(Vc());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GR||(GR=!0,setTimeout(()=>{throw r},0)),r}}return n}var iE=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){L("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{L("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){as(t)?L("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield os(t)}yield this.X(6e4)}))}},sE=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return L("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(L("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=YN(s);YI(o,r)>0&&(r=o)}),new qn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Sn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ll(n){return n==null}function ml(n){return n===0&&1/n==-1/0}function XN(n){return typeof n=="number"&&Number.isInteger(n)&&!ml(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function rn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=WR(e)),e=wz(n.get(t),e);return WR(e)}function wz(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function WR(n){return n+""}function Cr(n){let e=n.length;if(te(e>=2),e===2)return te(n.charAt(0)===""&&n.charAt(1)===""),Te.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&Y(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:Y()}s=o+2}return new Te(r)}var KR=["userId","batchId"];function mp(n,e){return[n,rn(e)]}function eP(n,e,t){return[n,rn(e),t]}var Ez={},Iz=["prefixPath","collectionGroup","readTime","documentId"],Dz=["prefixPath","collectionGroup","documentId"],bz=["collectionGroup","readTime","prefixPath","documentId"],Cz=["canonicalId","targetId"],Tz=["targetId","path"],Sz=["path","targetId"],Az=["collectionId","parent"],Mz=["indexId","uid"],xz=["uid","sequenceNumber"],Rz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Nz=["indexId","uid","orderedDocumentKey"],Pz=["userId","collectionPath","documentId"],kz=["userId","collectionPath","largestBatchId"],Oz=["userId","collectionGroup","largestBatchId"],tP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fz=[...tP,"documentOverlays"],nP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rP=nP,JI=[...rP,"indexConfiguration","indexState","indexEntries"],Vz=JI,Lz=[...JI,"globals"];var yl=class extends Cp{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function At(n,e){let t=W(n);return Zi.F(t._e,e)}function QR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function po(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ze=class n{constructor(e,t){this.comparator=e,this.root=t||Sr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ua(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ua(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ua(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ua(this.root,e,this.comparator,!0)}},Ua=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Sr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();let e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}};Sr.EMPTY=null,Sr.RED=!0,Sr.BLACK=!1;Sr.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Sr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ze=class n{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sp(this.data.getIterator())}getIteratorFrom(e){return new Sp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Sp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ra(n){return n.hasNext()?n.getNext():void 0}var An=class n{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new n([])}unionWith(e){let t=new ze(pt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return za(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ap=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function sP(){return typeof atob<"u"}var mt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ap("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};mt.EMPTY_BYTE_STRING=new mt("");var jz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ui(n){if(te(!!n),typeof n=="string"){let e=0,t=jz.exec(n);if(te(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(n.seconds),nanos:Xe(n.nanos)}}function Xe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ji(n){return typeof n=="string"?mt.fromBase64String(n):mt.fromUint8Array(n)}function vg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function XI(n){let e=n.mapValue.fields.__previous_value__;return vg(e)?XI(e):e}function vl(n){let e=ui(n.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}var oE=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Xi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ki={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yp={nullValue:"NULL_VALUE"};function no(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vg(n)?4:oP(n)?9007199254740991:_g(n)?10:11:Y()}function xr(n,e){if(n===e)return!0;let t=no(n);if(t!==no(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vl(n).isEqual(vl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ui(i.timestampValue),a=ui(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Ji(i.bytesValue).isEqual(Ji(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Xe(i.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(i.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Xe(i.integerValue)===Xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Xe(i.doubleValue),a=Xe(s.doubleValue);return o===a?ml(o)===ml(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return za(n.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(QR(o)!==QR(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!xr(o[c],a[c])))return!1;return!0}(n,e);default:return Y()}}function _l(n,e){return(n.values||[]).find(t=>xr(t,e))!==void 0}function es(n,e){if(n===e)return 0;let t=no(n),r=no(e);if(t!==r)return le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return le(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Xe(s.integerValue||s.doubleValue),c=Xe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return YR(n.timestampValue,e.timestampValue);case 4:return YR(vl(n),vl(e));case 5:return le(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Ji(s),c=Ji(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=le(a[l],c[l]);if(d!==0)return d}return le(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=le(Xe(s.latitude),Xe(o.latitude));return a!==0?a:le(Xe(s.longitude),Xe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ZR(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,_=(c=g.value)===null||c===void 0?void 0:c.arrayValue,D=le(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((d=_?.values)===null||d===void 0?void 0:d.length)||0);return D!==0?D:ZR(m,_)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ki.mapValue&&o===Ki.mapValue)return 0;if(s===Ki.mapValue)return 1;if(o===Ki.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=le(c[f],d[f]);if(g!==0)return g;let m=es(a[c[f]],l[d[f]]);if(m!==0)return m}return le(c.length,d.length)}(n.mapValue,e.mapValue);default:throw Y()}}function YR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return le(n,e);let t=ui(n),r=ui(e),i=le(t.seconds,r.seconds);return i!==0?i:le(t.nanos,r.nanos)}function ZR(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=es(t[i],r[i]);if(s)return s}return le(t.length,r.length)}function Ga(n){return aE(n)}function aE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ui(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ji(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return K.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=aE(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${aE(t.fields[o])}`;return i+"}"}(n.mapValue):Y()}function ro(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cE(n){return!!n&&"integerValue"in n}function wl(n){return!!n&&"arrayValue"in n}function JR(n){return!!n&&"nullValue"in n}function XR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vp(n){return!!n&&"mapValue"in n}function _g(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ll(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return po(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ll(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ll(n.arrayValue.values[t]);return e}return Object.assign({},n)}function oP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var aP={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Uz(n){return"nullValue"in n?yp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ro(Xi.empty(),K.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?_g(n)?aP:{mapValue:{}}:Y()}function Bz(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ro(Xi.empty(),K.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?aP:"mapValue"in n?_g(n)?{mapValue:{}}:Ki:Y()}function eN(n,e){let t=es(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function tN(n,e){let t=es(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var zt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(t)}setAll(e){let t=pt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=ll(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());vp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){po(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(ll(this.value))}};function cP(n){let e=[];return po(n.fields,(t,r)=>{let i=new pt([t]);if(vp(r)){let s=cP(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new An(e)}var bt=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,se.min(),se.min(),se.min(),zt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,se.min(),se.min(),zt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,se.min(),se.min(),zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Rr=class{constructor(e,t){this.position=e,this.inclusive=t}};function nN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),t.key):r=es(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function rN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xr(n.position[t],e.position[t]))return!1;return!0}var io=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function $z(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Mp=class{},be=class n extends Mp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new dE(e,t,r):t==="array-contains"?new pE(e,r):t==="in"?new xp(e,r):t==="not-in"?new gE(e,r):t==="array-contains-any"?new mE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new hE(e,r):new fE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(es(t,this.value)):t!==null&&no(this.value)===no(t)&&this.matchesComparison(es(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Le=class n extends Mp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Wa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Wa(n){return n.op==="and"}function uE(n){return n.op==="or"}function eD(n){return uP(n)&&Wa(n)}function uP(n){for(let e of n.filters)if(e instanceof Le)return!1;return!0}function lE(n){if(n instanceof be)return n.field.canonicalString()+n.op.toString()+Ga(n.value);if(eD(n))return n.filters.map(e=>lE(e)).join(",");{let e=n.filters.map(t=>lE(t)).join(",");return`${n.op}(${e})`}}function lP(n,e){return n instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.field.isEqual(i.field)&&xr(r.value,i.value)}(n,e):n instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&lP(o,i.filters[a]),!0):!1}(n,e):void Y()}function dP(n,e){let t=n.filters.concat(e);return Le.create(t,n.op)}function hP(n){return n instanceof be?function(t){return`${t.field.canonicalString()} ${t.op} ${Ga(t.value)}`}(n):n instanceof Le?function(t){return t.op.toString()+" {"+t.getFilters().map(hP).join(" ,")+"}"}(n):"Filter"}var dE=class extends be{constructor(e,t,r){super(e,t,r),this.key=K.fromName(r.referenceValue)}matches(e){let t=K.comparator(e.key,this.key);return this.matchesComparison(t)}},hE=class extends be{constructor(e,t){super(e,"in",t),this.keys=fP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},fE=class extends be{constructor(e,t){super(e,"not-in",t),this.keys=fP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function fP(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>K.fromName(r.referenceValue))}var pE=class extends be{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return wl(t)&&_l(t.arrayValue,this.value)}},xp=class extends be{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&_l(this.value.arrayValue,t)}},gE=class extends be{constructor(e,t){super(e,"not-in",t)}matches(e){if(_l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!_l(this.value.arrayValue,t)}},mE=class extends be{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!wl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_l(this.value.arrayValue,r))}};var yE=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function vE(n,e=null,t=[],r=[],i=null,s=null,o=null){return new yE(n,e,t,r,i,s,o)}function so(n){let e=W(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>lE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ll(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ga(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ga(r)).join(",")),e.ue=t}return e.ue}function jl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$z(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!rN(n.startAt,e.startAt)&&rN(n.endAt,e.endAt)}function Rp(n){return K.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Np(n,e){return n.filters.filter(t=>t instanceof be&&t.field.isEqual(e))}function iN(n,e,t){let r=yp,i=!0;for(let s of Np(n,e)){let o=yp,a=!0;switch(s.op){case"<":case"<=":o=Uz(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=yp}eN({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];eN({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function sN(n,e,t){let r=Ki,i=!0;for(let s of Np(n,e)){let o=Ki,a=!0;switch(s.op){case">=":case">":o=Bz(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ki}tN({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];tN({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var sr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function pP(n,e,t,r,i,s,o,a){return new sr(n,e,t,r,i,s,o,a)}function cc(n){return new sr(n)}function oN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tD(n){return n.collectionGroup!==null}function $a(n){let e=W(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ze(pt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new io(s,r))}),t.has(pt.keyField().canonicalString())||e.ce.push(new io(pt.keyField(),r))}return e.ce}function sn(n){let e=W(n);return e.le||(e.le=qz(e,$a(n))),e.le}function qz(n,e){if(n.limitType==="F")return vE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new io(i.field,s)});let t=n.endAt?new Rr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Rr(n.startAt.position,n.startAt.inclusive):null;return vE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function _E(n,e){let t=n.filters.concat([e]);return new sr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Pp(n,e,t){return new sr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ul(n,e){return jl(sn(n),sn(e))&&n.limitType===e.limitType}function gP(n){return`${so(sn(n))}|lt:${n.limitType}`}function Fa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>hP(i)).join(", ")}]`),Ll(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ga(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ga(i)).join(",")),`Target(${r})`}(sn(n))}; limitType=${n.limitType})`}function Bl(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of $a(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=nN(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,$a(r),i)||r.endAt&&!function(o,a,c){let l=nN(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,$a(r),i))}(n,e)}function mP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yP(n){return(e,t)=>{let r=!1;for(let i of $a(n)){let s=zz(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function zz(n,e,t){let r=n.field.isKeyField()?K.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?es(c,l):Y()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}var Nr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){po(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return iP(this.inner)}size(){return this.innerSize}};var Hz=new Ze(K.comparator);function pn(){return Hz}var vP=new Ze(K.comparator);function cl(...n){let e=vP;for(let t of n)e=e.insert(t.key,t);return e}function _P(n){let e=vP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Tr(){return dl()}function wP(){return dl()}function dl(){return new Nr(n=>n.toString(),(n,e)=>n.isEqual(e))}var Gz=new Ze(K.comparator),Wz=new ze(K.comparator);function he(...n){let e=Wz;for(let t of n)e=e.add(t);return e}var Kz=new ze(le);function nD(){return Kz}function rD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ml(e)?"-0":e}}function EP(n){return{integerValue:""+n}}function IP(n,e){return XN(e)?EP(e):rD(n,e)}var Ka=class{constructor(){this._=void 0}};function Qz(n,e,t){return n instanceof ts?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&vg(s)&&(s=XI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof li?bP(n,e):n instanceof di?CP(n,e):function(i,s){let o=DP(i,s),a=aN(o)+aN(i.Pe);return cE(o)&&cE(i.Pe)?EP(a):rD(i.serializer,a)}(n,e)}function Yz(n,e,t){return n instanceof li?bP(n,e):n instanceof di?CP(n,e):t}function DP(n,e){return n instanceof ns?function(r){return cE(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ts=class extends Ka{},li=class extends Ka{constructor(e){super(),this.elements=e}};function bP(n,e){let t=TP(e);for(let r of n.elements)t.some(i=>xr(i,r))||t.push(r);return{arrayValue:{values:t}}}var di=class extends Ka{constructor(e){super(),this.elements=e}};function CP(n,e){let t=TP(e);for(let r of n.elements)t=t.filter(i=>!xr(i,r));return{arrayValue:{values:t}}}var ns=class extends Ka{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function aN(n){return Xe(n.integerValue||n.doubleValue)}function TP(n){return wl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var oo=class{constructor(e,t){this.field=e,this.transform=t}};function Zz(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof li&&i instanceof li||r instanceof di&&i instanceof di?za(r.elements,i.elements,xr):r instanceof ns&&i instanceof ns?xr(r.Pe,i.Pe):r instanceof ts&&i instanceof ts}(n.transform,e.transform)}var wE=class{constructor(e,t){this.version=e,this.transformResults=t}},ut=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _p(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Qa=class{};function SP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new is(n.key,ut.none()):new rs(n.key,n.data,ut.none());{let t=n.data,r=zt.empty(),i=new ze(pt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new or(n.key,r,new An(i.toArray()),ut.none())}}function Jz(n,e,t){n instanceof rs?function(i,s,o){let a=i.value.clone(),c=uN(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof or?function(i,s,o){if(!_p(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=uN(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(AP(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function hl(n,e,t,r){return n instanceof rs?function(s,o,a,c){if(!_p(s.precondition,o))return a;let l=s.value.clone(),d=lN(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof or?function(s,o,a,c){if(!_p(s.precondition,o))return a;let l=lN(s.fieldTransforms,c,o),d=o.data;return d.setAll(AP(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return _p(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Xz(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=DP(r.transform,i||null);s!=null&&(t===null&&(t=zt.empty()),t.set(r.field,s))}return t||null}function cN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&za(r,i,(s,o)=>Zz(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var rs=class extends Qa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},or=class extends Qa{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function AP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function uN(n,e,t){let r=new Map;te(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Yz(o,a,t[i]))}return r}function lN(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Qz(s,o,e))}return r}var is=class extends Qa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},El=class extends Qa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Il=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Jz(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=hl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=hl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=wP();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=SP(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),he())}isEqual(e){return this.batchId===e.batchId&&za(this.mutations,e.mutations,(t,r)=>cN(t,r))&&za(this.baseMutations,e.baseMutations,(t,r)=>cN(t,r))}},EE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){te(e.mutations.length===r.length);let i=function(){return Gz}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Dl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var IE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var wt,Ce;function MP(n){switch(n){default:return Y();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function xP(n){if(n===void 0)return ft("GRPC error has no .code"),x.UNKNOWN;switch(n){case wt.OK:return x.OK;case wt.CANCELLED:return x.CANCELLED;case wt.UNKNOWN:return x.UNKNOWN;case wt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case wt.INTERNAL:return x.INTERNAL;case wt.UNAVAILABLE:return x.UNAVAILABLE;case wt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case wt.NOT_FOUND:return x.NOT_FOUND;case wt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case wt.ABORTED:return x.ABORTED;case wt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case wt.DATA_LOSS:return x.DATA_LOSS;default:return Y()}}(Ce=wt||(wt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var dN=null;function RP(){return new TextEncoder}var eH=new qi([4294967295,4294967295],0);function hN(n){let e=RP().encode(n),t=new Vw;return t.update(e),new Uint8Array(t.digest())}function fN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qi([t,r],0),new qi([i,s],0)]}var DE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new eo(`Invalid padding: ${t}`);if(r<0)throw new eo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new eo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new eo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=qi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(qi.fromNumber(r)));return i.compare(eH)===1&&(i=new qi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=hN(e),[r,i]=fN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=hN(e),[r,i]=fN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},eo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var bl=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Cl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(se.min(),i,new Ze(le),pn(),he())}},Cl=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,he(),he(),he())}};var qa=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},kp=class{constructor(e,t){this.targetId=e,this.me=t}},Op=class{constructor(e,t,r=mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Fp=class{constructor(){this.fe=0,this.ge=gN(),this.pe=mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),t=he(),r=he();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new Cl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=gN()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},bE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=pn(),this.qe=pN(),this.Qe=new Ze(le)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Rp(s))if(r===0){let o=new K(s.path);this.Ue(t,o,bt.newNoDocument(o,se.min()))}else te(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}dN?.et(function(d,f,g,m,_){var D,T,O,U,P,z;let ne={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Z=f.unchangedNames;return Z&&(ne.bloomFilter={applied:_===0,hashCount:(D=Z?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(U=(O=(T=Z?.bits)===null||T===void 0?void 0:T.bitmap)===null||O===void 0?void 0:O.length)!==null&&U!==void 0?U:0,padding:(z=(P=Z?.bits)===null||P===void 0?void 0:P.padding)!==null&&z!==void 0?z:0,mightContain:I=>{var v;return(v=m?.mightContain(I))!==null&&v!==void 0&&v}}),ne}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Ji(r).toUint8Array()}catch(c){if(c instanceof Ap)return $n("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new DE(o,i,s)}catch(c){return $n(c instanceof eo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Rp(a.target)){let c=new K(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,bt.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=he();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new bl(e,t,this.Qe,this.ke,r);return this.ke=pn(),this.qe=pN(),this.Qe=new Ze(le),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Fp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ze(le),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||L("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Fp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function pN(){return new Ze(K.comparator)}function gN(){return new Ze(K.comparator)}var tH={asc:"ASCENDING",desc:"DESCENDING"},nH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rH={and:"AND",or:"OR"},CE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function TE(n,e){return n.useProto3Json||Ll(e)?e:{value:e}}function Ya(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iH(n,e){return Ya(n,e.toTimestamp())}function gt(n){return te(!!n),se.fromTimestamp(function(t){let r=ui(t);return new rt(r.seconds,r.nanos)}(n))}function iD(n,e){return SE(n,e).canonicalString()}function SE(n,e){let t=function(i){return new Te(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function PP(n){let e=Te.fromString(n);return te(qP(e)),e}function Tl(n,e){return iD(n.databaseId,e.path)}function Ar(n,e){let t=PP(e);if(t.get(1)!==n.databaseId.projectId)throw new F(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new F(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new K(FP(t))}function kP(n,e){return iD(n.databaseId,e)}function OP(n){let e=PP(n);return e.length===4?Te.emptyPath():FP(e)}function AE(n){return new Te(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FP(n){return te(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function mN(n,e,t){return{name:Tl(n,e),fields:t.value.mapValue.fields}}function VP(n,e,t){let r=Ar(n,e.name),i=gt(e.updateTime),s=e.createTime?gt(e.createTime):se.min(),o=new zt({mapValue:{fields:e.fields}}),a=bt.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function sH(n,e){return"found"in e?function(r,i){te(!!i.found),i.found.name,i.found.updateTime;let s=Ar(r,i.found.name),o=gt(i.found.updateTime),a=i.found.createTime?gt(i.found.createTime):se.min(),c=new zt({mapValue:{fields:i.found.fields}});return bt.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){te(!!i.missing),te(!!i.readTime);let s=Ar(r,i.missing),o=gt(i.readTime);return bt.newNoDocument(s,o)}(n,e):Y()}function oH(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(te(d===void 0||typeof d=="string"),mt.fromBase64String(d||"")):(te(d===void 0||d instanceof Buffer||d instanceof Uint8Array),mt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?x.UNKNOWN:xP(l.code);return new F(d,l.message||"")}(o);t=new Op(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ar(n,r.document.name),s=gt(r.document.updateTime),o=r.document.createTime?gt(r.document.createTime):se.min(),a=new zt({mapValue:{fields:r.document.fields}}),c=bt.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new qa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ar(n,r.document),s=r.readTime?gt(r.readTime):se.min(),o=bt.newNoDocument(i,s),a=r.removedTargetIds||[];t=new qa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ar(n,r.document),s=r.removedTargetIds||[];t=new qa([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new IE(i,s),a=r.targetId;t=new kp(a,o)}}return t}function Sl(n,e){let t;if(e instanceof rs)t={update:mN(n,e.key,e.value)};else if(e instanceof is)t={delete:Tl(n,e.key)};else if(e instanceof or)t={update:mN(n,e.key,e.data),updateMask:hH(e.fieldMask)};else{if(!(e instanceof El))return Y();t={verify:Tl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ts)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof li)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof di)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ns)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:iH(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(n,e.precondition)),t}function ME(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?ut.updateTime(gt(s.updateTime)):s.exists!==void 0?ut.exists(s.exists):ut.none()}(e.currentDocument):ut.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)te(a.setToServerValue==="REQUEST_TIME"),c=new ts;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new li(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new di(d)}else"increment"in a?c=new ns(o,a.increment):Y();let l=pt.fromServerFormat(a.fieldPath);return new oo(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Ar(n,e.update.name),s=new zt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new An(l.map(d=>pt.fromServerFormat(d)))}(e.updateMask);return new or(i,s,o,t,r)}return new rs(i,s,t,r)}if(e.delete){let i=Ar(n,e.delete);return new is(i,t)}if(e.verify){let i=Ar(n,e.verify);return new El(i,t)}return Y()}function aH(n,e){return n&&n.length>0?(te(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?gt(i.updateTime):gt(s);return o.isEqual(se.min())&&(o=gt(s)),new wE(o,i.transformResults||[])}(t,e))):[]}function LP(n,e){return{documents:[kP(n,e.path)]}}function jP(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kP(n,i);let s=function(l){if(l.length!==0)return $P(Le.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Va(g.field),direction:uH(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=TE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function UP(n){let e=OP(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){te(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){let g=BP(f);return g instanceof Le&&eD(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(_){return new io(La(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Ll(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,m=f.values||[];return new Rr(m,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,m=f.values||[];return new Rr(m,g)}(t.endAt)),pP(e,i,o,s,a,"F",c,l)}function cH(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=La(t.unaryFilter.field);return be.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=La(t.unaryFilter.field);return be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=La(t.unaryFilter.field);return be.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=La(t.unaryFilter.field);return be.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(n):n.fieldFilter!==void 0?function(t){return be.create(La(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Le.create(t.compositeFilter.filters.map(r=>BP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(t.compositeFilter.op))}(n):Y()}function uH(n){return tH[n]}function lH(n){return nH[n]}function dH(n){return rH[n]}function Va(n){return{fieldPath:n.canonicalString()}}function La(n){return pt.fromServerFormat(n.fieldPath)}function $P(n){return n instanceof be?function(t){if(t.op==="=="){if(XR(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NAN"}};if(JR(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(XR(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NAN"}};if(JR(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(t.field),op:lH(t.op),value:t.value}}}(n):n instanceof Le?function(t){let r=t.getFilters().map(i=>$P(i));return r.length===1?r[0]:{compositeFilter:{op:dH(t.op),filters:r}}}(n):Y()}function hH(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Za=class n{constructor(e,t,r,i,s=se.min(),o=se.min(),a=mt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Vp=class{constructor(e){this.ct=e}};function fH(n,e){let t;if(e.document)t=VP(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=K.fromSegments(e.noDocument.path),i=co(e.noDocument.readTime);t=bt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y();{let r=K.fromSegments(e.unknownDocument.path),i=co(e.unknownDocument.version);t=bt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new rt(i[0],i[1]);return se.fromTimestamp(s)}(e.readTime)),t}function yN(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Lp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Tl(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ya(s,o.version.toTimestamp()),createTime:Ya(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ao(e.version)};else{if(!e.isUnknownDocument())return Y();r.unknownDocument={path:t.path.toArray(),version:ao(e.version)}}return r}function Lp(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ao(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function co(n){let e=new rt(n.seconds,n.nanoseconds);return se.fromTimestamp(e)}function Zs(n,e){let t=(e.baseMutations||[]).map(s=>ME(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>ME(n.ct,s)),i=rt.fromMillis(e.localWriteTimeMs);return new Il(e.batchId,i,t,r)}function ul(n){let e=co(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?co(n.lastLimboFreeSnapshotVersion):se.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return te(s.documents.length===1),sn(cc(OP(s.documents[0])))}(n.query):function(s){return sn(UP(s))}(n.query),new Za(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,mt.fromBase64String(n.resumeToken))}function zP(n,e){let t=ao(e.snapshotVersion),r=ao(e.lastLimboFreeSnapshotVersion),i;i=Rp(e.target)?LP(n.ct,e.target):jP(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:so(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sD(n){let e=UP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Pp(e,e.limit,"L"):e}function zw(n,e){return new Dl(e.largestBatchId,ME(n.ct,e.overlayMutation))}function vN(n,e){let t=e.path.lastSegment();return[n,rn(e.path.popLast()),t]}function _N(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ao(r.readTime),documentKey:rn(r.documentKey.path),largestBatchId:r.largestBatchId}}var xE=class{getBundleMetadata(e,t){return wN(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:co(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return wN(e).put(function(i){return{bundleId:i.id,createTime:ao(gt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return EN(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:sD(s.bundledQuery),readTime:co(s.readTime)}}(r)})}saveNamedQuery(e,t){return EN(e).put(function(i){return{name:i.name,readTime:ao(gt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function wN(n){return At(n,"bundles")}function EN(n){return At(n,"namedQueries")}var jp=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return il(e).get(vN(this.userId,t)).next(r=>r?zw(this.serializer,r):null)}getOverlays(e,t){let r=Tr();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new Dl(t,o);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(rn(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(il(e).j("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,t,r){let i=Tr(),s=rn(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return il(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=zw(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=Tr(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return il(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let f=zw(this.serializer,l);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return il(e).put(function(i,s,o){let[a,c,l]=vN(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Sl(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function il(n){return At(n,"documentOverlays")}var RE=class{Pt(e){return At(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?mt.fromUint8Array(r):mt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var ai=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Xe(e.integerValue));else if("doubleValue"in e){let r=Xe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ml(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ui(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ji(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?oP(e)?this.dt(t,Number.MAX_SAFE_INTEGER):_g(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Y()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Xe(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),K.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ai.vt=new ai;function pH(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function IN(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=pH(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var NE=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=IN(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=IN(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},PE=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},kE=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Js=class{constructor(){this.jt=new NE,this.Ht=new PE(this.jt),this.Jt=new kE(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Xs=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function zi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=DN(n.arrayValue,e.arrayValue),t!==0?t:(t=DN(n.directionalValue,e.directionalValue),t!==0?t:K.comparator(n.documentKey,e.documentKey)))}function DN(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Up=class{constructor(e){this.Xt=new ze((t,r)=>pt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(te(e.collectionGroup===this.collectionId),this.nn)return!1;let t=tE(e);if(t!==void 0&&!this.sn(t))return!1;let r=Qs(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new ze(pt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ba(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ba(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ba(r.field,r.dir==="asc"?0:1)));return new Ha(Ha.UNKNOWN_ID,this.collectionId,t,gl.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function HP(n){var e,t;if(te(n instanceof be||n instanceof Le),n instanceof be){if(n instanceof xp){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>be.create(n.field,"==",s)))||[];return Le.create(i,"or")}return n}let r=n.filters.map(i=>HP(i));return Le.create(r,n.op)}function gH(n){if(n.getFilters().length===0)return[];let e=VE(HP(n));return te(GP(e)),OE(e)||FE(e)?[e]:e.getFilters()}function OE(n){return n instanceof be}function FE(n){return n instanceof Le&&eD(n)}function GP(n){return OE(n)||FE(n)||function(t){if(t instanceof Le&&uE(t)){for(let r of t.getFilters())if(!OE(r)&&!FE(r))return!1;return!0}return!1}(n)}function VE(n){if(te(n instanceof be||n instanceof Le),n instanceof be)return n;if(n.filters.length===1)return VE(n.filters[0]);let e=n.filters.map(r=>VE(r)),t=Le.create(e,n.op);return t=Bp(t),GP(t)?t:(te(t instanceof Le),te(Wa(t)),te(t.filters.length>1),t.filters.reduce((r,i)=>oD(r,i)))}function oD(n,e){let t;return te(n instanceof be||n instanceof Le),te(e instanceof be||e instanceof Le),t=n instanceof be?e instanceof be?function(i,s){return Le.create([i,s],"and")}(n,e):bN(n,e):e instanceof be?bN(e,n):function(i,s){if(te(i.filters.length>0&&s.filters.length>0),Wa(i)&&Wa(s))return dP(i,s.getFilters());let o=uE(i)?i:s,a=uE(i)?s:i,c=o.filters.map(l=>oD(l,a));return Le.create(c,"or")}(n,e),Bp(t)}function bN(n,e){if(Wa(e))return dP(e,n.getFilters());{let t=e.filters.map(r=>oD(n,r));return Le.create(t,"or")}}function Bp(n){if(te(n instanceof be||n instanceof Le),n instanceof be)return n;let e=n.getFilters();if(e.length===1)return Bp(e[0]);if(uP(n))return n;let t=e.map(i=>Bp(i)),r=[];return t.forEach(i=>{i instanceof be?r.push(i):i instanceof Le&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Le.create(r,n.op)}var LE=class{constructor(){this.un=new Al}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(qn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(qn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Al=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ze(Te.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ze(Te.comparator)).toArray()}};var hp=new Uint8Array(0),jE=class{constructor(e,t){this.databaseId=t,this.cn=new Al,this.ln=new Nr(r=>so(r),(r,i)=>jl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:rn(i)};return CN(e).put(s)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[KN(t),""],!1,!0);return CN(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(Cr(o.parent))}return r})}addFieldIndex(e,t){let r=sl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=Pa(e);return s.next(a=>{o.put(_N(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=sl(e),i=Pa(e),s=Na(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=sl(e),r=Na(e),i=Pa(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return M.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Up(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=Na(e),i=!0,s=new Map;return M.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=he(),a=[];return M.forEach(s,(c,l)=>{L("IndexedDbIndexManager",`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map(z=>`${z.fieldPath}:${z.kind}`).join(",")}`}(c)} to execute ${so(t)}`);let d=function(P,z){let ne=tE(z);if(ne===void 0)return null;for(let Z of Np(P,ne.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null}(l,c),f=function(P,z){let ne=new Map;for(let Z of Qs(z))for(let I of Np(P,Z.fieldPath))switch(I.op){case"==":case"in":ne.set(Z.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ne.set(Z.fieldPath.canonicalString(),I.value),Array.from(ne.values())}return null}(l,c),g=function(P,z){let ne=[],Z=!0;for(let I of Qs(z)){let v=I.kind===0?iN(P,I.fieldPath,P.startAt):sN(P,I.fieldPath,P.startAt);ne.push(v.value),Z&&(Z=v.inclusive)}return new Rr(ne,Z)}(l,c),m=function(P,z){let ne=[],Z=!0;for(let I of Qs(z)){let v=I.kind===0?sN(P,I.fieldPath,P.endAt):iN(P,I.fieldPath,P.endAt);ne.push(v.value),Z&&(Z=v.inclusive)}return new Rr(ne,Z)}(l,c),_=this.In(c,l,g),D=this.In(c,l,m),T=this.Tn(c,l,f),O=this.En(c.indexId,d,_,g.inclusive,D,m.inclusive,T);return M.forEach(O,U=>r.G(U,t.limit).next(P=>{P.forEach(z=>{let ne=K.fromSegments(z.documentKey);o.has(ne)||(o=o.add(ne),a.push(ne))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=gH(Le.create(e.filters,"and")).map(r=>vE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),l=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){let g=t?this.dn(t[f/l]):hp,m=this.An(e,g,r[f%l],i),_=this.Rn(e,g,s[f%l],o),D=a.map(T=>this.An(e,g,T,!0));d.push(...this.createRange(m,_,D))}return d}An(e,t,r,i){let s=new Xs(e,K.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new Xs(e,K.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new Up(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return M.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new ze(pt.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Js;for(let i of Qs(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);ai.vt.It(s,o)}return r.zt()}dn(e){let t=new Js;return ai.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Js;return ai.vt.It(ro(this.databaseId,t),r.Yt(function(s){let o=Qs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Js);let s=0;for(let o of Qs(e)){let a=r[s++];for(let c of i)if(this.fn(t,o.fieldPath)&&wl(a))i=this.gn(i,o,a);else{let l=c.Yt(o.kind);ai.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new Js;c.seed(a.zt()),ai.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof be&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=sl(e),i=Pa(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(d,f){let g=f?new gl(f.sequenceNumber,new qn(co(f.readTime),new K(Cr(f.documentKey)),f.largestBatchId)):gl.empty(),m=d.fields.map(([_,D])=>new Ba(pt.fromServerFormat(_),D));return new Ha(d.indexId,d.collectionGroup,m,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:le(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=sl(e),s=Pa(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,c=>s.put(_N(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,c=>this.wn(e,i,c).next(l=>{let d=this.Sn(s,c);return l.isEqual(d)?M.resolve():this.bn(e,s,c,l,d)}))))})}Dn(e,t,r,i){return Na(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Na(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Na(e),s=new ze(zi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Xs(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new ze(zi),i=this.Vn(t,e);if(i==null)return r;let s=tE(t);if(s!=null){let o=e.data.field(s.fieldPath);if(wl(o))for(let a of o.arrayValue.values||[])r=r.add(new Xs(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Xs(t.indexId,e.key,hp,i));return r}bn(e,t,r,i,s){L("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,l,d,f,g){let m=c.getIterator(),_=l.getIterator(),D=Ra(m),T=Ra(_);for(;D||T;){let O=!1,U=!1;if(D&&T){let P=d(D,T);P<0?U=!0:P>0&&(O=!0)}else D!=null?U=!0:O=!0;O?(f(T),T=Ra(_)):U?(g(D),D=Ra(m)):(D=Ra(m),T=Ra(_))}}(i,s,zi,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),M.waitFor(o)}yn(e){let t=1;return Pa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>zi(o,a)).filter((o,a,c)=>!a||zi(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=zi(o,e),c=zi(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,hp,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,hp,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,t){return zi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(TN)}getMinOffset(e,t){return M.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Y())).next(TN)}};function CN(n){return At(n,"collectionParents")}function Na(n){return At(n,"indexEntries")}function sl(n){return At(n,"indexConfiguration")}function Pa(n){return At(n,"indexState")}function TN(n){te(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;YI(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new qn(e.readTime,e.documentKey,t)}var SN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function WP(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:o},(d,f,g)=>(a++,g.delete()));s.push(c.next(()=>{te(a===1)}));let l=[];for(let d of t.mutations){let f=eP(e,d.key.path,t.batchId);s.push(i.delete(f)),l.push(d.key)}return M.waitFor(s).next(()=>l)}function $p(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Y();e=n.noDocument}return JSON.stringify(e).length}Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(41943040,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);var qp=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){te(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hi(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=ja(e),o=Hi(e);return o.add({}).next(a=>{te(typeof a=="number");let c=new Il(a,t,r,i),l=function(m,_,D){let T=D.baseMutations.map(U=>Sl(m.ct,U)),O=D.mutations.map(U=>Sl(m.ct,U));return{userId:_,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:T,mutations:O}}(this.serializer,this.userId,c),d=[],f=new ze((g,m)=>le(g.canonicalString(),m.canonicalString()));for(let g of i){let m=eP(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(o.put(l)),d.push(s.put(m,Ez))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),M.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return Hi(e).get(t).next(r=>r?(te(r.userId===this.userId),Zs(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?M.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Hi(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(te(a.batchId>=r),s=Zs(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Hi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hi(e).U("userMutationsIndex",t).next(r=>r.map(i=>Zs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=mp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return ja(e).J({range:i},(o,a,c)=>{let[l,d,f]=o,g=Cr(d);if(l===this.userId&&t.path.isEqual(g))return Hi(e).get(f).next(m=>{if(!m)throw Y();te(m.userId===this.userId),s.push(Zs(this.serializer,m))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ze(le),i=[];return t.forEach(s=>{let o=mp(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=ja(e).J({range:a},(l,d,f)=>{let[g,m,_]=l,D=Cr(m);g===this.userId&&s.path.isEqual(D)?r=r.add(_):f.done()});i.push(c)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=mp(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new ze(le);return ja(e).J({range:o},(c,l,d)=>{let[f,g,m]=c,_=Cr(g);f===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(Hi(e).get(s).next(o=>{if(o===null)throw Y();te(o.userId===this.userId),r.push(Zs(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return WP(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ja(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Cr(s[1]);i.push(c)}else a.done()}).next(()=>{te(i.length===0)})})}containsKey(e,t){return KP(e,this.userId,t)}Nn(e){return QP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function KP(n,e,t){let r=mp(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return ja(n).J({range:s,H:!0},(a,c,l)=>{let[d,f,g]=a;d===e&&f===i&&(o=!0),l.done()}).next(()=>o)}function Hi(n){return At(n,"mutations")}function ja(n){return At(n,"documentMutations")}function QP(n){return At(n,"mutationQueues")}var Ja=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var UE=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Ja(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>se.fromTimestamp(new rt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ka(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(te(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return ka(e).J((o,a)=>{let c=ul(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,t){return ka(e).J((r,i)=>{let s=ul(i);t(s)})}qn(e){return AN(e).get("targetGlobalKey").next(t=>(te(t!==null),t))}Qn(e,t){return AN(e).put("targetGlobalKey",t)}Kn(e,t){return ka(e).put(zP(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=so(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return ka(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=ul(a);jl(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=Gi(e);return t.forEach(o=>{let a=rn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=Gi(e);return M.forEach(t,s=>{let o=rn(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=Gi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Gi(e),s=he();return i.J({range:r,H:!0},(o,a,c)=>{let l=Cr(o[1]),d=new K(l);s=s.add(d)}).next(()=>s)}containsKey(e,t){let r=rn(t.path),i=IDBKeyRange.bound([r],[KN(r)],!1,!0),s=0;return Gi(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return ka(e).get(t).next(r=>r?ul(r):null)}};function ka(n){return At(n,"targets")}function AN(n){return At(n,"targetGlobal")}function Gi(n){return At(n,"targetDocuments")}function MN([n,e],[t,r]){let i=le(n,t);return i===0?le(e,r):i}var BE=class{constructor(e){this.Un=e,this.buffer=new ze(MN),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();MN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},$E=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){L("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){as(t)?L("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield os(t)}yield this.Hn(3e5)}))}},qE=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Sn.oe);let r=new BE(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(SN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SN):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Oa()<=lr.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function mH(n,e){return new qE(n,e)}var zE=class{constructor(e,t){this.db=e,this.garbageCollector=mH(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return fp(e,r)}removeReference(e,t,r){return fp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return fp(e,t)}nr(e,t){return function(i,s){let o=!1;return QP(i).Y(a=>KP(i,a,s).next(c=>(c&&(o=!0),M.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let c=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,se.min()),Gi(e).delete(function(f){return[0,rn(f.path)]}(o))))});i.push(c)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return fp(e,t)}tr(e,t){let r=Gi(e),i,s=Sn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==Sn.oe&&t(new K(Cr(i)),s),s=l,i=c):s=Sn.oe}).next(()=>{s!==Sn.oe&&t(new K(Cr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function fp(n,e){return Gi(n).put(function(r,i){return{targetId:0,path:rn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var zp=class{constructor(){this.changes=new Nr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var HE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ks(e).put(r)}removeEntry(e,t,r){return Ks(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Lp(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=bt.newInvalidDocument(t);return Ks(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ol(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:bt.newInvalidDocument(t)};return Ks(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ol(t))},(i,s)=>{r={document:this.ir(t,s),size:$p(s)}}).next(()=>r)}getEntries(e,t){let r=pn();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=pn(),i=new Ze(K.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,$p(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return M.resolve();let i=new ze(NN);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(ol(i.first()),ol(i.last())),o=i.getIterator(),a=o.getNext();return Ks(e).J({index:"documentKeyIndex",range:s},(c,l,d)=>{let f=K.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&NN(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?d.$(ol(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Lp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ks(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let d=pn();for(let f of l){let g=this.ir(K.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Bl(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=pn(),o=RN(t,r),a=RN(t,qn.max());return Ks(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,d)=>{let f=this.ir(K.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(f.key,f),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new GE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return xN(e).get("remoteDocumentGlobalKey").next(t=>(te(!!t),t))}rr(e,t){return xN(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=fH(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(se.min())))return r}return bt.newInvalidDocument(e)}};function YP(n){return new HE(n)}var GE=class extends zp{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Nr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new ze((s,o)=>le(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=yN(this.cr.serializer,o);i=i.add(s.path.popLast());let l=$p(c);r+=l-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=yN(this.cr.serializer,o.convertToNoDocument(se.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function xN(n){return At(n,"remoteDocumentGlobal")}function Ks(n){return At(n,"remoteDocumentsV14")}function ol(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function RN(n,e){let t=e.documentKey.path.toArray();return[n,Lp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function NN(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=le(t[s],r[s]),i)return i;return i=le(t.length,r.length),i||(i=le(t[t.length-2],r[r.length-2]),i||le(t[t.length-1],r[r.length-1]))}var WE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Hp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&hl(r.mutation,i,An.empty(),rt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,t,r=he()){let i=Tr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=cl();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Tr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,he()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=pn(),o=dl(),a=function(){return dl()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof or)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),hl(d.mutation,l,d.mutation.getFieldMask(),rt.now())):o.set(l.key,An.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new WE(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=dl(),i=new Ze((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||An.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||he()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=wP();d.forEach(g=>{if(!s.has(g)){let m=SP(t.get(g),r.get(g));m!==null&&f.set(g,m),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):M.resolve(Tr()),a=-1,c=s;return o.next(l=>M.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,he())).next(d=>({batchId:a,changes:_P(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new K(t)).next(r=>{let i=cl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=cl();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,c=>{let l=function(f,g){return new sr(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,bt.newInvalidDocument(d)))});let a=cl();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&hl(d.mutation,l,An.empty(),rt.now()),Bl(t,l)&&(a=a.insert(c,l))}),a})}};var KE=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:gt(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:sD(i.bundledQuery),readTime:gt(i.readTime)}}(t)),M.resolve()}};var QE=class{constructor(){this.overlays=new Ze(K.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Tr();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Tr(),s=t.length+1,o=new K(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ze((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Tr(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Tr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return M.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Dl(t,r));let s=this.Ir.get(t);s===void 0&&(s=he(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var YE=class{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var Ml=class{constructor(){this.Tr=new ze(Et.Er),this.dr=new ze(Et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Et(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Et(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new K(new Te([])),r=new Et(t,e),i=new Et(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new K(new Te([])),r=new Et(t,e),i=new Et(t,e+1),s=he();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Et(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Et=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return K.comparator(e.key,t.key)||le(e.wr,t.wr)}static Ar(e,t){return le(e.wr,t.wr)||K.comparator(e.key,t.key)}};var ZE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ze(Et.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Il(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Et(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Et(t,0),i=new Et(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ze(le);return t.forEach(i=>{let s=new Et(i,0),o=new Et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;K.isDocumentKey(s)||(s=s.child(""));let o=new Et(new K(s),0),a=new ze(le);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),M.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){te(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(t.mutations,i=>{let s=new Et(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Et(t,0),i=this.br.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var JE=class{constructor(e){this.Mr=e,this.docs=function(){return new Ze(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(t))}getEntries(e,t){let r=pn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():bt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=pn(),o=t.path,a=new K(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||YI(YN(d),r)<=0||(i.has(d.key)||Bl(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Y()}Or(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new XE(this)}getSize(e){return M.resolve(this.size)}},XE=class extends zp{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var eI=class{constructor(e){this.persistence=e,this.Nr=new Nr(t=>so(t),jl),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ml,this.targetCount=0,this.kr=Ja.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ja(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}};var Gp=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Sn(0),this.Kr=!1,this.Kr=!0,this.$r=new YE,this.referenceDelegate=e(this),this.Ur=new eI(this),this.indexManager=new LE,this.remoteDocumentCache=function(i){return new JE(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Vp(t),this.Gr=new KE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new ZE(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){L("MemoryPersistence","Starting transaction:",e);let i=new tI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},tI=class extends Cp{constructor(e){super(),this.currentSequenceNumber=e}},Wp=class n{constructor(e){this.persistence=e,this.Jr=new Ml,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=K.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,se.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var nI=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new Tp("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KR,{unique:!0}),c.createObjectStore("documentMutations")}(e),PN(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),PN(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:se.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KR,{unique:!0});let f=l.store("mutations"),g=d.map(m=>f.put(m));return M.waitFor(g)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:Pz});l.createIndex("collectionPathOverlayIndex",kz,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Oz,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:Iz});l.createIndex("documentKeyIndex",Dz),l.createIndex("collectionGroupIndex",bz)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Mz}).createIndex("sequenceNumberIndex",xz,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Rz}).createIndex("documentKeyIndex",Nz,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=$p(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>M.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,c=>{te(c.userId===s.userId);let l=Zs(this.serializer,c);return WP(e,s.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new Te(o),l=function(f){return[0,rn(f)]}(c);s.push(t.get(l).next(d=>d?M.resolve():(f=>t.put({targetId:0,path:rn(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>M.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Az});let r=t.store("collectionParents"),i=new Al,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:rn(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new Te(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{let d=Cr(a);return s(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=ul(i),o=zP(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),c=function(f){return f.document?new K(Te.fromString(f.document.name).popFirst(5)):f.noDocument?K.fromSegments(f.noDocument.path):f.unknownDocument?K.fromSegments(f.unknownDocument.path):Y()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>M.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=YP(this.serializer),s=new Gp(Wp.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:he();Zs(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),M.forEach(a,(c,l)=>{let d=new It(l),f=jp.lt(this.serializer,d),g=s.getIndexManager(d),m=qp.lt(d,this.serializer,g,s.referenceDelegate);return new Hp(i,m,f,g).recalculateAndSaveOverlaysForDocumentKeys(new yl(t,Sn.oe),c).next()})})}};function PN(n){n.createObjectStore("targetDocuments",{keyPath:Tz}).createIndex("documentTargetsIndex",Sz,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Cz,{unique:!0}),n.createObjectStore("targetGlobal")}var Hw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rI=class n{constructor(e,t,r,i,s,o,a,c,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new F(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zE(this,i),this.Ai=t+"main",this.serializer=new Vp(c),this.Ri=new Zi(this.Ai,this.hi,new nI(this.serializer)),this.$r=new RE,this.Ur=new UE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=YP(this.serializer),this.Gr=new xE,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&ft("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(x.FAILED_PRECONDITION,Hw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Sn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(as(e))return L("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return L("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return al(e).get("owner").next(t=>M.resolve(this.vi(t)))}Ci(e){return pp(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=At(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):al(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new F(x.FAILED_PRECONDITION,Hw);return!1}}return!(!this.networkEnabled||!this.inForeground)||pp(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&L("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new yl(e,Sn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>pp(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return qp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jE(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return jp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){L("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?Lz:c===16?Vz:c===15?JI:c===14?rP:c===13?nP:c===12?Fz:c===11?tP:void Y()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new yl(a,this.Qr?this.Qr.next():Sn.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw ft(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new F(x.FAILED_PRECONDITION,ZN);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return al(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new F(x.FAILED_PRECONDITION,Hw)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return al(e).put("owner",t)}static D(){return Zi.D()}bi(e){let t=al(e);return t.get("owner").next(r=>this.vi(r)?(L("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):M.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ft(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Pm()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return L("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ft("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ft("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function al(n){return At(n,"owner")}function pp(n){return At(n,"clientMetadata")}function aD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var iI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=he(),i=he();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var sI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Kp=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Pm()?8:JN(Vc())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new sI;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Oa()<=lr.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",Fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Oa()<=lr.DEBUG&&L("QueryEngine","Query:",Fa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Oa()<=lr.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",Fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(t))):M.resolve())}Yi(e,t){if(oN(t))return M.resolve(null);let r=sn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Pp(t,null,"F"),r=sn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=he(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,Pp(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return oN(t)||i.isEqual(se.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?M.resolve(null):(Oa()<=lr.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fa(t)),this.rs(e,o,t,QN(i,-1)).next(a=>a))})}ts(e,t){let r=new ze(yP(e));return t.forEach((i,s)=>{Bl(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Oa()<=lr.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Fa(t)),this.Ji.getDocumentsMatchingQuery(e,t,qn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var oI=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ze(le),this._s=new Nr(s=>so(s),jl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hp(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function ZP(n,e,t,r){return new oI(n,e,t,r)}function JP(n,e){return N(this,null,function*(){let t=W(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=he();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function yH(n,e){let t=W(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),m=M.resolve();return g.forEach(_=>{m=m.next(()=>d.getEntry(c,_)).next(D=>{let T=l.docVersions.get(_);te(T!==null),D.version.compareTo(T)<0&&(f.applyToRemoteDocument(D,l),D.isValidDocument()&&(D.setReadTime(l.commitVersion),d.addEntry(D)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function XP(n){let e=W(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function vH(n,e){let t=W(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,f)));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(mt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(D,T,O){return D.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,m,d)&&a.push(t.Ur.updateTargetData(s,m))});let c=pn(),l=he();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(e1(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(se.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function e1(n,e,t){let r=he(),i=he();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=pn();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(se.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function _H(n,e){let t=W(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xa(n,e){let t=W(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Za(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function ec(n,e,t){return N(this,null,function*(){let r=W(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!as(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Qp(n,e,t){let r=W(n),i=se.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=W(c),g=f._s.get(d);return g!==void 0?M.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,sn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:se.min(),t?s:he())).next(a=>(r1(r,mP(e),a),{documents:a,Ts:s})))}function t1(n,e){let t=W(n),r=W(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function n1(n,e){let t=W(n),r=t.us.get(e)||se.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,QN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(r1(t,e,i),i))}function r1(n,e,t){let r=n.us.get(e)||se.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function wH(n,e,t,r){return N(this,null,function*(){let i=W(n),s=he(),o=pn();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(s=s.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),o=o.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield Xa(i,function(d){return sn(cc(Te.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>e1(l,a,o).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function EH(r,i){return N(this,arguments,function*(n,e,t=he()){let s=yield Xa(n,sn(sD(e.bundledQuery))),o=W(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=gt(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Gr.saveNamedQuery(a,e);let l=s.withResumeToken(mt.EMPTY_BYTE_STRING,c);return o.os=o.os.insert(l.targetId,l),o.Ur.updateTargetData(a,l).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function kN(n,e){return`firestore_clients_${n}_${e}`}function ON(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Gw(n,e){return`firestore_targets_${n}_${e}`}var Yp=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new F(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(ft("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},fl=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new F(r.error.code,r.error.message))),s?new n(e,r.state,i):(ft("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Zp=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=nD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=XN(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(ft("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},aI=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ft("SharedClientState",`Failed to parse online state: ${e}`),null)}},xl=class{constructor(){this.activeTargetIds=nD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},pl=class{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ze(le),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=kN(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new xl),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(kN(this.persistenceKey,r));if(i){let s=Zp.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Gw(this.persistenceKey,e));if(r){let i=fl.Rs(e,r);i&&(t=i.state)}}return this.Ks.fs(e),this.Ns(),t}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Gw(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return L("SharedClientState","READ",e,t),t}setItem(e,t){L("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){L("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(L("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void ft("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(s){let o=Sn.oe;if(s!=null)try{let a=JSON.parse(s);te(typeof a=="number"),o=a}catch(a){ft("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==Sn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Yp(this.currentUser,e,t,r),s=ON(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let t=ON(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Gw(this.persistenceKey,e),s=new fl(e,t,r);this.setItem(i,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Zp.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Yp.Rs(new It(s),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return fl.Rs(i,t)}Ls(e){return aI.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);L("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=nD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Jp=class{constructor(){this.so=new xl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var cI=class{_o(e){}shutdown(){}};var Xp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var gp=null;function Ww(){return gp===null?gp=function(){return 268435456+Math.round(2147483648*Math.random())}():gp++,"0x"+gp.toString(16)}var IH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var uI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var qt="WebChannelConnection",lI=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=Ww(),c=this.xo(t,r.toUriEncodedString());L("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(d=>(L("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw $n("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ac}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=IH[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Ww();return new Promise((o,a)=>{let c=new Lw;c.setWithCredentials(!0),c.listenOnce(Uw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case rl.NO_ERROR:let d=c.getResponseJson();L(qt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case rl.TIMEOUT:L(qt,`RPC '${e}' ${s} timed out`),a(new F(x.DEADLINE_EXCEEDED,"Request time out"));break;case rl.HTTP_ERROR:let f=c.getStatus();if(L(qt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let m=g?.error;if(m&&m.status&&m.message){let _=function(T){let O=T.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(O)>=0?O:x.UNKNOWN}(m.status);a(new F(_,m.message))}else a(new F(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new F(x.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{L(qt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);L(qt,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Ww(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qw(),a=$w(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new jw({})),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");L(qt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,m=!1,_=new uI({Io:T=>{m?L(qt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(g||(L(qt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),L(qt,`RPC '${e}' stream ${i} sending:`,T),f.send(T))},To:()=>f.close()}),D=(T,O,U)=>{T.listen(O,P=>{try{U(P)}catch(z){setTimeout(()=>{throw z},0)}})};return D(f,xa.EventType.OPEN,()=>{m||(L(qt,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),D(f,xa.EventType.CLOSE,()=>{m||(m=!0,L(qt,`RPC '${e}' stream ${i} transport closed`),_.So())}),D(f,xa.EventType.ERROR,T=>{m||(m=!0,$n(qt,`RPC '${e}' stream ${i} transport errored:`,T),_.So(new F(x.UNAVAILABLE,"The operation could not be completed")))}),D(f,xa.EventType.MESSAGE,T=>{var O;if(!m){let U=T.data[0];te(!!U);let P=U,z=P.error||((O=P[0])===null||O===void 0?void 0:O.error);if(z){L(qt,`RPC '${e}' stream ${i} received error:`,z);let ne=z.status,Z=function(w){let b=wt[w];if(b!==void 0)return xP(b)}(ne),I=z.message;Z===void 0&&(Z=x.INTERNAL,I="Unknown error status: "+ne+" with message "+z.message),m=!0,_.So(new F(Z,I)),f.close()}else L(qt,`RPC '${e}' stream ${i} received:`,U),_.bo(U)}}),D(a,Bw.STAT_EVENT,T=>{T.stat===dp.PROXY?L(qt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===dp.NOPROXY&&L(qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}};function i1(){return typeof window<"u"?window:null}function wp(){return typeof document<"u"?document:null}function $l(n){return new CE(n,!0)}var Rl=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var eg=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Rl(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(ft(t.toString()),ft("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new F(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dI=class extends eg{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=oH(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?gt(o.readTime):se.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=AE(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=Rp(c)?{documents:LP(s,c)}:{query:jP(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=NP(s,o.resumeToken);let l=TE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=Ya(s,o.snapshotVersion.toTimestamp());let l=TE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=cH(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=AE(this.serializer),t.removeTarget=e,this.a_(t)}},hI=class extends eg{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return te(!!e.streamToken),this.lastStreamToken=e.streamToken,te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=aH(e.writeResults,e.commitTime),r=gt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=AE(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Sl(this.serializer,r))};this.a_(t)}};var fI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new F(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,SE(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(x.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,SE(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},pI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ft(t),this.D_=!1):L("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var gI=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>N(this,null,function*(){cs(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(c){return N(this,null,function*(){let l=W(c);l.L_.add(4),yield uc(l),l.q_.set("Unknown"),l.L_.delete(4),yield ql(l)})}(this))}))}),this.q_=new pI(r,i)}};function ql(n){return N(this,null,function*(){if(cs(n))for(let e of n.B_)yield e(!0)})}function uc(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function wg(n,e){let t=W(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),lD(t)?uD(t):dc(t).r_()&&cD(t,e))}function tc(n,e){let t=W(n),r=dc(t);t.N_.delete(e),r.r_()&&s1(t,e),t.N_.size===0&&(r.r_()?r.o_():cs(t)&&t.q_.set("Unknown"))}function cD(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dc(n).A_(e)}function s1(n,e){n.Q_.xe(e),dc(n).R_(e)}function uD(n){n.Q_=new bE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),dc(n).start(),n.q_.v_()}function lD(n){return cs(n)&&!dc(n).n_()&&n.N_.size>0}function cs(n){return W(n).L_.size===0}function o1(n){n.Q_=void 0}function DH(n){return N(this,null,function*(){n.q_.set("Online")})}function bH(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{cD(n,e)})})}function CH(n,e){return N(this,null,function*(){o1(n),lD(n)?(n.q_.M_(e),uD(n)):n.q_.set("Unknown")})}function TH(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof Op&&e.state===2&&e.cause)try{yield function(i,s){return N(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tg(n,r)}else if(e instanceof qa?n.Q_.Ke(e):e instanceof kp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(se.min()))try{let r=yield XP(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(mt.EMPTY_BYTE_STRING,d.snapshotVersion)),s1(s,c);let f=new Za(d.target,c,l,d.sequenceNumber);cD(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){L("RemoteStore","Failed to raise snapshot:",r),yield tg(n,r)}})}function tg(n,e,t){return N(this,null,function*(){if(!as(e))throw e;n.L_.add(1),yield uc(n),n.q_.set("Offline"),t||(t=()=>XP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield ql(n)}))})}function a1(n,e){return e().catch(t=>tg(n,t,e))}function lc(n){return N(this,null,function*(){let e=W(n),t=ss(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;SH(e);)try{let i=yield _H(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,AH(e,i)}catch(i){yield tg(e,i)}c1(e)&&u1(e)})}function SH(n){return cs(n)&&n.O_.length<10}function AH(n,e){n.O_.push(e);let t=ss(n);t.r_()&&t.V_&&t.m_(e.mutations)}function c1(n){return cs(n)&&!ss(n).n_()&&n.O_.length>0}function u1(n){ss(n).start()}function MH(n){return N(this,null,function*(){ss(n).p_()})}function xH(n){return N(this,null,function*(){let e=ss(n);for(let t of n.O_)e.m_(t.mutations)})}function RH(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=EE.from(r,e,t);yield a1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield lc(n)})}function NH(n,e){return N(this,null,function*(){e&&ss(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(o){return MP(o)&&o!==x.ABORTED}(i.code)){let s=r.O_.shift();ss(r).s_(),yield a1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield lc(r)}})}(n,e)),c1(n)&&u1(n)})}function FN(n,e){return N(this,null,function*(){let t=W(n);t.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let r=cs(t);t.L_.add(3),yield uc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield ql(t)})}function mI(n,e){return N(this,null,function*(){let t=W(n);e?(t.L_.delete(2),yield ql(t)):e||(t.L_.add(2),yield uc(t),t.q_.set("Unknown"))})}function dc(n){return n.K_||(n.K_=function(t,r,i){let s=W(t);return s.w_(),new dI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:DH.bind(null,n),Ro:bH.bind(null,n),mo:CH.bind(null,n),d_:TH.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),lD(n)?uD(n):n.q_.set("Unknown")):(yield n.K_.stop(),o1(n))}))),n.K_}function ss(n){return n.U_||(n.U_=function(t,r,i){let s=W(t);return s.w_(),new hI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:MH.bind(null,n),mo:NH.bind(null,n),f_:xH.bind(null,n),g_:RH.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield lc(n)):(yield n.U_.stop(),n.O_.length>0&&(L("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var yI=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Dt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function hc(n,e){if(ft("AsyncQueue",`${e}: ${n}`),as(n))return new F(x.UNAVAILABLE,`${e}: ${n}`);throw n}var ng=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||K.comparator(t.key,r.key):(t,r)=>K.comparator(t.key,r.key),this.keyedMap=cl(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var rg=class{constructor(){this.W_=new Ze(K.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},nc=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,ng.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ul(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var vI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},_I=class{constructor(){this.queries=VN(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=W(t),s=i.queries;i.queries=VN(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new F(x.ABORTED,"Firestore shutting down"))}};function VN(){return new Nr(n=>gP(n),Ul)}function dD(n,e){return N(this,null,function*(){let t=W(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new vI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=hc(o,`Initialization of query '${Fa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&fD(t)})}function hD(n,e){return N(this,null,function*(){let t=W(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function PH(n,e){let t=W(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&fD(t)}function kH(n,e,t){let r=W(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function fD(n){n.Y_.forEach(e=>{e.next()})}var wI,LN;(LN=wI||(wI={})).ea="default",LN.Cache="cache";var Nl=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new nc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==wI.Cache}};var EI=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var ig=class{constructor(e){this.serializer=e}Es(e){return Ar(this.serializer,e)}ds(e){return e.metadata.exists?VP(this.serializer,e.document,!1):bt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return gt(e)}},II=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=l1(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Te.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new ig(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let a=(t.get(o)||he()).add(s);t.set(o,a)}}return t}complete(){return N(this,null,function*(){let e=yield wH(this.localStore,new ig(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield EH(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function l1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var sg=class{constructor(e){this.key=e}},og=class{constructor(e){this.key=e}},ag=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=yP(e),this.Ra=new ng(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new rg,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=Bl(this.query,f)?f:null,_=!!g&&this.mutatedKeys.has(g.key),D=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),T=!1;g&&m?g.data.isEqual(m.data)?_!==D&&(r.track({type:3,doc:m}),T=!0):this.ga(g,m)||(r.track({type:2,doc:m}),T=!0,(c&&this.Aa(m,c)>0||l&&this.Aa(m,l)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),T=!0):g&&!m&&(r.track({type:1,doc:g}),T=!0,(c||l)&&(a=!0)),T&&(m?(o=o.add(m),s=D?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(m,_){let D=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return D(m)-D(_)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new nc(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=he(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new og(r))}),this.da.forEach(r=>{e.has(r)||t.push(new sg(r))}),t}ba(e){this.Ta=e.Ts,this.da=he();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return nc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},DI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},bI=class{constructor(e){this.key=e,this.va=!1}},CI=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Nr(a=>gP(a),Ul),this.Ma=new Map,this.xa=new Set,this.Oa=new Ze(K.comparator),this.Na=new Map,this.La=new Ml,this.Ba={},this.ka=new Map,this.qa=Ja.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function OH(n,e,t=!0){return N(this,null,function*(){let r=Eg(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield d1(r,e,t,!0),i})}function FH(n,e){return N(this,null,function*(){let t=Eg(n);yield d1(t,e,!0,!1)})}function d1(n,e,t,r){return N(this,null,function*(){let i=yield Xa(n.localStore,sn(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield pD(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&wg(n.remoteStore,i),a})}function pD(n,e,t,r,i){return N(this,null,function*(){n.Ka=(f,g,m)=>function(D,T,O,U){return N(this,null,function*(){let P=T.view.ma(O);P.ns&&(P=yield Qp(D.localStore,T.query,!1).then(({documents:I})=>T.view.ma(I,P)));let z=U&&U.targetChanges.get(T.targetId),ne=U&&U.targetMismatches.get(T.targetId)!=null,Z=T.view.applyChanges(P,D.isPrimaryClient,z,ne);return TI(D,T.targetId,Z.wa),Z.snapshot})}(n,f,g,m);let s=yield Qp(n.localStore,e,!0),o=new ag(e,s.Ts),a=o.ma(s.documents),c=Cl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);TI(n,t,l.wa);let d=new DI(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function VH(n,e,t){return N(this,null,function*(){let r=W(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ul(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ec(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&tc(r.remoteStore,i.targetId),rc(r,i.targetId)}).catch(os))):(rc(r,i.targetId),yield ec(r.localStore,i.targetId,!0))})}function LH(n,e){return N(this,null,function*(){let t=W(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),tc(t.remoteStore,r.targetId))})}function jH(n,e,t){return N(this,null,function*(){let r=vD(n);try{let i=yield function(o,a){let c=W(o),l=rt.now(),d=a.reduce((m,_)=>m.add(_.key),he()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=pn(),D=he();return c.cs.getEntries(m,d).next(T=>{_=T,_.forEach((O,U)=>{U.isValidDocument()||(D=D.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,_)).next(T=>{f=T;let O=[];for(let U of a){let P=Xz(U,f.get(U.key).overlayedDocument);P!=null&&O.push(new or(U.key,P,cP(P.value.mapValue),ut.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,O,a)}).next(T=>{g=T;let O=T.applyToLocalDocumentSet(f,D);return c.documentOverlayCache.saveOverlays(m,T.batchId,O)})}).then(()=>({batchId:g.batchId,changes:_P(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ze(le)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield pi(r,i.changes),yield lc(r.remoteStore)}catch(i){let s=hc(i,"Failed to persist write");t.reject(s)}})}function h1(n,e){return N(this,null,function*(){let t=W(n);try{let r=yield vH(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?te(o.va):i.removedDocuments.size>0&&(te(o.va),o.va=!1))}),yield pi(t,r,e)}catch(r){yield os(r)}})}function jN(n,e,t){let r=W(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=W(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&fD(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function UH(n,e,t){return N(this,null,function*(){let r=W(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ze(K.comparator);o=o.insert(s,bt.newNoDocument(s,se.min()));let a=he().add(s),c=new bl(se.min(),new Map,new Ze(le),o,a);yield h1(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),yD(r)}else yield ec(r.localStore,e,!1).then(()=>rc(r,e,t)).catch(os)})}function BH(n,e){return N(this,null,function*(){let t=W(n),r=e.batch.batchId;try{let i=yield yH(t.localStore,e);mD(t,r,null),gD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield pi(t,i)}catch(i){yield os(i)}})}function $H(n,e,t){return N(this,null,function*(){let r=W(n);try{let i=yield function(o,a){let c=W(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(te(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);mD(r,e,t),gD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield pi(r,i)}catch(i){yield os(i)}})}function qH(n,e){return N(this,null,function*(){let t=W(n);cs(t.remoteStore)||L("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=W(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=hc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function gD(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function mD(n,e,t){let r=W(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function rc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||f1(n,r)})}function f1(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(tc(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),yD(n))}function TI(n,e,t){for(let r of t)r instanceof sg?(n.La.addReference(r.key,e),zH(n,r)):r instanceof og?(L("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||f1(n,r.key)):Y()}function zH(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(L("SyncEngine","New document in limbo: "+t),n.xa.add(r),yD(n))}function yD(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new K(Te.fromString(e)),r=n.qa.next();n.Na.set(r,new bI(t)),n.Oa=n.Oa.insert(t,r),wg(n.remoteStore,new Za(sn(cc(t.path)),r,"TargetPurposeLimboResolution",Sn.oe))}}function pi(n,e,t){return N(this,null,function*(){let r=W(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=iI.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return N(this,null,function*(){let d=W(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(l,g=>M.forEach(g.$i,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>M.forEach(g.Ui,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!as(f))throw f;L("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let m=d.os.get(g),_=m.snapshotVersion,D=m.withLastLimboFreeSnapshotVersion(_);d.os=d.os.insert(g,D)}}})}(r.localStore,s))})}function HH(n,e){return N(this,null,function*(){let t=W(n);if(!t.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let r=yield JP(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new F(x.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield pi(t,r.hs)}})}function GH(n,e){let t=W(n),r=t.Na.get(e);if(r&&r.va)return he().add(r.key);{let i=he(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function WH(n,e){return N(this,null,function*(){let t=W(n),r=yield Qp(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&TI(t,e.targetId,i.wa),i})}function KH(n,e){return N(this,null,function*(){let t=W(n);return n1(t.localStore,e).then(r=>pi(t,r))})}function QH(n,e,t,r){return N(this,null,function*(){let i=W(n),s=yield function(a,c){let l=W(a),d=W(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,c).next(g=>g?l.localDocuments.getDocuments(f,g):M.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield lc(i.remoteStore):t==="acknowledged"||t==="rejected"?(mD(i,e,r||null),gD(i,e),function(a,c){W(W(a).mutationQueue).On(c)}(i.localStore,e)):Y(),yield pi(i,s)):L("SyncEngine","Cannot apply mutation batch with id: "+e)})}function YH(n,e){return N(this,null,function*(){let t=W(n);if(Eg(t),vD(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield UN(t,r.toArray());t.Qa=!0,yield mI(t.remoteStore,!0);for(let s of i)wg(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(rc(t,o),ec(t.localStore,o,!0))),tc(t.remoteStore,o)}),yield i,yield UN(t,r),function(o){let a=W(o);a.Na.forEach((c,l)=>{tc(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ze(K.comparator)}(t),t.Qa=!1,yield mI(t.remoteStore,!1)}})}function UN(n,e,t){return N(this,null,function*(){let r=W(n),i=[],s=[];for(let o of e){let a,c=r.Ma.get(o);if(c&&c.length!==0){a=yield Xa(r.localStore,sn(c[0]));for(let l of c){let d=r.Fa.get(l),f=yield WH(r,d);f.snapshot&&s.push(f.snapshot)}}else{let l=yield t1(r.localStore,o);a=yield Xa(r.localStore,l),yield pD(r,p1(l),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})}function p1(n){return pP(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ZH(n){return function(t){return W(W(t).persistence).Qi()}(W(n).localStore)}function JH(n,e,t,r){return N(this,null,function*(){let i=W(n);if(i.Qa)return void L("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield n1(i.localStore,mP(s[0])),a=bl.createSynthesizedRemoteEventForCurrentChange(e,t==="current",mt.EMPTY_BYTE_STRING);yield pi(i,o,a);break}case"rejected":yield ec(i.localStore,e,!0),rc(i,e,r);break;default:Y()}})}function XH(n,e,t){return N(this,null,function*(){let r=Eg(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){L("SyncEngine","Adding an already active target "+i);continue}let s=yield t1(r.localStore,i),o=yield Xa(r.localStore,s);yield pD(r,p1(s),o.targetId,!1,o.resumeToken),wg(r.remoteStore,o)}for(let i of t)r.Ma.has(i)&&(yield ec(r.localStore,i,!1).then(()=>{tc(r.remoteStore,i),rc(r,i)}).catch(os))}})}function Eg(n){let e=W(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UH.bind(null,e),e.Ca.d_=PH.bind(null,e.eventManager),e.Ca.$a=kH.bind(null,e.eventManager),e}function vD(n){let e=W(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$H.bind(null,e),e}function eG(n,e,t){let r=W(n);(function(s,o,a){return N(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(m,_){let D=W(m),T=gt(_.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",O=>D.Gr.getBundleMetadata(O,_.id)).then(O=>!!O&&O.createTime.compareTo(T)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(l1(c));let l=new II(c,s.localStore,o.serializer),d=yield o.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield o.Ua()}let f=yield l.complete();return yield pi(s,f.Ia,void 0),yield function(m,_){let D=W(m);return D.persistence.runTransaction("Save bundle","readwrite",T=>D.Gr.saveBundleMetadata(T,_))}(s.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(c){return $n("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Pl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=$l(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ZP(this.persistence,new Kp,e.initialUser,this.serializer)}createPersistence(e){return new Gp(Wp.Zr,this.serializer)}createSharedClientState(e){return new Jp}terminate(){return N(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var cg=class n extends Pl{constructor(e,t,r){super(),this.Wa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Rm(n.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield vD(this.Wa.syncEngine),yield lc(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return ZP(this.persistence,new Kp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new $E(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new sE(t,this.persistence);return new iE(e.asyncQueue,r)}createPersistence(e){let t=aD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new rI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,i1(),wp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Jp}},SI=class n extends cg{constructor(e,t){super(e,t,!1),this.Wa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Rm(n.prototype,this,"initialize").call(this,e);let t=this.Wa.syncEngine;this.sharedClientState instanceof pl&&(this.sharedClientState.syncEngine={no:QH.bind(null,t),ro:JH.bind(null,t),io:XH.bind(null,t),Qi:ZH.bind(null,t),eo:KH.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield YH(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=i1();if(!pl.D(t))throw new F(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=aD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pl(t,e.asyncQueue,r,e.clientId,e.initialUser)}},kl=class{initialize(e,t){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HH.bind(null,this.syncEngine),yield mI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new _I}()}createDatastore(e){let t=$l(e.databaseInfo.databaseId),r=function(s){return new lI(s)}(e.databaseInfo);return function(s,o,a,c){return new fI(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new gI(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>jN(this.syncEngine,t,0),function(){return Xp.D()?new Xp:new cI}())}createSyncEngine(e,t){return function(i,s,o,a,c,l,d){let f=new CI(i,s,o,a,c,l);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return N(this,null,function*(){var e,t;yield function(i){return N(this,null,function*(){let s=W(i);L("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield uc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};function BN(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ic=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):ft("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var AI=class{constructor(e,t){this.ja=e,this.serializer=t,this.metadata=new Dt,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return N(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let t=this.Ha.decode(e),r=Number(t);isNaN(r)&&this.Za(`length string (${t}) is not valid number`);let i=yield this.Xa(r);return new EI(JSON.parse(i),e.length+r)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return N(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Xa(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let t=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return N(this,null,function*(){let e=yield this.ja.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var MI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return N(this,null,function*(){let o=W(i),a={documents:s.map(f=>Tl(o.serializer,f))},c=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,Te.emptyPath(),a,s.length),l=new Map;c.forEach(f=>{let g=sH(o.serializer,f);l.set(g.key.toString(),g)});let d=[];return s.forEach(f=>{let g=l.get(f.toString());te(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new is(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=K.fromPath(r);this.mutations.push(new El(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let s=W(r),o={writes:i.map(a=>Sl(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,Te.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Y();t=se.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new F(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(se.min())?ut.exists(!1):ut.updateTime(t):ut.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(se.min()))throw new F(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ut.updateTime(t)}return ut.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var xI=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.nu=r.maxAttempts,this.t_=new Rl(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>N(this,null,function*(){let e=new MI(this.datastore),t=this.su(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})}))}su(e){try{let t=this.updateFunction(e);return!Ll(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!MP(t)}return!1}};var RI=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>N(this,null,function*(){L("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(L("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Dt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=hc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ep(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield JP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function NI(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield _D(n);L("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>FN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>FN(e.remoteStore,i)),n._onlineComponents=e})}function g1(n){return n.name==="FirebaseError"?n.code===x.FAILED_PRECONDITION||n.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function _D(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ep(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!g1(t))throw t;$n("Error using user provided cache. Falling back to memory cache: "+t),yield Ep(n,new Pl)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield Ep(n,new Pl);return n._offlineComponents})}function Ig(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield NI(n,n._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield NI(n,new kl))),n._onlineComponents})}function m1(n){return _D(n).then(e=>e.persistence)}function wD(n){return _D(n).then(e=>e.localStore)}function y1(n){return Ig(n).then(e=>e.remoteStore)}function ED(n){return Ig(n).then(e=>e.syncEngine)}function tG(n){return Ig(n).then(e=>e.datastore)}function sc(n){return N(this,null,function*(){let e=yield Ig(n),t=e.eventManager;return t.onListen=OH.bind(null,e.syncEngine),t.onUnlisten=VH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LH.bind(null,e.syncEngine),t})}function nG(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield m1(n),t=yield y1(n);return e.setNetworkEnabled(!0),function(i){let s=W(i);return s.L_.delete(0),ql(s)}(t)}))}function rG(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield m1(n),t=yield y1(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let s=W(i);s.L_.add(0),yield uc(s),s.q_.set("Offline")})}(t)}))}function iG(n,e){let t=new Dt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s,o){return N(this,null,function*(){try{let a=yield function(l,d){let f=W(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new F(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=hc(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield wD(n),e,t)})),t.promise}function v1(n,e,t={}){let r=new Dt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(s,o,a,c,l){let d=new ic({next:g=>{o.enqueueAndForget(()=>hD(s,f));let m=g.docs.has(a);!m&&g.fromCache?l.reject(new F(x.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?l.reject(new F(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Nl(cc(a.path),d,{includeMetadataChanges:!0,_a:!0});return dD(s,f)}(yield sc(n),n.asyncQueue,e,t,r)})),r.promise}function sG(n,e){let t=new Dt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s,o){return N(this,null,function*(){try{let a=yield Qp(i,s,!0),c=new ag(s,a.Ts),l=c.ma(a.documents),d=c.applyChanges(l,!1);o.resolve(d.snapshot)}catch(a){let c=hc(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield wD(n),e,t)})),t.promise}function _1(n,e,t={}){let r=new Dt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(s,o,a,c,l){let d=new ic({next:g=>{o.enqueueAndForget(()=>hD(s,f)),g.fromCache&&c.source==="server"?l.reject(new F(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Nl(a,d,{includeMetadataChanges:!0,_a:!0});return dD(s,f)}(yield sc(n),n.asyncQueue,e,t,r)})),r.promise}function oG(n,e){let t=new ic(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s){W(i).Y_.add(s),s.next()}(yield sc(n),t)})),()=>{t.za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s){W(i).Y_.delete(s)}(yield sc(n),t)}))}}function aG(n,e,t,r){let i=function(o,a){let c;return c=typeof o=="string"?RP().encode(o):o,function(d,f){return new AI(d,f)}(function(d,f){if(d instanceof Uint8Array)return BN(d,f);if(d instanceof ArrayBuffer)return BN(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,$l(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){eG(yield ED(n),i,r)}))}function cG(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let s=W(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield wD(n),e)}))}function w1(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var $N=new Map;function ID(n,e,t){if(!t)throw new F(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DD(n,e,t,r){if(e===!0&&r===!0)throw new F(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qN(n){if(!K.isDocumentKey(n))throw new F(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zN(n){if(K.isDocumentKey(n))throw new F(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Dg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y()}function Se(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new F(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Dg(n);throw new F(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function E1(n,e){if(e<=0)throw new F(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var ug=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},uo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ug({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ug(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Kw;switch(r.type){case"firstParty":return new Jw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=$N.get(t);r&&(L("ComponentProvider","Removing Datastore"),$N.delete(t),r.terminate())}(this),Promise.resolve()}};function bg(n,e,t,r={}){var i;let s=(n=Se(n,uo))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&$n("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=It.MOCK_USER;else{a=rC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new F(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new It(l)}n._authCredentials=new Qw(new Ip(a,c))}}var Vt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ge=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Mr=class n extends Vt{constructor(e,t,r){super(e,t,cc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new K(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Cg(n,e,...t){if(n=tt(n),ID("collection","path",e),n instanceof uo){let r=Te.fromString(e,...t);return zN(r),new Mr(n,null,r)}{if(!(n instanceof Ge||n instanceof Mr))throw new F(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Te.fromString(e,...t));return zN(r),new Mr(n.firestore,null,r)}}function bD(n,e){if(n=Se(n,uo),ID("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vt(n,null,function(r){return new sr(Te.emptyPath(),r)}(e))}function fc(n,e,...t){if(n=tt(n),arguments.length===1&&(e=Dp.newId()),ID("doc","path",e),n instanceof uo){let r=Te.fromString(e,...t);return qN(r),new Ge(n,null,new K(r))}{if(!(n instanceof Ge||n instanceof Mr))throw new F(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Te.fromString(e,...t));return qN(r),new Ge(n.firestore,n instanceof Mr?n.converter:null,new K(r))}}function Tg(n,e){return n=tt(n),e=tt(e),(n instanceof Ge||n instanceof Mr)&&(e instanceof Ge||e instanceof Mr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Sg(n,e){return n=tt(n),e=tt(e),n instanceof Vt&&e instanceof Vt&&n.firestore===e.firestore&&Ul(n._query,e._query)&&n.converter===e.converter}var PI=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Rl(this,"async_queue_retry"),this.Eu=()=>{let t=wp();t&&L("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=wp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=wp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new Dt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return N(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!as(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ft("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=yI.createAndSchedule(this,e,t,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&Y()}verifyOperationInProgress(){}mu(){return N(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function kI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var OI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var I1=-1,et=class extends uo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new PI}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||b1(this),this._firestoreClient.terminate()}};function D1(n,e){let t=typeof n=="object"?n:jc(),r=typeof n=="string"?n:e||"(default)",i=Om(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=nC("firestore");s&&bg(i,...s)}return i}function Mt(n){return n._firestoreClient||b1(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function b1(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,d){return new oE(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,w1(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new RI(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function CD(n,e){T1(n=Se(n,et));let t=Mt(n);if(t._uninitializedComponentsProvider)throw new F(x.FAILED_PRECONDITION,"SDK cache is already specified.");$n("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=n._freezeSettings(),i=new kl;return C1(t,i,new cg(i,r.cacheSizeBytes,e?.forceOwnership))}function TD(n){T1(n=Se(n,et));let e=Mt(n);if(e._uninitializedComponentsProvider)throw new F(x.FAILED_PRECONDITION,"SDK cache is already specified.");$n("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),r=new kl;return C1(e,r,new SI(r,t.cacheSizeBytes))}function C1(n,e,t){let r=new Dt;return n.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield Ep(n,t),yield NI(n,e),r.resolve()}catch(i){let s=i;if(!g1(s))throw s;$n("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function SD(n){if(n._initialized&&!n._terminated)throw new F(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Dt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Zi.D())return Promise.resolve();let i=r+"main";yield Zi.delete(i)})}(aD(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function AD(n){return function(t){let r=new Dt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return qH(yield ED(t),r)})),r.promise}(Mt(n=Se(n,et)))}function MD(n){return nG(Mt(n=Se(n,et)))}function xD(n){return rG(Mt(n=Se(n,et)))}function RD(n,e){let t=Mt(n=Se(n,et)),r=new OI;return aG(t,n._databaseId,e,r),r}function ND(n,e){return cG(Mt(n=Se(n,et)),e).then(t=>t?new Vt(n,null,t.query):null)}function T1(n){if(n._initialized||n._terminated)throw new F(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Pr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(mt.fromBase64String(e))}catch(t){throw new F(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ar=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new F(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var hi=class{constructor(e){this._methodName=e}};var lo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}};var Ol=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var uG=/^__.*__$/,FI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new or(e,this.data,this.fieldMask,t,this.fieldTransforms):new rs(e,this.data,t,this.fieldTransforms)}},lg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new or(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function S1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}var dg=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return hg(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(S1(this.wu)&&uG.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},VI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$l(e)}Nu(e,t,r,i=!1){return new dg({wu:e,methodName:t,Ou:r,path:pt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function go(n){let e=n._freezeSettings(),t=$l(n._databaseId);return new VI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ag(n,e,t,r,i,s={}){let o=n.Nu(s.merge||s.mergeFields?2:0,e,t,i);OD("Data must be an object, but it was:",o,r);let a=x1(r,o),c,l;if(s.merge)c=new An(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=$I(e,f,t);if(!o.contains(g))throw new F(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);N1(d,g)||d.push(g)}c=new An(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new FI(new zt(a),c,l)}var Fl=class n extends hi{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function A1(n,e,t){return new dg({wu:3,Ou:e.settings.Ou,methodName:n._methodName,Du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var LI=class n extends hi{_toFieldTransform(e){return new oo(e.path,new ts)}isEqual(e){return e instanceof n}},jI=class n extends hi{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){let t=A1(this,e,!0),r=this.Lu.map(s=>mo(s,t)),i=new li(r);return new oo(e.path,i)}isEqual(e){return e instanceof n&&km(this.Lu,e.Lu)}},UI=class n extends hi{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){let t=A1(this,e,!0),r=this.Lu.map(s=>mo(s,t)),i=new di(r);return new oo(e.path,i)}isEqual(e){return e instanceof n&&km(this.Lu,e.Lu)}},BI=class n extends hi{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){let t=new ns(e.serializer,IP(e.serializer,this.Bu));return new oo(e.path,t)}isEqual(e){return e instanceof n&&this.Bu===e.Bu}};function PD(n,e,t,r){let i=n.Nu(1,e,t);OD("Data must be an object, but it was:",i,r);let s=[],o=zt.empty();po(r,(c,l)=>{let d=FD(e,c,t);l=tt(l);let f=i.Cu(d);if(l instanceof Fl)s.push(d);else{let g=mo(l,f);g!=null&&(s.push(d),o.set(d,g))}});let a=new An(s);return new lg(o,a,i.fieldTransforms)}function kD(n,e,t,r,i,s){let o=n.Nu(1,e,t),a=[$I(e,r,t)],c=[i];if(s.length%2!=0)throw new F(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push($I(e,s[g])),c.push(s[g+1]);let l=[],d=zt.empty();for(let g=a.length-1;g>=0;--g)if(!N1(l,a[g])){let m=a[g],_=c[g];_=tt(_);let D=o.Cu(m);if(_ instanceof Fl)l.push(m);else{let T=mo(_,D);T!=null&&(l.push(m),d.set(m,T))}}let f=new An(l);return new lg(d,f,o.fieldTransforms)}function M1(n,e,t,r=!1){return mo(t,n.Nu(r?4:3,e))}function mo(n,e){if(R1(n=tt(n)))return OD("Unsupported field value:",e,n),x1(n,e);if(n instanceof hi)return function(r,i){if(!S1(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=mo(a,i.Fu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=rt.fromDate(r);return{timestampValue:Ya(i.serializer,s)}}if(r instanceof rt){let s=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ya(i.serializer,s)}}if(r instanceof lo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pr)return{bytesValue:NP(i.serializer,r._byteString)};if(r instanceof Ge){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:iD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ol)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Mu("VectorValues must only contain numeric values.");return rD(a.serializer,c)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Dg(r)}`)}(n,e)}function x1(n,e){let t={};return iP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):po(n,(r,i)=>{let s=mo(i,e.bu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function R1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rt||n instanceof lo||n instanceof Pr||n instanceof Ge||n instanceof hi||n instanceof Ol)}function OD(n,e,t){if(!R1(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Dg(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function $I(n,e,t){if((e=tt(e))instanceof ar)return e._internalPath;if(typeof e=="string")return FD(n,e);throw hg("Field path arguments must be of type string or ",n,!1,void 0,t)}var lG=new RegExp("[~\\*/\\[\\]]");function FD(n,e,t){if(e.search(lG)>=0)throw hg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ar(...e.split("."))._internalPath}catch{throw hg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hg(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new F(x.INVALID_ARGUMENT,a+n+c)}function N1(n,e){return n.some(t=>t.isEqual(e))}var ho=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Mg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qI=class extends ho{data(){return super.data()}};function Mg(n,e){return typeof e=="string"?FD(n,e):e instanceof ar?e._internalPath:e._delegate._internalPath}function P1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new F(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vl=class{},fo=class extends Vl{};function kr(n,e,...t){let r=[];e instanceof Vl&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof zI).length,a=s.filter(c=>c instanceof fg).length;if(o>1||o>0&&a>0)throw new F(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var fg=class n extends fo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return O1(e._query,t),new Vt(e.firestore,e.converter,_E(e._query,t))}_parse(e){let t=go(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new F(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){GN(f,d);let m=[];for(let _ of f)m.push(HN(c,s,_));g={arrayValue:{values:m}}}else g=HN(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||GN(f,d),g=M1(a,o,f,d==="in"||d==="not-in");return be.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function VD(n,e,t){let r=e,i=Mg("where",n);return fg._create(i,r,t)}var zI=class n extends Vl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Le.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)O1(o,c),o=_E(o,c)}(e._query,t),new Vt(e.firestore,e.converter,_E(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var HI=class n extends fo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new F(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new io(s,o)}(e._query,this._field,this._direction);return new Vt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new sr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function LD(n,e="asc"){let t=e,r=Mg("orderBy",n);return HI._create(r,t)}var pg=class n extends fo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Vt(e.firestore,e.converter,Pp(e._query,this._limit,this._limitType))}};function jD(n){return E1("limit",n),pg._create("limit",n,"F")}function UD(n){return E1("limitToLast",n),pg._create("limitToLast",n,"L")}var gg=class n extends fo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=k1(e,this.type,this._docOrFields,this._inclusive);return new Vt(e.firestore,e.converter,function(i,s){return new sr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function BD(...n){return gg._create("startAt",n,!0)}function $D(...n){return gg._create("startAfter",n,!1)}var mg=class n extends fo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=k1(e,this.type,this._docOrFields,this._inclusive);return new Vt(e.firestore,e.converter,function(i,s){return new sr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function qD(...n){return mg._create("endBefore",n,!1)}function zD(...n){return mg._create("endAt",n,!0)}function k1(n,e,t,r){if(t[0]=tt(t[0]),t[0]instanceof ho)return function(s,o,a,c,l){if(!c)throw new F(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of $a(s))if(f.field.isKeyField())d.push(ro(o,c.key));else{let g=c.data.field(f.field);if(vg(g))throw new F(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let m=f.field.canonicalString();throw new F(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new Rr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=go(n.firestore);return function(o,a,c,l,d,f){let g=o.explicitOrderBy;if(d.length>g.length)throw new F(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let _=0;_<d.length;_++){let D=d[_];if(g[_].field.isKeyField()){if(typeof D!="string")throw new F(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof D}`);if(!tD(o)&&D.indexOf("/")!==-1)throw new F(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${D}' contains a slash.`);let T=o.path.child(Te.fromString(D));if(!K.isDocumentKey(T))throw new F(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);let O=new K(T);m.push(ro(a,O))}else{let T=M1(c,l,D);m.push(T)}}return new Rr(m,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function HN(n,e,t){if(typeof(t=tt(t))=="string"){if(t==="")throw new F(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tD(e)&&t.indexOf("/")!==-1)throw new F(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Te.fromString(t));if(!K.isDocumentKey(r))throw new F(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ro(n,new K(r))}if(t instanceof Ge)return ro(n,t._key);throw new F(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dg(t)}.`)}function GN(n,e){if(!Array.isArray(n)||n.length===0)throw new F(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O1(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new F(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var oc=class{convertValue(e,t="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return po(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Xe(o.doubleValue));return new Ol(s)}convertGeoPoint(e){return new lo(Xe(e.latitude),Xe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=XI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){let t=ui(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Te.fromString(e);te(qP(r));let i=new Xi(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(t)||ft(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function xg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var GI=class extends oc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,t)}};var ci=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},zn=class extends ho{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Qi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Mg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Qi=class extends zn{data(e={}){return super.data(e)}},cr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ci(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Qi(this._firestore,this._userDataWriter,r.key,r,new ci(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new F(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Qi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ci(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Qi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ci(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:dG(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function dG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function Rg(n,e){return n instanceof zn&&e instanceof zn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof cr&&e instanceof cr&&n._firestore===e._firestore&&Sg(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function HD(n){n=Se(n,Ge);let e=Se(n.firestore,et);return v1(Mt(e),n._key).then(t=>e0(e,n,t))}var fi=class extends oc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,t)}};function GD(n){n=Se(n,Ge);let e=Se(n.firestore,et),t=Mt(e),r=new fi(e);return iG(t,n._key).then(i=>new zn(e,r,n._key,i,new ci(i!==null&&i.hasLocalMutations,!0),n.converter))}function WD(n){n=Se(n,Ge);let e=Se(n.firestore,et);return v1(Mt(e),n._key,{source:"server"}).then(t=>e0(e,n,t))}function KD(n){n=Se(n,Vt);let e=Se(n.firestore,et),t=Mt(e),r=new fi(e);return P1(n._query),_1(t,n._query).then(i=>new cr(e,r,n,i))}function QD(n){n=Se(n,Vt);let e=Se(n.firestore,et),t=Mt(e),r=new fi(e);return sG(t,n._query).then(i=>new cr(e,r,n,i))}function YD(n){n=Se(n,Vt);let e=Se(n.firestore,et),t=Mt(e),r=new fi(e);return _1(t,n._query,{source:"server"}).then(i=>new cr(e,r,n,i))}function Ng(n,e,t){n=Se(n,Ge);let r=Se(n.firestore,et),i=xg(n.converter,e,t);return pc(r,[Ag(go(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ut.none())])}function Pg(n,e,t,...r){n=Se(n,Ge);let i=Se(n.firestore,et),s=go(i),o;return o=typeof(e=tt(e))=="string"||e instanceof ar?kD(s,"updateDoc",n._key,e,t,r):PD(s,"updateDoc",n._key,e),pc(i,[o.toMutation(n._key,ut.exists(!0))])}function ZD(n){return pc(Se(n.firestore,et),[new is(n._key,ut.none())])}function JD(n,e){let t=Se(n.firestore,et),r=fc(n),i=xg(n.converter,e);return pc(t,[Ag(go(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ut.exists(!1))]).then(()=>r)}function kg(n,...e){var t,r,i;n=tt(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||kI(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(kI(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof Ge)l=Se(n.firestore,et),d=cc(n._key.path),c={next:f=>{e[o]&&e[o](e0(l,n,f))},error:e[o+1],complete:e[o+2]};else{let f=Se(n,Vt);l=Se(f.firestore,et),d=f._query;let g=new fi(l);c={next:m=>{e[o]&&e[o](new cr(l,g,f,m))},error:e[o+1],complete:e[o+2]},P1(n._query)}return function(g,m,_,D){let T=new ic(D),O=new Nl(m,T,_);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return dD(yield sc(g),O)})),()=>{T.za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return hD(yield sc(g),O)}))}}(Mt(l),d,a,c)}function XD(n,e){return oG(Mt(n=Se(n,et)),kI(e)?e:{next:e})}function pc(n,e){return function(r,i){let s=new Dt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return jH(yield ED(r),i,s)})),s.promise}(Mt(n),e)}function e0(n,e,t){let r=t.docs.get(e._key),i=new fi(n);return new zn(n,i,e._key,r,new ci(t.hasPendingWrites,t.fromCache),e.converter)}var hG={maxAttempts:5};var yg=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=go(e)}set(e,t,r){this._verifyNotCommitted();let i=Wi(e,this._firestore),s=xg(i.converter,t,r),o=Ag(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ut.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=Wi(e,this._firestore),o;return o=typeof(t=tt(t))=="string"||t instanceof ar?kD(this._dataReader,"WriteBatch.update",s._key,t,r,i):PD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ut.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Wi(e,this._firestore);return this._mutations=this._mutations.concat(new is(t._key,ut.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Wi(n,e){if((n=tt(n)).firestore!==e)throw new F(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var WI=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=go(t)}get(t){let r=Wi(t,this._firestore),i=new GI(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Y();let o=s[0];if(o.isFoundDocument())return new ho(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ho(this._firestore,i,r._key,null,r.converter);throw Y()})}set(t,r,i){let s=Wi(t,this._firestore),o=xg(s.converter,r,i),a=Ag(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){let o=Wi(t,this._firestore),a;return a=typeof(r=tt(r))=="string"||r instanceof ar?kD(this._dataReader,"Transaction.update",o._key,r,i,s):PD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){let r=Wi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Wi(e,this._firestore),r=new fi(this._firestore);return super.get(e).then(i=>new zn(this._firestore,r,t._key,i._document,new ci(!1,!1),t.converter))}};function t0(n,e,t){n=Se(n,et);let r=Object.assign(Object.assign({},hG),t);return function(s){if(s.maxAttempts<1)throw new F(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new Dt;return s.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield tG(s);new xI(s.asyncQueue,l,a,o,c).ru()})),c.promise}(Mt(n),i=>e(new WI(n,i)),r)}function n0(){return new Fl("deleteField")}function r0(){return new LI("serverTimestamp")}function i0(...n){return new jI("arrayUnion",n)}function s0(...n){return new UI("arrayRemove",n)}function o0(n){return new BI("increment",n)}(function(e,t=!0){(function(i){ac=i})(oC),Lc(new gs("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new et(new Yw(r.getProvider("auth-internal")),new eE(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xi(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Wt(HR,"4.7.1",e),Wt(HR,"4.7.1","esm2017")})();var fG="@firebase/firestore-compat",pG="0.3.36";function h0(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function F1(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function V1(){if(!sP())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Og=class n{constructor(e){this._delegate=e}static fromBase64String(e){return V1(),new n(Pr.fromBase64String(e))}static fromUint8Array(e){return F1(),new n(Pr.fromUint8Array(e))}toBase64(){return V1(),this._delegate.toBase64()}toUint8Array(){return F1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function a0(n){return gG(n,["next","error","complete"])}function gG(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var c0=class{enableIndexedDbPersistence(e,t){return CD(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return TD(e._delegate)}clearIndexedDbPersistence(e){return SD(e._delegate)}},Fg=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$n("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){bg(this._delegate,e,t,r)}enableNetwork(){return MD(this._delegate)}disableNetwork(){return xD(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,DD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return AD(this._delegate)}onSnapshotsInSync(e){return XD(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yc(this,Cg(this._delegate,e))}catch(t){throw on(t,"collection()","Firestore.collection()")}}doc(e){try{return new Or(this,fc(this._delegate,e))}catch(t){throw on(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new wo(this,bD(this._delegate,e))}catch(t){throw on(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return t0(this._delegate,t=>e(new Vg(this,t)))}batch(){return Mt(this._delegate),new Lg(new yg(this._delegate,e=>pc(this._delegate,e)))}loadBundle(e){return RD(this._delegate,e)}namedQuery(e){return ND(this._delegate,e).then(t=>t?new wo(this,t):null)}},gc=class extends oc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Og(new Pr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Or.forKey(t,this.firestore,null)}};function mG(n){KI(n)}var Vg=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gc(e)}get(e){let t=yo(e);return this._delegate.get(t).then(r=>new vo(this._firestore,new zn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=yo(e);return r?(h0("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=yo(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=yo(e);return this._delegate.delete(t),this}},Lg=class{constructor(e){this._delegate=e}set(e,t,r){let i=yo(e);return r?(h0("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=yo(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=yo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},mc=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Qi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _o(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new n(e,new gc(e),t),i.set(t,s)),s}};mc.INSTANCES=new WeakMap;var Or=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gc(e)}static forPath(e,t,r){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ge(t._delegate,r,new K(e)))}static forKey(e,t,r){return new n(t,new Ge(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new yc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yc(this.firestore,Cg(this._delegate,e))}catch(t){throw on(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=tt(e),e instanceof Ge?Tg(this._delegate,e):!1}set(e,t){t=h0("DocumentReference.set",t);try{return t?Ng(this._delegate,e,t):Ng(this._delegate,e)}catch(r){throw on(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Pg(this._delegate,e):Pg(this._delegate,e,t,...r)}catch(i){throw on(i,"updateDoc()","DocumentReference.update()")}}delete(){return ZD(this._delegate)}onSnapshot(...e){let t=L1(e),r=j1(e,i=>new vo(this.firestore,new zn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return kg(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=GD(this._delegate):e?.source==="server"?t=WD(this._delegate):t=HD(this._delegate),t.then(r=>new vo(this.firestore,new zn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(mc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function on(n,e,t){return n.message=n.message.replace(e,t),n}function L1(n){for(let e of n)if(typeof e=="object"&&!a0(e))return e;return{}}function j1(n,e){var t,r;let i;return a0(n[0])?i=n[0]:a0(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var vo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Or(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Rg(this._delegate,e._delegate)}},_o=class extends vo{data(e){let t=this._delegate.data(e);return this._delegate._converter||WN(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},wo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gc(e)}where(e,t,r){try{return new n(this.firestore,kr(this._delegate,VD(e,t,r)))}catch(i){throw on(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,kr(this._delegate,LD(e,t)))}catch(r){throw on(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,kr(this._delegate,jD(e)))}catch(t){throw on(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,kr(this._delegate,UD(e)))}catch(t){throw on(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,kr(this._delegate,BD(...e)))}catch(t){throw on(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,kr(this._delegate,$D(...e)))}catch(t){throw on(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,kr(this._delegate,qD(...e)))}catch(t){throw on(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,kr(this._delegate,zD(...e)))}catch(t){throw on(t,"endAt()","Query.endAt()")}}isEqual(e){return Sg(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=QD(this._delegate):e?.source==="server"?t=YD(this._delegate):t=KD(this._delegate),t.then(r=>new zl(this.firestore,new cr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=L1(e),r=j1(e,i=>new zl(this.firestore,new cr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return kg(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(mc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},u0=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _o(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},zl=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new wo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _o(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new u0(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _o(this._firestore,r))})}isEqual(e){return Rg(this._delegate,e._delegate)}},yc=class n extends wo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Or(this.firestore,e):null}doc(e){try{return e===void 0?new Or(this.firestore,fc(this._delegate)):new Or(this.firestore,fc(this._delegate,e))}catch(t){throw on(t,"doc()","CollectionReference.doc()")}}add(e){return JD(this._delegate,e).then(t=>new Or(this.firestore,t))}isEqual(e){return Tg(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(mc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function yo(n){return Se(n,Ge)}var l0=class n{constructor(...e){this._delegate=new ar(...e)}static documentId(){return new n(pt.keyField().canonicalString())}isEqual(e){return e=tt(e),e instanceof ar?this._delegate._internalPath.isEqual(e._internalPath):!1}};var d0=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=r0();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=n0();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=i0(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=s0(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=o0(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var yG={Firestore:Fg,GeoPoint:lo,Timestamp:rt,Blob:Og,Transaction:Vg,WriteBatch:Lg,DocumentReference:Or,DocumentSnapshot:vo,Query:wo,QueryDocumentSnapshot:_o,QuerySnapshot:zl,CollectionReference:yc,FieldPath:l0,FieldValue:d0,setLogLevel:mG,CACHE_SIZE_UNLIMITED:I1};function vG(n,e){n.INTERNAL.registerComponent(new gs("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},yG)))}function _G(n){vG(n,(e,t)=>new Fg(e,t,new c0)),n.registerVersion(fG,pG)}_G(Kt);function wG(n,e=Hc){return new pe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function U1(n,e){return wG(n,e)}function EG(n,e){return U1(n,e).pipe(Es(void 0),Wc(),ee(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function g0(n,e){return U1(n,e).pipe(ee(t=>({payload:t,type:"query"})))}var jg=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:s}=q1(r,t);return new Bg(i,s,this.afs)}snapshotChanges(){return EG(this.ref,this.afs.schedulers.outsideAngular).pipe(nn)}valueChanges(e={}){return this.snapshotChanges().pipe(ee(({payload:t})=>e.idField?De(G({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Re(this.ref.get(e)).pipe(nn)}};function Ug(n,e){return g0(n,e).pipe(Es(void 0),Wc(),ee(t=>{let[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=s.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function B1(n,e,t){return Ug(n,t).pipe(ws((r,i)=>IG(r,i.map(s=>s.payload),e),[]),iy(),ee(r=>r.map(i=>({type:i.type,payload:i}))))}function IG(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=DG(n,r))}),n}function f0(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function DG(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return f0(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return f0(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return f0(n,e.oldIndex,1);break}return n}function $1(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Bg=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ug(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ee(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Es(void 0),Wc(),kt(([r,i])=>i.length>0||!r),ee(([,r])=>r),nn)}auditTrail(e){return this.stateChanges(e).pipe(ws((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=$1(e);return B1(this.query,t,this.afs.schedulers.outsideAngular).pipe(nn)}valueChanges(e={}){return g0(this.query,this.afs.schedulers.outsideAngular).pipe(ee(t=>t.payload.docs.map(r=>e.idField?De(G({},r.data()),{[e.idField]:r.id}):r.data())),nn)}get(e){return Re(this.query.get(e)).pipe(nn)}add(e){return this.ref.add(e)}doc(e){return new jg(this.ref.doc(e),this.afs)}},p0=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Ug(this.query,this.afs.schedulers.outsideAngular).pipe(nn):Ug(this.query,this.afs.schedulers.outsideAngular).pipe(ee(t=>t.filter(r=>e.indexOf(r.type)>-1)),kt(t=>t.length>0),nn)}auditTrail(e){return this.stateChanges(e).pipe(ws((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=$1(e);return B1(this.query,t,this.afs.schedulers.outsideAngular).pipe(nn)}valueChanges(e={}){return g0(this.query,this.afs.schedulers.outsideAngular).pipe(ee(r=>r.payload.docs.map(i=>e.idField?G({[e.idField]:i.id},i.data()):i.data())),nn)}get(e){return Re(this.query.get(e)).pipe(nn)}},bG=new Q("angularfire2.enableFirestorePersistence"),CG=new Q("angularfire2.firestore.persistenceSettings"),TG=new Q("angularfire2.firestore.settings"),SG=new Q("angularfire2.firestore.use-emulator");function q1(n,e=t=>t){return{query:e(n),ref:n}}var vc=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,l,d,f,g,m,_,D,T,O,U){this.schedulers=c;let P=el(t,a,r),z=d;f&&Fw(P,a,g,_,D,T,m,O),[this.firestore,this.persistenceEnabled$]=cp(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{let ne=a.runOutsideAngular(()=>P.firestore());if(s&&ne.settings(s),z&&ne.useEmulator(...z),i&&!ni(o)){let Z=()=>{try{return Re(ne.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),ie(!1)}};return[ne,a.runOutsideAngular(Z)]}else return[ne,ie(!1)]},[s,z,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:s,query:o}=q1(i,r),a=this.schedulers.ngZone.run(()=>s);return new Bg(a,o,this)}collectionGroup(t,r){let i=r||(o=>o),s=this.firestore.collectionGroup(t);return new p0(i(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new jg(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)($(Sa),$(Aa,8),$(bG,8),$(TG,8),$(Rt),$(_e),$(si),$(CG,8),$(SG,8),$($R,8),$(xw,8),$(Rw,8),$(Nw,8),$(Pw,8),$(kw,8),$(Ow,8),$(br,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var _c=(()=>{let e=class e{constructor(r){this.afs=r}loadFeaturedData(){return this.afs.collection("posts",r=>r.where("isFeatured","==",!0).limit(4)).snapshotChanges().pipe(ee(r=>r.map(i=>{let s=i.payload.doc.data();return{id:i.payload.doc.id,data:s}})),un(r=>(console.error("Error loading posts:",r),ie([]))))}loadLatest(){return this.afs.collection("posts",r=>r.orderBy("createdAt")).snapshotChanges().pipe(ee(r=>r.map(i=>{let s=i.payload.doc.data();return{id:i.payload.doc.id,data:s}})),un(r=>(console.error("Error loading posts:",r),ie([]))))}loadCategoryPosts(r){return this.afs.collection("posts",i=>i.where("category.categoryId","==",r).limit(4)).snapshotChanges().pipe(ee(i=>i.map(s=>{let o=s.payload.doc.data();return{id:s.payload.doc.id,data:o}})),un(i=>(console.error("Error loading posts:",i),ie([]))))}loadSinglePost(r){return this.afs.doc(`posts/${r}`).valueChanges()}loadSimilarPosts(r){return this.afs.collection("posts",i=>i.where("category.categoryId","==",r).limit(4)).snapshotChanges().pipe(ee(i=>i.map(s=>{let o=s.payload.doc.data();return{id:s.payload.doc.id,data:o}})),un(i=>(console.error("Error loading posts:",i),ie([]))))}countViews(r){let i={views:Kt.firestore.FieldValue.increment(1)};this.afs.doc(`posts/${r}`).update(i).then(()=>{})}};e.\u0275fac=function(i){return new(i||e)($(vc))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function AG(n,e){if(n&1&&(V(0,"div",9),Ne(1,"app-post-card",10),k()),n&2){let t=e.$implicit;de(),Me("postData",t)}}function MG(n,e){if(n&1&&(V(0,"div",11),Ne(1,"app-post-card",10),k()),n&2){let t=e.$implicit;de(),Me("postData",t)}}var z1=(()=>{let e=class e{constructor(r){this.postService=r,this.featuredPostsArray=[],this.latestPostArray=[],this.postService.loadFeaturedData().subscribe(i=>{this.featuredPostsArray=i}),this.postService.loadLatest().subscribe(i=>{this.latestPostArray=i})}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(ae(_c))},e.\u0275cmp=Oe({type:e,selectors:[["app-home"]],standalone:!0,features:[Fe],decls:18,vars:2,consts:[[1,"featured-section"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","text-center","mt-5"],[1,"text-white"],["class","col-lg-3",4,"ngFor","ngForOf"],[1,"container","mt-5"],[1,"col-md-12","text-center"],["class","col-md-4 mt-3",4,"ngFor","ngForOf"],[1,"col-lg-3"],[3,"postData"],[1,"col-md-4","mt-3"]],template:function(i,s){i&1&&(V(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),B(5,"Featured Posts"),k(),V(6,"p",4),B(7," Unlock the secrets to building a strong social media presence with our comprehensive guide. "),k()()(),V(8,"div",2),vt(9,AG,2,1,"div",5),k()()(),V(10,"section",6)(11,"div",7)(12,"h2"),B(13,"Latest Posts"),k(),V(14,"p"),B(15,"Capturing Life's Special Moments: Event Photography Essentials"),k()(),V(16,"div",2),vt(17,MG,2,1,"div",8),k()()),i&2&&(de(9),Me("ngForOf",s.featuredPostsArray),de(8),Me("ngForOf",s.latestPostArray))},dependencies:[Ma,fn,ji],styles:[".featured-section[_ngcontent-%COMP%]{padding-left:130px;padding-right:130px;padding-bottom:130px;background-color:var(--primary-color)}.card[_ngcontent-%COMP%]{max-width:400px;min-height:550px}"]});let n=e;return n})();function xG(n,e){if(n&1&&(V(0,"div",5),Ne(1,"app-post-card",6),k()),n&2){let t=e.$implicit;de(),Me("postData",t)}}var H1=(()=>{let e=class e{constructor(r,i){this.route=r,this.postService=i,this.postsArray=[]}ngOnInit(){this.route.params.subscribe(r=>{this.categoryObject=r,this.postService.loadCategoryPosts(r.id).subscribe(i=>{this.postsArray=i})})}};e.\u0275fac=function(i){return new(i||e)(ae(nr),ae(_c))},e.\u0275cmp=Oe({type:e,selectors:[["app-single-category"]],standalone:!0,features:[Fe],decls:9,vars:2,consts:[[1,"bg-theme","text-white"],[1,"container"],[1,"container","mt-5","mb-5"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[3,"postData"]],template:function(i,s){i&1&&(V(0,"div",0)(1,"div",1)(2,"h1"),B(3),k(),V(4,"p"),B(5," Creating promotional content that resonates with your audience is key to any successful marketing strategy. "),k()()(),V(6,"div",2)(7,"div",3),vt(8,xG,2,1,"div",4),k()()),i&2&&(de(3),Ln(s.categoryObject.category),de(5),Me("ngForOf",s.postsArray))},dependencies:[Ma,fn,ji]});let n=e;return n})();var G1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Oe({type:e,selectors:[["app-comment-form"]],standalone:!0,features:[Fe],decls:17,vars:0,consts:[[1,"card","mt-5","shadow-effect"],[1,"card-body"],[1,"form-group"],["for",""],["type","text","placeholder","Enter your name here",1,"form-control","shadow-effect"],["cols","30","rows","10","placeholder","Add your comment here",1,"form-control","shadow-effect"],[1,"btn","btn-info","btn-theme","mt-3"]],template:function(i,s){i&1&&(V(0,"div",0)(1,"div",1)(2,"h4"),B(3,"Leave a Comment"),k(),V(4,"p"),B(5,"please leave your comment and share your insights"),k(),V(6,"form")(7,"div",2)(8,"label",3),B(9,"Name"),k(),Ne(10,"input",4),k(),V(11,"div",2)(12,"label",3),B(13,"Comment"),k(),Ne(14,"textarea",5),k(),V(15,"button",6),B(16,"Add Comment"),k()()()())}});let n=e;return n})();var W1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Oe({type:e,selectors:[["app-comment-list"]],standalone:!0,features:[Fe],decls:40,vars:0,consts:[[1,"card","mb-5","mt","5","pb","5","shadow-effect"],[1,"card-body"],[1,"mt-3","mb-3"],[1,"comment-box","mt-3"],[1,"mb-0"],[1,"text-danger"],["href","#",1,"mt-1"],["href","#",1,"mt-1","ml-3"]],template:function(i,s){i&1&&(V(0,"div",0)(1,"div",1)(2,"h4",2),B(3,"Comments (15,500)"),k(),V(4,"div",3)(5,"h6",4),B(6,"Melvin Joseph"),k(),V(7,"small",5),B(8,"Last Updated - July 14, 2024"),k(),V(9,"div",2),B(10," Great read! I particularly enjoyed the section on event photography. The tips on lighting and composition were really helpful. Looking forward to more posts like this. "),k(),V(11,"a",6),B(12,"Reply"),k(),V(13,"a",7),B(14,"View Reply"),k(),Ne(15,"hr"),k(),V(16,"div",3)(17,"h6",4),B(18,"Melvin Joseph"),k(),V(19,"small",5),B(20,"Last Updated - July 14, 2024"),k(),V(21,"div",2),B(22," Great read! I particularly enjoyed the section on event photography. The tips on lighting and composition were really helpful. Looking forward to more posts like this. "),k(),V(23,"a",6),B(24,"Reply"),k(),V(25,"a",7),B(26,"View Reply"),k(),Ne(27,"hr"),k(),V(28,"div",3)(29,"h6",4),B(30,"Melvin Joseph"),k(),V(31,"small",5),B(32,"Last Updated - July 14, 2024"),k(),V(33,"div",2),B(34," Great read! I particularly enjoyed the section on event photography. The tips on lighting and composition were really helpful. Looking forward to more posts like this. "),k(),V(35,"a",6),B(36,"Reply"),k(),V(37,"a",7),B(38,"View Reply"),k(),Ne(39,"hr"),k()()())},styles:[".comment-box[_ngcontent-%COMP%]{padding:15px 35px;background-color:#f0f0f0}"]});let n=e;return n})();function RG(n,e){n&1&&(V(0,"small",14),B(1,"Featured"),k())}function NG(n,e){if(n&1&&(V(0,"div"),Ne(1,"app-post-card",15),k()),n&2){let t=e.$implicit;de(),Me("postData",t)}}var K1=(()=>{let e=class e{constructor(r,i){this.route=r,this.postService=i,this.similarPostArray=[]}ngOnInit(){this.route.params.subscribe(r=>{this.postService.countViews(r.id),this.postService.loadSinglePost(r.id).subscribe(i=>{this.postData=i,this.loadSimilarPost(this.postData.category.categoryId)})})}loadSimilarPost(r){this.postService.loadSimilarPosts(r).subscribe(i=>{this.similarPostArray=i})}};e.\u0275fac=function(i){return new(i||e)(ae(nr),ae(_c))},e.\u0275cmp=Oe({type:e,selectors:[["app-single-post"]],standalone:!0,features:[Fe],decls:21,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-md-9"],[1,"card","shadow-effect"],["alt","",1,"card-img-top","img-fluid",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success text-center ml-2",4,"ngIf"],[1,"bg-light","text-info","text-center","ml-2"],[1,"bg-light","text-warning","text-center","ml-2"],[1,"mt-3","mb-3"],[3,"innerHtml"],[1,"col-md-3"],[4,"ngFor","ngForOf"],[1,"bg-light","text-success","text-center","ml-2"],[3,"postData"]],template:function(i,s){i&1&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Ne(4,"img",4),V(5,"div",5)(6,"small",6),B(7),k(),vt(8,RG,2,0,"small",7),V(9,"small",8),B(10),k(),V(11,"small",9),B(12),sf(13,"date"),k(),V(14,"h1",10),B(15),k(),Ne(16,"p",11),k()(),Ne(17,"app-comment-form")(18,"app-comment-list"),k(),V(19,"div",12),vt(20,NG,2,1,"div",13),k()()()),i&2&&(de(4),_u("src",s.postData.postImgPath,gu),de(3),Ln(s.postData.category.category),de(),Me("ngIf",s.postData.isFeatured),de(2),Vi("Views-",s.postData.views,""),de(2),Vi("Last Updated - ",of(13,8,s.postData.createdAt.toMillis()),""),de(3),Ln(s.postData.title),de(),Me("innerHtml",s.postData.content,wA),de(4),Me("ngForOf",s.similarPostArray))},dependencies:[Ma,G1,W1,fn,ji,da,Cf]});let n=e;return n})();var Q1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Oe({type:e,selectors:[["app-about-us"]],standalone:!0,features:[Fe],decls:32,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],[1,"btn","btn-info","btn-sm","btn-theme","mt-4"]],template:function(i,s){i&1&&(V(0,"section",0)(1,"div",1)(2,"h1",2),B(3,"About Us"),k(),V(4,"div",3)(5,"p"),B(6,"Welcome to AberRange Media, where creativity meets innovation. Our mission is to help you capture and celebrate the most significant moments of your life through our comprehensive range of media services. We are passionate about storytelling and committed to delivering high-quality content that resonates with your audience."),k(),V(7,"p")(8,"b"),B(9,"Our Story"),k(),B(10," Founded in 2024, AberRange Media started as a small team of enthusiastic photographers and videographers. Over the years, we've grown into a full-fledged media company, offering a wide array of services to cater to your every need. From capturing the magic of weddings and birthdays to creating impactful promotional content and managing your social media presence, we are dedicated to making your vision a reality."),k(),V(11,"p")(12,"b"),B(13,"Our Team"),k(),B(14," Our team of skilled professionals brings a wealth of experience and creativity to every project. We work collaboratively with our clients to understand their vision and deliver results that exceed expectations. Our passion for storytelling and attention to detail set us apart in the industry."),k(),V(15,"p")(16,"b"),B(17,"Why Choose Us?"),k(),Ne(18,"br"),V(19,"li"),B(20,"Expertise: Years of experience in the media industry with a proven track record of successful projects."),k(),V(21,"li"),B(22,"Quality: Commitment to high standards of quality in every piece of content we create."),k(),V(23,"li"),B(24,"Innovation: Utilization of the latest technology and creative techniques to deliver outstanding results."),k(),V(25,"li"),B(26,"Customer-Centric Approach: We prioritize our clients' needs and work closely with them to achieve their goals."),k()(),V(27,"p"),B(28,"Thank you for considering AberRange Media for your media needs. We look forward to partnering with you to create beautiful, memorable, and impactful content."),k(),V(29,"div",4)(30,"button",5),B(31,"Back top"),k()()()()())}});let n=e;return n})();var Y1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Oe({type:e,selectors:[["app-terms-and-conditions"]],standalone:!0,features:[Fe],decls:20,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],[1,"btn","btn-info","btn-sm","btn-theme","mt-4"]],template:function(i,s){i&1&&(V(0,"section",0)(1,"div",1)(2,"h1",2),B(3,"Terms and Conditions"),k(),V(4,"div",3)(5,"p"),B(6,"Welcome to AberRange Media, where creativity meets innovation. Our mission is to help you capture and celebrate the most significant moments of your life through our comprehensive range of media services. We are passionate about storytelling and committed to delivering high-quality content that resonates with your audience."),k(),V(7,"p")(8,"b"),B(9,"Our Story"),k(),B(10," Founded in 2024, AberRange Media started as a small team of enthusiastic photographers and videographers. Over the years, we've grown into a full-fledged media company, offering a wide array of services to cater to your every need. From capturing the magic of weddings and birthdays to creating impactful promotional content and managing your social media presence, we are dedicated to making your vision a reality."),k(),V(11,"p")(12,"b"),B(13,"Our Team"),k(),B(14," Our team of skilled professionals brings a wealth of experience and creativity to every project. We work collaboratively with our clients to understand their vision and deliver results that exceed expectations. Our passion for storytelling and attention to detail set us apart in the industry."),k(),V(15,"p"),B(16,"Thank you for considering AberRange Media for your media needs. We look forward to partnering with you to create beautiful, memorable, and impactful content."),k(),V(17,"div",4)(18,"button",5),B(19,"Back top"),k()()()()())}});let n=e;return n})();var Z1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Oe({type:e,selectors:[["app-contact-us"]],standalone:!0,features:[Fe],decls:2,vars:0,template:function(i,s){i&1&&(V(0,"p"),B(1,"contact-us works!"),k())}});let n=e;return n})();var J1=[{path:"",component:z1},{path:"category/:category/:id",component:H1},{path:"post/:id",component:K1},{path:"about",component:Q1},{path:"term-conditions",component:Y1},{path:"contact",component:Z1}];var P3="auth";var $g=class{constructor(){return Ju(P3)}};var Hl=class{constructor(e){return e}},X1="firestore",v0=class{constructor(){return Ju(X1)}};var _0=new Q("angularfire2.firestore-instances");function k3(n,e){let t=Ew(X1,n,e);return t&&new Hl(t)}function O3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Hl(r)}}var F3={provide:v0,deps:[[new En,_0]]},V3={provide:Hl,useFactory:k3,deps:[[new En,_0],Ws]};function ek(n,...e){return Wt("angularfire",rr.full,"fst"),Jn([V3,F3,{provide:_0,useFactory:O3(n),multi:!0,deps:[_e,dn,si,tl,[new En,$g],[new En,br],...e]}])}var tk=Xu(D1,!0);var w0={apiKey:"AIzaSyCa2gfcSj6hZ5csUS6Zoh-_Xuvuv0bho34",authDomain:"range-blogs.firebaseapp.com",projectId:"range-blogs",storageBucket:"range-blogs.appspot.com",messagingSenderId:"249262928048",appId:"1:249262928048:web:273920d3c79be929900b75"};var Ee=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Ee||{}),Fr="*";function nk(n,e=null){return{type:Ee.Sequence,steps:n,options:e}}function E0(n){return{type:Ee.Style,styles:n,offset:null}}var us=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Gl=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},qg="!";function rk(n){return new j(3e3,!1)}function L3(){return new j(3100,!1)}function j3(){return new j(3101,!1)}function U3(n){return new j(3001,!1)}function B3(n){return new j(3003,!1)}function $3(n){return new j(3004,!1)}function q3(n,e){return new j(3005,!1)}function z3(){return new j(3006,!1)}function H3(){return new j(3007,!1)}function G3(n,e){return new j(3008,!1)}function W3(n){return new j(3002,!1)}function K3(n,e,t,r,i){return new j(3010,!1)}function Q3(){return new j(3011,!1)}function Y3(){return new j(3012,!1)}function Z3(){return new j(3200,!1)}function J3(){return new j(3202,!1)}function X3(){return new j(3013,!1)}function e9(n){return new j(3014,!1)}function t9(n){return new j(3015,!1)}function n9(n){return new j(3016,!1)}function r9(n,e){return new j(3404,!1)}function i9(n){return new j(3502,!1)}function s9(n){return new j(3503,!1)}function o9(){return new j(3300,!1)}function a9(n){return new j(3504,!1)}function c9(n){return new j(3301,!1)}function u9(n,e){return new j(3302,!1)}function l9(n){return new j(3303,!1)}function d9(n,e){return new j(3400,!1)}function h9(n){return new j(3401,!1)}function f9(n){return new j(3402,!1)}function p9(n,e){return new j(3505,!1)}function ls(n){switch(n.length){case 0:return new us;case 1:return n[0];default:return new Gl(n)}}function yk(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),d=l==o,f=d&&a||new Map;c.forEach((g,m)=>{let _=m,D=g;if(m!=="offset")switch(_=n.normalizePropertyName(_,i),D){case qg:D=t.get(m);break;case Fr:D=r.get(m);break;default:D=n.normalizeStyleValue(m,_,D,i);break}f.set(_,D)}),d||s.push(f),a=f,o=l}),i.length)throw i9(i);return s}function z0(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&I0(t,"start",n)));break;case"done":n.onDone(()=>r(t&&I0(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&I0(t,"destroy",n)));break}}function I0(n,e,t){let r=t.totalTime,i=!!t.disabled,s=H0(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function H0(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function xn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function ik(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var g9=typeof document>"u"?null:document.documentElement;function G0(n){let e=n.parentNode||n.host||null;return e===g9?null:e}function m9(n){return n.substring(1,6)=="ebkit"}var Eo=null,sk=!1;function y9(n){Eo||(Eo=v9()||{},sk=Eo.style?"WebkitAppearance"in Eo.style:!1);let e=!0;return Eo.style&&!m9(n)&&(e=n in Eo.style,!e&&sk&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Eo.style)),e}function v9(){return typeof document<"u"?document.body:null}function vk(n,e){for(;e;){if(e===n)return!0;e=G0(e)}return!1}function _k(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var W0=(()=>{let e=class e{validateStyleProperty(r){return y9(r)}containsElement(r,i){return vk(r,i)}getParentElement(r){return G0(r)}query(r,i,s){return _k(r,i,s)}computeStyle(r,i,s){return s||""}animate(r,i,s,o,a,c=[],l){return new us(s,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),Z0=class Z0{};Z0.NOOP=new W0;var bo=Z0,Co=class{};var _9=1e3,wk="{{",w9="}}",Ek="ng-enter",A0="ng-leave",zg="ng-trigger",Qg=".ng-trigger",ok="ng-animating",M0=".ng-animating";function gi(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:x0(parseFloat(e[1]),e[2])}function x0(n,e){switch(e){case"s":return n*_9;default:return n}}function Yg(n,e,t){return n.hasOwnProperty("duration")?n:E9(n,e,t)}function E9(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(rk(n)),{duration:0,delay:0,easing:""};i=x0(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=x0(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(L3()),a=!0),s<0&&(e.push(j3()),a=!0),a&&e.splice(c,0,rk(n))}return{duration:i,delay:s,easing:o}}function I9(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Vr(n,e,t){e.forEach((r,i)=>{let s=K0(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Do(n,e){e.forEach((t,r)=>{let i=K0(r);n.style[i]=""})}function Wl(n){return Array.isArray(n)?n.length==1?n[0]:nk(n):n}function D9(n,e,t){let r=e.params||{},i=Ik(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(U3(s))})}var R0=new RegExp(`${wk}\\s*(.+?)\\s*${w9}`,"g");function Ik(n){let e=[];if(typeof n=="string"){let t;for(;t=R0.exec(n);)e.push(t[1]);R0.lastIndex=0}return e}function Ql(n,e,t){let r=`${n}`,i=r.replace(R0,(s,o)=>{let a=e[o];return a==null&&(t.push(B3(o)),a=""),a.toString()});return i==r?n:i}var b9=/-+([a-z0-9])/g;function K0(n){return n.replace(b9,(...e)=>e[1].toUpperCase())}function C9(n,e){return n===0||e===0}function T9(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Q0(n,a)))}}return e}function Mn(n,e,t){switch(e.type){case Ee.Trigger:return n.visitTrigger(e,t);case Ee.State:return n.visitState(e,t);case Ee.Transition:return n.visitTransition(e,t);case Ee.Sequence:return n.visitSequence(e,t);case Ee.Group:return n.visitGroup(e,t);case Ee.Animate:return n.visitAnimate(e,t);case Ee.Keyframes:return n.visitKeyframes(e,t);case Ee.Style:return n.visitStyle(e,t);case Ee.Reference:return n.visitReference(e,t);case Ee.AnimateChild:return n.visitAnimateChild(e,t);case Ee.AnimateRef:return n.visitAnimateRef(e,t);case Ee.Query:return n.visitQuery(e,t);case Ee.Stagger:return n.visitStagger(e,t);default:throw $3(e.type)}}function Q0(n,e){return window.getComputedStyle(n)[e]}var S9=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Zg=class extends Co{normalizePropertyName(e,t){return K0(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(S9.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(q3(e,r))}return o+s}};var Jg="*";function A9(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>M9(r,t,e)):t.push(n),t}function M9(n,e,t){if(n[0]==":"){let c=x9(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(t9(n)),e;let i=r[1],s=r[2],o=r[3];e.push(ak(i,o));let a=i==Jg&&o==Jg;s[0]=="<"&&!a&&e.push(ak(o,i))}function x9(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(n9(n)),"* => *"}}var Hg=new Set(["true","1"]),Gg=new Set(["false","0"]);function ak(n,e){let t=Hg.has(n)||Gg.has(n),r=Hg.has(e)||Gg.has(e);return(i,s)=>{let o=n==Jg||n==i,a=e==Jg||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?Hg.has(n):Gg.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?Hg.has(e):Gg.has(e)),o&&a}}var Dk=":self",R9=new RegExp(`s*${Dk}s*,?`,"g");function bk(n,e,t,r){return new N0(n).build(e,t,r)}var ck="",N0=class{constructor(e){this._driver=e}build(e,t,r){let i=new P0(t);return this._resetContextStyleTimingState(i),Mn(this,Wl(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=ck,e.collectedStyles=new Map,e.collectedStyles.set(ck,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(z3()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Ee.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==Ee.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(H3())}),{type:Ee.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{Ik(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(G3(e.name,[...s.values()]))}return{type:Ee.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=Mn(this,Wl(e.animation),t),i=A9(e.expr,t.errors);return{type:Ee.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Io(e.options)}}visitSequence(e,t){return{type:Ee.Sequence,steps:e.steps.map(r=>Mn(this,r,t)),options:Io(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=Mn(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Ee.Group,steps:s,options:Io(e.options)}}visitAnimate(e,t){let r=O9(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:E0({});if(s.type==Ee.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=E0(l)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:Ee.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Fr?r.push(a):t.errors.push(W3(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(wk)>=0){s=!0;break}}}),{type:Ee.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),d=l.get(c),f=!0;d&&(s!=i&&s>=d.startTime&&i<=d.endTime&&(t.errors.push(K3(c,d.startTime,d.endTime,s,i)),f=!1),s=d.startTime),f&&l.set(c,{startTime:s,endTime:i}),t.options&&D9(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:Ee.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Q3()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,d=e.steps.map(O=>{let U=this._makeStyleAst(O,t),P=U.offset!=null?U.offset:k9(U.styles),z=0;return P!=null&&(s++,z=U.offset=P),c=c||z<0||z>1,a=a||z<l,l=z,o.push(z),U});c&&t.errors.push(Y3()),a&&t.errors.push(Z3());let f=e.steps.length,g=0;s>0&&s<f?t.errors.push(J3()):s==0&&(g=i/(f-1));let m=f-1,_=t.currentTime,D=t.currentAnimateTimings,T=D.duration;return d.forEach((O,U)=>{let P=g>0?U==m?1:g*U:o[U],z=P*T;t.currentTime=_+D.delay+z,D.duration=z,this._validateStyleAst(O,t),O.offset=P,r.styles.push(O)}),r}visitReference(e,t){return{type:Ee.Reference,animation:Mn(this,Wl(e.animation),t),options:Io(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Ee.AnimateChild,options:Io(e.options)}}visitAnimateRef(e,t){return{type:Ee.AnimateRef,animation:this.visitReference(e.animation,t),options:Io(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=N9(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,xn(t.collectedStyles,t.currentQuerySelector,new Map);let a=Mn(this,Wl(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Ee.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Io(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(X3());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Yg(e.timings,t.errors,!0);return{type:Ee.Stagger,animation:Mn(this,Wl(e.animation),t),timings:r,options:null}}};function N9(n){let e=!!n.split(/\s*,\s*/).find(t=>t==Dk);return e&&(n=n.replace(R9,"")),n=n.replace(/@\*/g,Qg).replace(/@\w+/g,t=>Qg+"-"+t.slice(1)).replace(/:animating/g,M0),[n,e]}function P9(n){return n?G({},n):null}var P0=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function k9(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function O9(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Yg(n,e).duration;return D0(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=D0(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Yg(t,e);return D0(i.duration,i.delay,i.easing)}function Io(n){return n?(n=G({},n),n.params&&(n.params=P9(n.params))):n={},n}function D0(n,e,t){return{duration:n,delay:e,easing:t}}function Y0(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Yl=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},F9=1,V9=":enter",L9=new RegExp(V9,"g"),j9=":leave",U9=new RegExp(j9,"g");function Ck(n,e,t,r,i,s=new Map,o=new Map,a,c,l=[]){return new k0().buildKeyframes(n,e,t,r,i,s,o,a,c,l)}var k0=class{buildKeyframes(e,t,r,i,s,o,a,c,l,d=[]){l=l||new Yl;let f=new O0(e,t,l,i,s,d,[]);f.options=c;let g=c.delay?gi(c.delay):0;f.currentTimeline.delayNextStep(g),f.currentTimeline.setStyles([o],null,f.errors,c),Mn(this,r,f);let m=f.timelines.filter(_=>_.containsAnimation());if(m.length&&a.size){let _;for(let D=m.length-1;D>=0;D--){let T=m[D];if(T.element===t){_=T;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,f.errors,c)}return m.length?m.map(_=>_.buildKeyframes()):[Y0(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:gi(Ql(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?gi(r.duration):null,a=r.delay!=null?gi(r.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Mn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==Ee.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Xg);let o=gi(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Mn(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?gi(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),Mn(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Ql(r,t.params,t.errors):r;return Yg(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==Ee.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?gi(i.delay):0;s&&(t.previousNode.type===Ee.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Xg);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,d)=>{t.currentQueryIndex=d;let f=t.createSubContext(e.options,l);s&&f.delayNextStep(s),l===t.element&&(c=f.currentTimeline),Mn(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let g=f.currentTimeline.currentTime;o=Math.max(o,g)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let d=t.currentTimeline;c&&d.delayNextStep(c);let f=d.currentTime;Mn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}},Xg={},O0=class n{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Xg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new em(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=gi(r.duration)),r.delay!=null&&(i.delay=gi(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Ql(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Xg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new F0(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(L9,"."+this._enterClassName),e=e.replace(U9,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(e9(t)),a}},em=class n{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=F9,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Fr),this._currentKeyframe.set(t,Fr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=B9(e,this._globalTimelineStyles);for(let[a,c]of o){let l=Ql(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Fr),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((d,f)=>{d===qg?e.add(f):d===Fr&&t.add(f)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return Y0(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},F0=class extends em{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",uk(a)),s.push(l);let d=e.length-1;for(let f=1;f<=d;f++){let g=new Map(e[f]),m=g.get("offset"),_=t+m*r;g.set("offset",uk(_/o)),s.push(g)}r=o,t=0,i="",e=s}return Y0(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function uk(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function B9(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Fr)}else for(let[s,o]of i)t.set(s,o)}),t}function lk(n,e,t,r,i,s,o,a,c,l,d,f,g){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:d,totalTime:f,errors:g}}var b0={},tm=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return $9(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,l,d){let f=[],g=this.ast.options&&this.ast.options.params||b0,m=a&&a.params||b0,_=this.buildStyles(r,m,f),D=c&&c.params||b0,T=this.buildStyles(i,D,f),O=new Set,U=new Map,P=new Map,z=i==="void",ne={params:Tk(D,g),delay:this.ast.options?.delay},Z=d?[]:Ck(e,t,this.ast.animation,s,o,_,T,ne,l,f),I=0;return Z.forEach(v=>{I=Math.max(v.duration+v.delay,I)}),f.length?lk(t,this._triggerName,r,i,z,_,T,[],[],U,P,I,f):(Z.forEach(v=>{let w=v.element,b=xn(U,w,new Set);v.preStyleProps.forEach(A=>b.add(A));let C=xn(P,w,new Set);v.postStyleProps.forEach(A=>C.add(A)),w!==t&&O.add(w)}),lk(t,this._triggerName,r,i,z,_,T,Z,[...O.values()],U,P,I))}};function $9(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function Tk(n,e){let t=G({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var V0=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=Tk(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Ql(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function q9(n,e,t){return new L0(n,e,t)}var L0=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new V0(i.style,s,r))}),dk(this.states,"true","1"),dk(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new tm(e,i,this.states))}),this.fallbackTransition=z9(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function z9(n,e,t){let r=[(o,a)=>!0],i={type:Ee.Sequence,steps:[],options:null},s={type:Ee.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new tm(n,s,e)}function dk(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var H9=new Yl,j0=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],i=[],s=bk(this._driver,t,r,i);if(r.length)throw s9(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=yk(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=Ck(this._driver,t,s,Ek,A0,new Map,new Map,r,H9,i),o.forEach(d=>{let f=xn(a,d.element,new Map);d.postStyleProps.forEach(g=>f.set(g,null))})):(i.push(o9()),o=[]),i.length)throw a9(i);a.forEach((d,f)=>{d.forEach((g,m)=>{d.set(m,this._driver.computeStyle(f,m,Fr))})});let c=o.map(d=>{let f=a.get(d.element);return this._buildPlayer(d,new Map,f)}),l=ls(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw c9(e);return t}listen(e,t,r,i){let s=H0(t,"","","");return z0(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},hk="ng-animate-queued",G9=".ng-animate-queued",C0="ng-animate-disabled",W9=".ng-animate-disabled",K9="ng-star-inserted",Q9=".ng-star-inserted",Y9=[],Sk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Z9={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ur="__ng_removed",Zl=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=X9(i),r){let s=e,{value:o}=s,a=pd(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Kl="void",T0=new Zl(Kl),U0=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Hn(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw u9(r,t);if(r==null||r.length==0)throw l9(t);if(!e5(r))throw d9(r,t);let s=xn(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=xn(this._engine.statesByElement,e,new Map);return a.has(t)||(Hn(e,zg),Hn(e,zg+"-"+t),a.set(t,T0)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw h9(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new Jl(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Hn(e,zg),Hn(e,zg+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new Zl(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=T0),!(l.value===Kl)&&c.value===l.value){if(!r5(c.params,l.params)){let D=[],T=s.matchStyles(c.value,c.params,D),O=s.matchStyles(l.value,l.params,D);D.length?this._engine.reportError(D):this._engine.afterFlush(()=>{Do(e,T),Vr(e,O)})}return}let g=xn(this._engine.playersByElement,e,[]);g.forEach(D=>{D.namespaceId==this.id&&D.triggerName==t&&D.queued&&D.destroy()});let m=s.matchTransition(c.value,l.value,e,l.params),_=!1;if(!m){if(!i)return;m=s.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:m,fromState:c,toState:l,player:o,isFallbackTransition:_}),_||(Hn(e,hk),o.onStart(()=>{wc(e,hk)})),o.onDone(()=>{let D=this.players.indexOf(o);D>=0&&this.players.splice(D,1);let T=this._engine.playersByElement.get(e);if(T){let O=T.indexOf(o);O>=0&&T.splice(O,1)}}),this.players.push(o),g.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Qg,!0);r.forEach(i=>{if(i[ur])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let d=this.trigger(e,l,Kl,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&ls(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||T0,d=new Zl(Kl),f=new Jl(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[ur];(!s||s===Sk)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Hn(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=H0(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,z0(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},B0=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new U0(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(Wg(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Wg(t))return;let s=t[ur];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Hn(e,C0)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),wc(e,C0))}removeNode(e,t,r){if(Wg(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[ur]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Wg(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Qg,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,M0,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ls(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[ur];if(t&&t.setForRemoval){if(e[ur]=Sk,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(C0)&&this.markElementAsDisabled(e,!1),this.driver.query(e,W9,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Hn(i,K9)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?ls(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw f9(e)}_flushAnimations(e,t){let r=new Yl,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,d=new Set;this.disabledNodes.forEach(J=>{d.add(J);let re=this.driver.query(J,G9,!0);for(let oe=0;oe<re.length;oe++)d.add(re[oe])});let f=this.bodyNode,g=Array.from(this.statesByElement.keys()),m=gk(g,this.collectedEnterElements),_=new Map,D=0;m.forEach((J,re)=>{let oe=Ek+D++;_.set(re,oe),J.forEach(Ie=>Hn(Ie,oe))});let T=[],O=new Set,U=new Set;for(let J=0;J<this.collectedLeaveElements.length;J++){let re=this.collectedLeaveElements[J],oe=re[ur];oe&&oe.setForRemoval&&(T.push(re),O.add(re),oe.hasAnimation?this.driver.query(re,Q9,!0).forEach(Ie=>O.add(Ie)):U.add(re))}let P=new Map,z=gk(g,Array.from(O));z.forEach((J,re)=>{let oe=A0+D++;P.set(re,oe),J.forEach(Ie=>Hn(Ie,oe))}),e.push(()=>{m.forEach((J,re)=>{let oe=_.get(re);J.forEach(Ie=>wc(Ie,oe))}),z.forEach((J,re)=>{let oe=P.get(re);J.forEach(Ie=>wc(Ie,oe))}),T.forEach(J=>{this.processLeaveNode(J)})});let ne=[],Z=[];for(let J=this._namespaceList.length-1;J>=0;J--)this._namespaceList[J].drainQueuedTransitions(t).forEach(oe=>{let Ie=oe.player,lt=oe.element;if(ne.push(Ie),this.collectedEnterElements.length){let st=lt[ur];if(st&&st.setForMove){if(st.previousTriggersValues&&st.previousTriggersValues.has(oe.triggerName)){let Lr=st.previousTriggersValues.get(oe.triggerName),an=this.statesByElement.get(oe.element);if(an&&an.has(oe.triggerName)){let jr=an.get(oe.triggerName);jr.value=Lr,an.set(oe.triggerName,jr)}}Ie.destroy();return}}let Nn=!f||!this.driver.containsElement(f,lt),it=P.get(lt),We=_.get(lt),Ke=this._buildInstruction(oe,r,We,it,Nn);if(Ke.errors&&Ke.errors.length){Z.push(Ke);return}if(Nn){Ie.onStart(()=>Do(lt,Ke.fromStyles)),Ie.onDestroy(()=>Vr(lt,Ke.toStyles)),i.push(Ie);return}if(oe.isFallbackTransition){Ie.onStart(()=>Do(lt,Ke.fromStyles)),Ie.onDestroy(()=>Vr(lt,Ke.toStyles)),i.push(Ie);return}let yi=[];Ke.timelines.forEach(st=>{st.stretchStartingKeyframe=!0,this.disabledNodes.has(st.element)||yi.push(st)}),Ke.timelines=yi,r.append(lt,Ke.timelines);let om={instruction:Ke,player:Ie,element:lt};o.push(om),Ke.queriedElements.forEach(st=>xn(a,st,[]).push(Ie)),Ke.preStyleProps.forEach((st,Lr)=>{if(st.size){let an=c.get(Lr);an||c.set(Lr,an=new Set),st.forEach((jr,vi)=>an.add(vi))}}),Ke.postStyleProps.forEach((st,Lr)=>{let an=l.get(Lr);an||l.set(Lr,an=new Set),st.forEach((jr,vi)=>an.add(vi))})});if(Z.length){let J=[];Z.forEach(re=>{J.push(p9(re.triggerName,re.errors))}),ne.forEach(re=>re.destroy()),this.reportError(J)}let I=new Map,v=new Map;o.forEach(J=>{let re=J.element;r.has(re)&&(v.set(re,re),this._beforeAnimationBuild(J.player.namespaceId,J.instruction,I))}),i.forEach(J=>{let re=J.element;this._getPreviousPlayers(re,!1,J.namespaceId,J.triggerName,null).forEach(Ie=>{xn(I,re,[]).push(Ie),Ie.destroy()})});let w=T.filter(J=>mk(J,c,l)),b=new Map;pk(b,this.driver,U,l,Fr).forEach(J=>{mk(J,c,l)&&w.push(J)});let A=new Map;m.forEach((J,re)=>{pk(A,this.driver,new Set(J),c,qg)}),w.forEach(J=>{let re=b.get(J),oe=A.get(J);b.set(J,new Map([...re?.entries()??[],...oe?.entries()??[]]))});let E=[],Rn=[],mi={};o.forEach(J=>{let{element:re,player:oe,instruction:Ie}=J;if(r.has(re)){if(d.has(re)){oe.onDestroy(()=>Vr(re,Ie.toStyles)),oe.disabled=!0,oe.overrideTotalTime(Ie.totalTime),i.push(oe);return}let lt=mi;if(v.size>1){let it=re,We=[];for(;it=it.parentNode;){let Ke=v.get(it);if(Ke){lt=Ke;break}We.push(it)}We.forEach(Ke=>v.set(Ke,lt))}let Nn=this._buildAnimation(oe.namespaceId,Ie,I,s,A,b);if(oe.setRealPlayer(Nn),lt===mi)E.push(oe);else{let it=this.playersByElement.get(lt);it&&it.length&&(oe.parentPlayer=ls(it)),i.push(oe)}}else Do(re,Ie.fromStyles),oe.onDestroy(()=>Vr(re,Ie.toStyles)),Rn.push(oe),d.has(re)&&i.push(oe)}),Rn.forEach(J=>{let re=s.get(J.element);if(re&&re.length){let oe=ls(re);J.setRealPlayer(oe)}}),i.forEach(J=>{J.parentPlayer?J.syncPlayerEvents(J.parentPlayer):J.destroy()});for(let J=0;J<T.length;J++){let re=T[J],oe=re[ur];if(wc(re,A0),oe&&oe.hasAnimation)continue;let Ie=[];if(a.size){let Nn=a.get(re);Nn&&Nn.length&&Ie.push(...Nn);let it=this.driver.query(re,M0,!0);for(let We=0;We<it.length;We++){let Ke=a.get(it[We]);Ke&&Ke.length&&Ie.push(...Ke)}}let lt=Ie.filter(Nn=>!Nn.destroyed);lt.length?t5(this,re,lt):this.processLeaveNode(re)}return T.length=0,E.forEach(J=>{this.players.push(J),J.onDone(()=>{J.destroy();let re=this.players.indexOf(J);this.players.splice(re,1)}),J.play()}),E}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==Kl;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let l=c.element,d=l!==s,f=xn(r,l,[]);this._getPreviousPlayers(l,d,o,a,t.toState).forEach(m=>{let _=m.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),m.destroy(),f.push(m)})}Do(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,l=[],d=new Set,f=new Set,g=t.timelines.map(_=>{let D=_.element;d.add(D);let T=D[ur];if(T&&T.removedBeforeQueried)return new us(_.duration,_.delay);let O=D!==c,U=n5((r.get(D)||Y9).map(I=>I.getRealPlayer())).filter(I=>{let v=I;return v.element?v.element===D:!1}),P=s.get(D),z=o.get(D),ne=yk(this._normalizer,_.keyframes,P,z),Z=this._buildPlayer(_,ne,U);if(_.subTimeline&&i&&f.add(D),O){let I=new Jl(e,a,D);I.setRealPlayer(Z),l.push(I)}return Z});l.forEach(_=>{xn(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>J9(this.playersByQueriedElement,_.element,_))}),d.forEach(_=>Hn(_,ok));let m=ls(g);return m.onDestroy(()=>{d.forEach(_=>wc(_,ok)),Vr(c,t.toStyles)}),f.forEach(_=>{xn(i,_,[]).push(m)}),m}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new us(e.duration,e.delay)}},Jl=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new us,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>z0(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){xn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function J9(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function X9(n){return n??null}function Wg(n){return n&&n.nodeType===1}function e5(n){return n=="start"||n=="done"}function fk(n,e){let t=n.style.display;return n.style.display=e??"none",t}function pk(n,e,t,r,i){let s=[];t.forEach(c=>s.push(fk(c)));let o=[];r.forEach((c,l)=>{let d=new Map;c.forEach(f=>{let g=e.computeStyle(l,f,i);d.set(f,g),(!g||g.length==0)&&(l[ur]=Z9,o.push(l))}),n.set(l,d)});let a=0;return t.forEach(c=>fk(c,s[a++])),o}function gk(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function Hn(n,e){n.classList?.add(e)}function wc(n,e){n.classList?.remove(e)}function t5(n,e,t){ls(t).onDone(()=>n.processLeaveNode(e))}function n5(n){let e=[];return Ak(n,e),e}function Ak(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Gl?Ak(r.players,e):e.push(r)}}function r5(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function mk(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var Ic=class{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new B0(e.body,t,r),this._timelineEngine=new j0(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],d=bk(this._driver,s,c,l);if(c.length)throw r9(i,c);l.length&&void 0,a=q9(i,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=ik(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=ik(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function i5(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=S0(e[0]),e.length>1&&(r=S0(e[e.length-1]))):e instanceof Map&&(t=S0(e)),t||r?new $0(n,t,r):null}var Ec=class Ec{constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=Ec.initialStylesByElement.get(e);i||Ec.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Vr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Vr(this._element,this._initialStyles),this._endStyles&&(Vr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Ec.initialStylesByElement.delete(this._element),this._startStyles&&(Do(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Do(this._element,this._endStyles),this._endStyles=null),Vr(this._element,this._initialStyles),this._state=3)}};Ec.initialStylesByElement=new WeakMap;var $0=Ec;function S0(n){let e=null;return n.forEach((t,r)=>{s5(r)&&(e=e||new Map,e.set(r,t))}),e}function s5(n){return n==="display"||n==="position"}var nm=class{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Q0(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},rm=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return vk(e,t)}getParentElement(e){return G0(e)}query(e,t,r){return _k(e,t,r)}computeStyle(e,t,r){return Q0(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,d=o.filter(m=>m instanceof nm);C9(r,i)&&d.forEach(m=>{m.currentSnapshot.forEach((_,D)=>l.set(D,_))});let f=I9(t).map(m=>new Map(m));f=T9(e,f,l);let g=i5(e,f);return new nm(e,f,c,g)}};var Kg="@",Mk="@.disabled",im=class{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Kg&&t==Mk?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},q0=class extends im{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Kg?t.charAt(1)=="."&&t==Mk?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==Kg){let i=o5(e),s=t.slice(1),o="";return s.charAt(0)!=Kg&&([s,o]=a5(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,t,r)}};function o5(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function a5(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var sm=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{let o=s?.parentNode(i);o&&s.removeChild(o,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,d=l.get(i);if(!d){let f=()=>l.delete(i);d=new im(r,i,this.engine,f),l.set(i,d)}return d}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new q0(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var u5=(()=>{let e=class e extends Ic{constructor(r,i,s){super(r,i,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(i){return new(i||e)($($t),$(bo),$(Co))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})();function l5(){return new Zg}function d5(n,e,t){return new sm(n,e,t)}var Rk=[{provide:Co,useFactory:l5},{provide:Ic,useClass:u5},{provide:Ai,useFactory:d5,deps:[xf,Ic,_e]}],xk=[{provide:bo,useFactory:()=>new rm},{provide:Pv,useValue:"BrowserAnimations"},...Rk],h5=[{provide:bo,useClass:W0},{provide:Pv,useValue:"NoopAnimations"},...Rk],Nk=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:r.disableAnimations?h5:xk}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=en({type:e}),e.\u0275inj=Xt({providers:xk,imports:[px]});let n=e;return n})();var Pk={providers:[vv(ip,Iw.initializeApp(w0),Iw,Nk),AM({eventCoalescing:!0}),Zx(J1),mx(),AR(()=>MR(w0)),ek(()=>tk())]};var kk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Oe({type:e,selectors:[["app-header"]],standalone:!0,features:[Fe],decls:4,vars:0,consts:[[1,"navbar","navbar-expand-lg","fixed-top","bg-white"],[1,"container","justify-content-center"],["routerLink","/",1,"site-logo"]],template:function(i,s){i&1&&(V(0,"header",0)(1,"div",1)(2,"a",2),B(3,"AberRange Innovate"),k()()())},dependencies:[Ea],styles:["header[_ngcontent-%COMP%]{height:100px}header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:24px}"]});let n=e;return n})();var Ok=(()=>{let e=class e{constructor(r){this.afs=r}loadData(){return this.afs.collection("Blog-categories").snapshotChanges().pipe(ee(r=>r.map(i=>{let s=i.payload.doc.data();return{id:i.payload.doc.id,data:s}})))}};e.\u0275fac=function(i){return new(i||e)($(vc))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var p5=(n,e)=>["/category",n,e];function g5(n,e){if(n&1&&(V(0,"ul",3)(1,"li",4)(2,"a",5),B(3),k()()()),n&2){let t=e.$implicit;de(2),Me("routerLink",EM(2,p5,t.data.category,t.id)),de(),Ln(t.data.category)}}var Fk=(()=>{let e=class e{constructor(r){this.categoryService=r,this.categoryArray=[]}ngOnInit(){this.categoryService.loadData().subscribe(r=>{this.categoryArray=r})}};e.\u0275fac=function(i){return new(i||e)(ae(Ok))},e.\u0275cmp=Oe({type:e,selectors:[["app-category-navbar"]],standalone:!0,features:[Fe],decls:3,vars:1,consts:[[1,"navbar","navbar-expand-lg","fixed-top"],[1,"collapse","navbar-collapse","justify-content-center"],["class","navbar-nav",4,"ngFor","ngForOf"],[1,"navbar-nav"],[1,"nav-item","ml-3"],[1,"nav-link",3,"routerLink"]],template:function(i,s){i&1&&(V(0,"nav",0)(1,"div",1),vt(2,g5,4,5,"ul",2),k()()),i&2&&(de(2),Me("ngForOf",s.categoryArray))},dependencies:[fn,ji,Ea],styles:["nav[_ngcontent-%COMP%]{margin-top:100px;height:50px;background-color:var(--navbar-footer-color)}.nav-link[_ngcontent-%COMP%]{text-transform:uppercase}"]});let n=e;return n})();var Vk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Oe({type:e,selectors:[["app-footer"]],standalone:!0,features:[Fe],decls:22,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-12","text-center"],[1,"site-logo"],[1,"nav","justify-content-center"],[1,"nav-item"],["href","",1,"nav-link"],[1,"mb-2","mt-2"]],template:function(i,s){i&1&&(V(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),B(5,"AberRange Innovate"),k(),V(6,"div")(7,"ul",4)(8,"li",5)(9,"a",6),B(10,"Home"),k()(),V(11,"li",5)(12,"a",6),B(13,"About Us"),k()(),V(14,"li",5)(15,"a",6),B(16,"Terms and conditions"),k()(),V(17,"li",5)(18,"a",6),B(19,"Contact"),k()()()(),V(20,"p",7),B(21,"Copyright \xA9 2021 AberRange Solutions"),k()()()()())},styles:["footer[_ngcontent-%COMP%]{height:130px;padding:15px;background-color:var(--navbar-footer-color)}.site-logo[_ngcontent-%COMP%]{font-size:1.2em}"]});let n=e;return n})();var Lk=(()=>{let e=class e{constructor(r){this.afs=r}addSubs(r){this.afs.collection("subscribers").add(r).then(()=>{})}checkSubs(r){return this.afs.collection("subscribers",i=>i.where("email","==",r)).get()}};e.\u0275fac=function(i){return new(i||e)($(vc))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var jk=n=>({"is-invalid":n});function y5(n,e){n&1&&(V(0,"div",10),B(1," You are already a subscriber! Stay tuned for updates. "),k())}function v5(n,e){n&1&&(V(0,"div",11),B(1," Thank you for subscribing! Stay tuned for timely updates!. "),k())}function _5(n,e){n&1&&(V(0,"div"),B(1,"Name is Required"),k())}function w5(n,e){if(n&1&&(V(0,"div",20),vt(1,_5,2,0,"div",21),k()),n&2){aa();let t=Vs(5);de(),Me("ngIf",t.errors==null?null:t.errors.required)}}function E5(n,e){n&1&&(V(0,"div"),B(1,"Email is Required"),k())}function I5(n,e){n&1&&(V(0,"div"),B(1,"Please enter a valid email address"),k())}function D5(n,e){if(n&1&&(V(0,"div",20),vt(1,E5,2,0,"div",21)(2,I5,2,0,"div",21),k()),n&2){aa();let t=Vs(9);de(),Me("ngIf",t.errors==null?null:t.errors.required),de(),Me("ngIf",t.errors==null?null:t.errors.email)}}function b5(n,e){if(n&1){let t=yM();V(0,"form",12,0),Fi("ngSubmit",function(){CS(t);let i=Vs(1),s=aa();return TS(s.onSubmit(i.value))}),V(2,"div",13)(3,"div",14),Ne(4,"input",15,1),vt(6,w5,2,1,"div",16),k(),V(7,"div",14),Ne(8,"input",17,2),vt(10,D5,3,2,"div",16),k(),V(11,"div",18)(12,"button",19),B(13," Subscribe "),k()()()()}if(n&2){let t=Vs(1),r=Vs(5),i=Vs(9);de(4),Me("ngClass",wu(5,jk,r.touched&&r.invalid)),de(2),Me("ngIf",r.touched&&r.invalid),de(2),Me("ngClass",wu(7,jk,i.touched&&i.invalid)),de(2),Me("ngIf",i.touched&&i.invalid),de(2),Me("disabled",t.invalid)}}var Uk=(()=>{let e=class e{constructor(r){this.subService=r,this.isEmailError=!1,this.isSubscribed=!1}onSubmit(r){let i={name:r.name,email:r.email};this.subService.checkSubs(i.email).subscribe(s=>{s.empty?(this.subService.addSubs(i),this.isSubscribed=!0):this.isEmailError=!0})}};e.\u0275fac=function(i){return new(i||e)(ae(Lk))},e.\u0275cmp=Oe({type:e,selectors:[["app-subscription-form"]],standalone:!0,features:[Fe],decls:10,vars:3,consts:[["subForm","ngForm"],["Name","ngModel"],["Email","ngModel"],[1,"card","shadow-effect"],[1,"card-body"],[1,"text-center","mt-3","mb-5"],[1,"m-auto","subs-text"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],["class","form-inline mb-5 mt-5",3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-success","mt-3"],[1,"form-inline","mb-5","mt-5",3,"ngSubmit"],[1,"row"],[1,"form-group","col-md-5"],["type","text","placeholder","Your name","name","name","ngModel","","required","",1,"form-control","shadow-effect",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","email","placeholder","Email Address","name","email","ngModel","","required","","email","",1,"form-control","shadow-effect",3,"ngClass"],[1,"col-md-2"],["type","submit",1,"btn","btn-info","btn-block","btn-theme",3,"disabled"],[1,"text-danger"],[4,"ngIf"]],template:function(i,s){i&1&&(V(0,"div",3)(1,"div",4)(2,"div",5)(3,"h3"),B(4,"Subscription Form"),k(),V(5,"p",6),B(6," Subscribe to our newsletter and never miss out on the latest articles, tips, and exclusive content from AberRange Innovate. Join our community and get insights delivered straight to your inbox! "),k(),vt(7,y5,2,0,"div",7)(8,v5,2,0,"div",8)(9,b5,14,9,"form",9),k()()()),i&2&&(de(7),Me("ngIf",s.isEmailError),de(),Me("ngIf",s.isSubscribed),de(),Me("ngIf",!s.isSubscribed))},dependencies:[ip,DR,tp,mR,yR,vw,_w,yw,mw,fn,QM,da],styles:[".card[_ngcontent-%COMP%]{background-color:var(--secondary-color)}input[_ngcontent-%COMP%]   [type=text][_ngcontent-%COMP%], input[_ngcontent-%COMP%]   [type=email][_ngcontent-%COMP%]{width:100%}.subs-text[_ngcontent-%COMP%]{width:500px}"]});let n=e;return n})();var Bk=(()=>{let e=class e{constructor(){this.title="aberrange-innovate"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Oe({type:e,selectors:[["app-root"]],standalone:!0,features:[Fe],decls:8,vars:0,consts:[[1,"app-body"],[1,"container","mt-5","mb-5"],[1,"row","justify-content-center"]],template:function(i,s){i&1&&(Ne(0,"app-header")(1,"app-category-navbar"),V(2,"div",0),Ne(3,"router-outlet"),k(),V(4,"div",1)(5,"div",2),Ne(6,"app-subscription-form"),k()(),Ne(7,"app-footer"))},dependencies:[rw,kk,Fk,Vk,Uk],styles:[".app-body[_ngcontent-%COMP%]{min-height:55vh;margin-top:150px}"]});let n=e;return n})();hx(Bk,Pk).catch(n=>console.error(n));
